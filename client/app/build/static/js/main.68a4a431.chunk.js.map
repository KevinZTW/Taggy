{"version":3,"sources":["component/RSS/FindRSS.module.css","component/SideTab/FunctionTab.module.css","component/SideTab/FolderTab.module.css","component/RSS/RSSBoard.module.css","component/RSS/RSSPage.module.css","component/RSS/RSSHeader.module.css","css/SignUp.module.css","component/Header/Header.module.css","component/Board.module.css","component/Graph/Graph.module.css","css/Card.module.css","component/RSS/RSSCard.module.css","css/Article.module.css","firebase.js","lib/lib.js","component/Article/Aritcle.jsx","config.js","component/AddArticle.jsx","component/Member/Signup.jsx","component/Member/Signin.jsx","component/Card.jsx","component/CardWrapper.jsx","redux/actions/index.js","component/Board.jsx","component/MyRouter.jsx","component/SideTab/Folder.jsx","component/SideTab/FolderTab.jsx","component/Group/GroupFolderSub.jsx","component/Group/GroupFolderTab.jsx","component/Group/GroupBoard.jsx","lib/gragh_lib.js","component/Graph/Graph1.jsx","hooks/useD3.js","component/RSS/RSSFolder.jsx","component/RSS/RSSTab.jsx","component/RSS/RSSCard.jsx","component/RSS/RSSPage.jsx","component/RSS/RSSBoard.jsx","component/RSS/FindRSS.jsx","img/sf_logo.png","component/RSS/RSSExplore.jsx","img/logo.png","component/SideTab/FunctionTab.jsx","component/App.jsx","reportWebVitals.js","redux/reducers/article_Reducer.jsx","redux/reducers/member_Reducer.jsx","redux/reducers/RSS_Reducer.jsx","redux/reducers/index.js","index.js","component/Group/GroupBoard.module.css"],"names":["module","exports","app","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","db","firestore","uid","Promise","resolve","reject","collection","doc","get","then","a","data","articleFolderIds","articleFolders","console","log","i","push","id","name","tags","folderId","tagIds","folderTags","value","label","articleId","articleTags","tagId","memberTags","initArticleTags","articleTagSelection","getArticleTags","values","getMemberTags","options","checkTagUnderUser","inputTag","tagName","add","articles","docRef","update","FieldValue","arrayUnion","set","catch","error","deleteTagFromArticle","arrayRemove","checkRSSInFetchList","url","where","snapshot","empty","forEach","addRSSToFetchList","feed","title","link","description","img","image","lastUpdate","lastBuildDate","checkUserHasUncaFolder","RSSFolders","includes","addRSSToMember","feedId","RSS","subscribedRSS","subscribeRSS","RSSId","addRSSItem","checkRSSItem","item","snapShot","titleList","itemTitle","items","evaluate","content","contentSnippet","creator","guid","isoDate","pubDate","dayjs","valueOf","author","getMemberRSSFolders","RSSFolderIds","RSSIds","getRSSInfo","getChannelFeeds","getFeedContent","tilte","getGroupArticleFolders","Article","useState","setTags","article","setArticle","note","setNote","search","useLocation","URLSearchParams","user","useSelector","state","memberReducer","customStyles","menu","provided","background","borderBottom","color","padding","option","styles","isDisabled","isFocused","isSelected","backgroundColor","cursor","control","minWidth","useEffect","getArticles","onSnapshot","undefined","readerHtml","className","articleWrapper","data-src","alt","head","to","style","tagWrapper","isMulti","width","menuColor","onChange","newValue","actionMeta","action","removedValue","group","dir","groupEnd","onCreateOption","inputValue","defaultValue","articleMain","articleBody","dangerouslySetInnerHTML","__html","theme","e","localUrl","AddArticle","props","reqUrl","setReqUrl","type","currentTarget","onClick","preventDefault","fetch","method","headers","body","JSON","stringify","response","status","json","err","postDataToServer","Signup","uiConfig","callbacks","signInSuccess","authResult","redirectUrl","email","displaynamename","displayName","history","code","errorMessage","message","signInFlow","signInOptions","GoogleAuthProvider","PROVIDER_ID","useHistory","setName","setEmail","password","setPassword","wrapper","block","form","onSubmit","createUserWithEmailAndPassword","currentUser","updateProfile","firebaseSignUp","inputbox","htmlFor","firebaseAuth","login","signInWithEmailAndPassword","errorCode","firebaseSignIn","Card","elem","document","createElement","innerHTML","htmlContent","src","querySelector","container","card","wordWrapper","actionContainer","fontSize","delete","CardWrapper","list","articleList","articleReducer","tagSelected","INITARTICLE","SWITCHARTICLE","tag","GETRSSRESPONSE","SWITCHRSS","ChannelRSSId","GROUPINIT","groups","Board","dispatch","useDispatch","orderBy","querySnapshot","markDown","slice","boardWrapper","MyRouter","onAuthStateChanged","useStyles","makeStyles","root","Folder","classes","tabList","count","draggableId","index","TreeItem","draggableProps","dragHandleProps","ref","innerRef","nodeId","labelWrapper","labelTitle","Skeleton","variant","height","animation","showTabTreeList","flexGrow","maxWidth","marginBottom","FolderTab","editFolder","setEditFolder","addFolderInput","setAddFolderInput","setArticleFolders","getMemberArticleFolders","tempFolderList","length","getMemberFolderTags","newFolder","articleFolderList","folders","droppableId","droppableProps","key","placeholder","showArticleFolders","folderTabWrapper","folderTab","sectionTitle","TreeView","defaultExpanded","defaultCollapseIcon","defaultExpandIcon","onDragEnd","result","destination","source","newArticleFolders","folder","newTags","moveItem","splice","firestoreTagArr","createPortal","popup","blur","addFolder","addTitle","input","target","saveBtn","alert","cancelBtn","subTitle","GroupFolderSub","GroupFolderTab","addGroup","setAddGroup","addGroupInput","setAddGroupInput","getMemberGroups","board","getGroupDbInfo","boardId","groupIds","info","folderWithTagInfo","map","all","groupId","memberGroupInit","groupTabs","renderGroupTabs","member","addMember","setAddMember","titleWrapper","actionList","stopPropagation","addMemberWrapper","memberWrapper","getGraphData","initGraphData","nodes","links","Graph","setData","renderChartFn","dependencies","React","useRef","current","d3","useD3","svg","d","Object","create","simulation","force","strength","distanceMax","append","attr","selectAll","join","Math","sqrt","node","call","on","event","active","alphaTarget","restart","subject","fx","x","fy","y","drag","circle","text","clone","lower","combInit","combList","j","createCombinationList","warn","combNumber","countCombinationNumber","graphWrapper","marginRight","marginLeft","RSSFolder","RSSList","showRSSItem","folderRSS","RSSTab","showPage","setShowPage","setRSSFolders","userRSSList","RSSReducer","UserRSSList","RSSFolderList","showRSSFolders","newRSSIds","newRSSFolders","moveId","newSourceRSSIds","newDestinationRSSIds","RSSCard","RSSPage","feedItem","setFeedItem","page","msg","allFeeds","setAllFeeds","channelFeeds","setChannelFeeds","lastVisible","setLastVisible","lastQueryDoc","setLastQueryDoc","allFeedsOutome","handleScroll","scrollTop","documentElement","scrollHeight","clientHeight","window","addEventListener","removeEventListener","limit","docs","startAfter","batchFetchAllFeeds","fetchChannelFeed","feedItems","feedList","renderAllFeeds","renderChannelFeeds","feedPage","renderFeedPage","FindRSS","addArticle","class","addForm","RSSParser","parseURL","local","rss","entry","searchFeed","searchFeedUrl","searchOutcome","subscribe_btn","renderSearchFeed","categoryTitle","categoryWrapper","categoryCard","cardUpper","cardImg","sfLogo","cardWording","cardTitle","cardDescription","cardBtn","FunctionTab","functionTabWrapper","functionTab","logoWrapper","logo","iconWrapper","calssName","exit","signOut","App","path","component","Signin","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","article_Reducer","member_Reducer","RSS_Reducer","userAllFeeds","allReducers","combineReducers","store","createStore","composeWithDevTools","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.68a4a431.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"addArticle\":\"FindRSS_addArticle__3_qks\",\"addTitle\":\"FindRSS_addTitle__1wsn0\",\"addForm\":\"FindRSS_addForm__3Z4Ot\",\"input\":\"FindRSS_input__jhFPD\",\"add\":\"FindRSS_add__1MrI6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"functionTabWrapper\":\"FunctionTab_functionTabWrapper__2E3ar\",\"functionTab\":\"FunctionTab_functionTab__3iiBL\",\"logoWrapper\":\"FunctionTab_logoWrapper__FNK68\",\"iconWrapper\":\"FunctionTab_iconWrapper__2Wipq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"folderTabWrapper\":\"FolderTab_folderTabWrapper__2niIu\",\"folderTab\":\"FolderTab_folderTab__16C6M\",\"sectionTitle\":\"FolderTab_sectionTitle__2NdNu\",\"labelWrapper\":\"FolderTab_labelWrapper__1781X\",\"labelTitle\":\"FolderTab_labelTitle__uK57g\",\"subTitle\":\"FolderTab_subTitle__2XqZN\",\"popup\":\"FolderTab_popup__1FOmD\",\"popUpSlide\":\"FolderTab_popUpSlide__2e-fK\",\"blur\":\"FolderTab_blur__qVu-f\",\"addFolder\":\"FolderTab_addFolder__23fRR\",\"addTitle\":\"FolderTab_addTitle__2FLAo\",\"input\":\"FolderTab_input__ScEVH\",\"saveBtn\":\"FolderTab_saveBtn__1FO0F\",\"cancelBtn\":\"FolderTab_cancelBtn__2aYJQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"boardWrapper\":\"RSSBoard_boardWrapper__16EX2\",\"board\":\"RSSBoard_board__38Rna\",\"title\":\"RSSBoard_title__15GhO\",\"content\":\"RSSBoard_content__3Q0dv\",\"subscribe_btn\":\"RSSBoard_subscribe_btn__1ZnMQ\",\"popup\":\"RSSBoard_popup__2ssSi\",\"popUpSlide\":\"RSSBoard_popUpSlide__35Eo7\",\"blur\":\"RSSBoard_blur__3-EVn\",\"categoryTitle\":\"RSSBoard_categoryTitle__306sx\",\"categoryWrapper\":\"RSSBoard_categoryWrapper__1unZr\",\"categoryCard\":\"RSSBoard_categoryCard__2HO8K\",\"cardUpper\":\"RSSBoard_cardUpper__19CiD\",\"cardTitle\":\"RSSBoard_cardTitle__3KPoY\",\"cardDescription\":\"RSSBoard_cardDescription__1M6kx\",\"cardImg\":\"RSSBoard_cardImg__1BD1C\",\"cardBtn\":\"RSSBoard_cardBtn__V1wDN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"RSSPage_page__3Q9XS\",\"title\":\"RSSPage_title__2XScQ\",\"head\":\"RSSPage_head__1VR8a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"signOut\":\"RSSHeader_signOut__2rqQG\",\"header\":\"RSSHeader_header__3_tX0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"SignUp_wrapper__2d3J1\",\"block\":\"SignUp_block__1ink9\",\"title\":\"SignUp_title__3MK8E\",\"form\":\"SignUp_form__3fw2S\",\"inputbox\":\"SignUp_inputbox__2Lfhs\",\"login\":\"SignUp_login__2Tq4f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"signOut\":\"Header_signOut__3E39S\",\"header\":\"Header_header__3CDt1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"boardWrapper\":\"Board_boardWrapper__26hLO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"graphWrapper\":\"Graph_graphWrapper__3X3DP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Card_container__2vSb6\",\"card\":\"Card_card__3C6Cc\",\"color\":\"Card_color__3S4k1\",\"img\":\"Card_img__3vgPn\",\"actionContainer\":\"Card_actionContainer__34GAW\",\"delete\":\"Card_delete__25V8_\",\"title\":\"Card_title__HprCG\",\"content\":\"Card_content__3Nr22\",\"wordWrapper\":\"Card_wordWrapper__1vPtQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"RSSCard_container__1w-D7\",\"card\":\"RSSCard_card__39rjh\",\"color\":\"RSSCard_color__29tbN\",\"img\":\"RSSCard_img__3Fgy6\",\"title\":\"RSSCard_title__2lXv2\",\"content\":\"RSSCard_content__1mFFX\",\"wordWrapper\":\"RSSCard_wordWrapper__3HcZP\",\"creator\":\"RSSCard_creator__3NYCD\",\"delete\":\"RSSCard_delete__23NFO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"articleWrapper\":\"Article_articleWrapper__jFaXp\",\"title\":\"Article_title__1Mrw9\",\"head\":\"Article_head__31GUo\",\"tagWrapper\":\"Article_tagWrapper__VZfHf\",\"tag\":\"Article_tag__3LVVi\",\"addTag\":\"Article_addTag__1oXdm\",\"articleMain\":\"Article_articleMain__230p8\",\"note\":\"Article_note__T-K1s\",\"articleBody\":\"Article_articleBody__3kboI\"};","import firebase from \"firebase/app\";\n// If you enabled Analytics in your project, add the Firebase SDK for Analytics\nimport \"firebase/analytics\";\nimport { useHistory } from \"react-router-dom\";\n// Add the Firebase products that you want to use\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nvar app = firebase.initializeApp({\n  apiKey: \"AIzaSyA4cFmihlY5pIDTssbGwk9YNfGEjRfEBh4\",\n  authDomain: \"knowledge-base-tw.firebaseapp.com\",\n  databaseURL: \"https://knowledge-base-tw.firebaseio.com\",\n  projectId: \"knowledge-base-tw\",\n  storageBucket: \"knowledge-base-tw.appspot.com\",\n  messagingSenderId: \"786102856750\",\n  appId: \"1:786102856750:web:6bf12efd1fefb24aca83bf\",\n  measurementId: \"G-RBNFGWQ2WE\",\n});\nexport const auth = app.auth();\nexport default app;\nexport var db = firebase.firestore();\n\nexport const deleteArticle = function (id) {\n  console.log(id);\n  db.collection(\"Articles\")\n    .doc(id)\n    .delete()\n    .then(console.log(\"Document successfully deleted!\"))\n    .catch(function (error) {\n      console.error(\"Error delete document: \", error);\n    });\n};\n\n//============================== Auth ============================================================\n\nexport function CheckFirebaseUserStatus(direct, getUserData) {\n  let history = useHistory();\n  firebase.auth().onAuthStateChanged((user) => {\n    if (user) {\n      console.log(user);\n      if (getUserData) {\n        getUserData({\n          uid: user.uid,\n          email: user.email,\n          displayname: user.displayname,\n          providerData: user.providerData,\n        });\n      }\n    } else {\n      console.log(\"no user, redirect to sign up\");\n      history.push(direct);\n    }\n  });\n}\n","import { resolve } from \"path\";\nimport firebase from \"firebase/app\";\nimport { db, FieldValue } from \"../firebase.js\";\nimport dayjs from \"dayjs\";\n\nexport const app = {};\napp.getMemberArticleFolders = function (uid) {\n  return new Promise((resolve, reject) => {\n    db.collection(\"Member\")\n      .doc(uid)\n      .get()\n      .then(async (doc) => {\n        if (doc.data()) {\n          let articleFolderIds = doc.data().articleFolders;\n          let articleFolders = [];\n          console.log(articleFolderIds);\n          if (articleFolderIds !== \"\" && articleFolderIds) {\n            for (let i in articleFolderIds) {\n              console.log(articleFolderIds[i]);\n              await db\n                .collection(\"articleFolders\")\n                .doc(articleFolderIds[i])\n                .get()\n                .then((doc) => {\n                  articleFolders.push({\n                    id: doc.data().id,\n                    name: doc.data().name,\n                    tags: doc.data().tags,\n                  });\n                });\n            }\n          }\n          resolve(articleFolders);\n        } else resolve(\"dont have this user\");\n      });\n  });\n};\napp.getMemberFolderTags = function (folderId) {\n  return new Promise((resolve, reject) => {\n    db.collection(\"articleFolders\")\n      .doc(folderId)\n      .get()\n      .then(async (doc) => {\n        if (doc.data()) {\n          let tagIds = doc.data().tags;\n          let folderTags = [];\n          console.log(tagIds);\n          if (tagIds !== \"\" && tagIds) {\n            for (let i in tagIds) {\n              console.log(tagIds[i]);\n              await db\n                .collection(\"Tags\")\n                .doc(tagIds[i])\n                .get()\n                .then((doc) => {\n                  folderTags.push({\n                    id: tagIds[i],\n                    value: doc.data().name,\n                    label: doc.data().name,\n                  });\n                });\n            }\n          }\n          resolve(folderTags);\n        } else resolve(\"\");\n      });\n  });\n};\n\napp.getArticleTags = function (articleId) {\n  return new Promise((resolve, reject) => {\n    db.collection(\"Articles\")\n      .doc(articleId)\n      .get()\n      .then((doc) => {\n        let tags = doc.data().tags;\n\n        let articleTags = [];\n        if (tags) {\n          for (let i in tags) {\n            db.collection(\"Tags\")\n              .doc(tags[i])\n              .get()\n              .then((doc) => {\n                console.log(doc.data());\n                articleTags.push({\n                  tagId: tags[i],\n                  label: doc.data().name,\n                  value: doc.data().name,\n                });\n              });\n            resolve(articleTags);\n          }\n        } else {\n          resolve(\"\");\n        }\n      });\n  });\n};\n\napp.getMemberTags = function (uid) {\n  return new Promise((resolve, reject) => {\n    console.log(uid);\n    db.collection(\"Member\")\n      .doc(uid)\n      .get()\n      .then(async (doc) => {\n        console.log(doc.data());\n        if (doc.data()) {\n          let tagIds = doc.data().tags;\n          let memberTags = [];\n          console.log(tagIds);\n          if (tagIds !== \"\" && tagIds) {\n            for (let i in tagIds) {\n              await db\n                .collection(\"Tags\")\n                .doc(tagIds[i])\n                .get()\n                .then((doc) => {\n                  memberTags.push({\n                    id: tagIds[i],\n                    value: doc.data().name,\n                    label: doc.data().name,\n                  });\n                });\n            }\n          }\n          console.log(memberTags);\n          resolve(memberTags);\n        } else resolve(\"\");\n      });\n  });\n};\n\napp.initArticleTags = async function (articleId, uid) {\n  let articleTagSelection = {};\n  await app.getArticleTags(articleId).then((articleTags) => {\n    articleTagSelection.values = articleTags;\n  });\n  await app.getMemberTags(uid).then((memberTags) => {\n    articleTagSelection.options = memberTags;\n  });\n  console.log(articleTagSelection);\n  return articleTagSelection;\n};\n\napp.checkTagUnderUser = function (name, uid) {\n  return new Promise((resolve, reject) => {\n    db.collection(\"Member\")\n      .doc(uid)\n      .get()\n      .then(async (doc) => {\n        console.log(uid);\n        if (doc.data()) {\n          let tags = doc.data().tags;\n          console.log(tags);\n          if (tags) {\n            for (let i in tags) {\n              await db\n                .collection(\"Tags\")\n                .doc(tags[i])\n                .get()\n                .then((doc) => {\n                  if (doc.data().name === name) {\n                    console.log(doc.data().name);\n                    console.log(\"resolve the id\");\n                    resolve(doc.data().id);\n                  }\n                });\n            }\n            resolve(\"notExist\");\n          } else {\n            resolve(\"noanytag\");\n          }\n        } else {\n          resolve(\"nothisuser\");\n        }\n      });\n  });\n};\napp.inputTag = function (articleId, uid, tagName) {\n  console.log(uid);\n  app.checkTagUnderUser(tagName, uid).then((tagId) => {\n    console.log(tagId);\n    if (tagId === \"noanytag\") {\n      db.collection(\"Tags\")\n        .add({\n          name: tagName,\n          articles: [articleId],\n        })\n        .then(function (docRef) {\n          console.log(\"Document written with ID: \", docRef.id);\n\n          docRef.update({ id: docRef.id });\n          return docRef.id;\n        })\n        .then((tagId) => {\n          db.collection(\"Articles\")\n            .doc(articleId)\n            .update({ tags: firebase.firestore.FieldValue.arrayUnion(tagId) });\n          return tagId;\n        })\n        .then((tagId) => {\n          db.collection(\"Member\")\n            .doc(uid)\n            .update({ tags: [tagId] });\n          return tagId;\n        })\n        .then((tagId) => {\n          db.collection(\"articleFolders\")\n            .doc(\"un\" + uid)\n            .set({\n              id: \"un\" + uid,\n              name: \"Uncategorized\",\n              tags: firebase.firestore.FieldValue.arrayUnion(tagId),\n            })\n            .then(() => {\n              db.collection(\"Member\")\n                .doc(uid)\n                .update({\n                  articleFolders: firebase.firestore.FieldValue.arrayUnion(\n                    \"un\" + uid\n                  ),\n                });\n            });\n        })\n        .catch(function (error) {\n          console.error(\"Error adding document: \", error);\n        });\n    } else if (tagId === \"notExist\") {\n      console.log(\"user dont have this tag, CREAT AND ADD to ARTICLE\");\n      db.collection(\"Tags\")\n        .add({\n          name: tagName,\n          articles: [articleId],\n        })\n        .then(function (docRef) {\n          console.log(\"Document written with ID: \", docRef.id);\n\n          docRef.update({ id: docRef.id });\n          return docRef.id;\n        })\n        .then((tagId) => {\n          db.collection(\"Articles\")\n            .doc(articleId)\n            .update({ tags: firebase.firestore.FieldValue.arrayUnion(tagId) });\n          return tagId;\n        })\n        .then((tagId) => {\n          db.collection(\"Member\")\n            .doc(uid)\n            .update({ tags: firebase.firestore.FieldValue.arrayUnion(tagId) });\n          return tagId;\n        })\n        .then((tagId) => {\n          console.log(\"tag add to :\", \"un\" + uid, \"value is\", tagId);\n          db.collection(\"articleFolders\")\n            .doc(\"un\" + uid)\n            .update({ tags: firebase.firestore.FieldValue.arrayUnion(tagId) });\n        })\n\n        .catch(function (error) {\n          console.error(\"Error adding document: \", error);\n        });\n    } else {\n      console.log(\"user already has this tag, ADD ATICLE\");\n      db.collection(\"Tags\")\n        .doc(tagId)\n        .update({\n          articles: firebase.firestore.FieldValue.arrayUnion(articleId),\n        });\n      db.collection(\"Articles\")\n        .doc(articleId)\n        .update({ tags: firebase.firestore.FieldValue.arrayUnion(tagId) });\n    }\n  });\n};\napp.deleteTagFromArticle = function (articleId, uid, tagId) {\n  db.collection(\"Articles\")\n    .doc(articleId)\n    .update({ tags: firebase.firestore.FieldValue.arrayRemove(tagId) });\n};\n\napp.checkRSSInFetchList = function (url) {\n  return new Promise((resolve, reject) => {\n    console.log(url);\n    db.collection(\"RSSFetchList\")\n      .where(\"url\", \"==\", url)\n      .get()\n      .then((snapshot) => {\n        if (snapshot.empty) {\n          console.log(\"not in fetch list\");\n          resolve(false);\n        } else {\n          snapshot.forEach((doc) => {\n            if (doc.data()) {\n              console.log(\"already id fetch list, the id is:\");\n              resolve(doc.data().id);\n            } else {\n              console.log(\"sth pretty weird happened\");\n            }\n          });\n        }\n      });\n  });\n};\napp.addRSSToFetchList = function (feed, url) {\n  return new Promise((resolve, reject) => {\n    db.collection(\"RSSFetchList\")\n      .add({\n        title: feed.title || \"null\",\n        url: url || \"null\",\n        link: feed.link || \"null\",\n        description: feed.description || \"null\",\n        img: (feed.image || {}).url || \"null\",\n        lastUpdate: feed.lastBuildDate || \"null\",\n      })\n      .then((docRef) => {\n        docRef.update({ id: docRef.id });\n        return docRef.id;\n      })\n      .then((id) => resolve(id));\n  });\n};\napp.checkUserHasUncaFolder = function (uid) {\n  return new Promise((resolve, reject) => {\n    console.log(uid);\n    db.collection(\"Member\")\n      .doc(uid)\n      .get()\n      .then((doc) => {\n        if (doc.data().RSSFolders.includes(\"unCa_\" + uid)) {\n          resolve(true);\n        } else resolve(false);\n      });\n  });\n};\n\napp.addRSSToMember = function (uid, feedId) {\n  return new Promise(async (resolve, reject) => {\n    if (!(await app.checkUserHasUncaFolder(uid))) {\n      console.log(\"user dont have unCat folder, create and as RSS to it \");\n      db.collection(\"RSSFolders\")\n        .doc(\"unCa_\" + uid)\n        .set({\n          uid: uid,\n          name: \"Uncategorized\",\n          RSS: firebase.firestore.FieldValue.arrayUnion(feedId),\n          id: \"unCa_\" + uid,\n        })\n        .then((folderId) => {\n          db.collection(\"Member\")\n            .doc(uid)\n            .update({\n              subscribedRSS: firebase.firestore.FieldValue.arrayUnion(feedId),\n              RSSFolders: firebase.firestore.FieldValue.arrayUnion(\n                \"unCa_\" + uid\n              ),\n            })\n            .then(console.log(\"successfully add to user\"));\n        });\n    } else {\n      console.log(\"user already has unCat folder, as RSS to it \");\n      db.collection(\"RSSFolders\")\n        .doc(\"unCa_\" + uid)\n        .update({\n          RSS: firebase.firestore.FieldValue.arrayUnion(feedId),\n        })\n        .then((folderId) => {\n          db.collection(\"Member\")\n            .doc(uid)\n            .update({\n              subscribedRSS: firebase.firestore.FieldValue.arrayUnion(feedId),\n            })\n            .then(console.log(\"successfully add to user\"));\n        });\n    }\n  });\n};\n\napp.subscribeRSS = async function (uid, title, url, feed) {\n  console.log(\"add to \", uid, title, url);\n  app.checkRSSInFetchList(url).then((RSSId) => {\n    if (RSSId) {\n      console.log(\"RSS already in Fetch List\");\n      app.addRSSToMember(uid, RSSId);\n    } else {\n      console.log(\"Add RSS to fetch List\");\n      app.addRSSToFetchList(feed, url).then((RSSId) => {\n        console.log(\"add RSS to member\");\n        app.addRSSToMember(uid, RSSId);\n        console.log(\"Add feed to RSSItem\");\n        app.addRSSItem(feed, RSSId);\n      });\n    }\n  });\n};\napp.checkRSSItem = function (title, item) {\n  return db\n    .collection(\"RSSItem\")\n    .where(\"title\", \"==\", title)\n    .get()\n    .then((snapShot) => {\n      let titleList = [];\n      snapShot.forEach((doc) => {\n        titleList.push(doc.data().itemTitle);\n      });\n      console.log(titleList);\n      console.log(item.title);\n      console.log(titleList.includes(item.title));\n      if (titleList.includes(item.title)) {\n        console.log(\"already in db\");\n        return false;\n      } else console.log(\"check and not in db \");\n      return true;\n    });\n};\napp.addRSSItem = function (feed, RSSId) {\n  for (let i in feed.items) {\n    app.checkRSSItem(feed.title, feed.items[i]).then((evaluate) => {\n      console.log(evaluate);\n      if (evaluate) {\n        console.log(\"this feed not in db, let's save it \");\n        db.collection(\"RSSItem\")\n          .add({\n            RSSId: RSSId,\n            content: feed.items[i].content || \"\",\n            contentSnippet: feed.items[i].contentSnippet || \"\",\n            RSS: feed.title || \"\",\n            title: feed.items[i].title || \"\",\n            creator: feed.items[i].creator || \"\",\n            guid: feed.items[i].guid || \"\",\n            isoDate: feed.items[i].isoDate || \"\",\n            link: feed.items[i].link || \"\",\n            pubDate: dayjs(feed.items[i].pubDate).valueOf() || \"\",\n            author: feed.items[i].author || \"\",\n          })\n          .then((docRef) => docRef.update({ id: docRef.id }))\n          .then(console.log(\"store successfully!\"));\n      } else {\n        console.log(\"already store this feed, let's skip\");\n      }\n    });\n  }\n};\napp.getMemberRSSFolders = function (uid) {\n  return new Promise((resolve, reject) => {\n    db.collection(\"Member\")\n      .doc(uid)\n      .get()\n      .then(async (doc) => {\n        if (doc.data()) {\n          let RSSFolderIds = doc.data().RSSFolders;\n          let RSSFolders = [];\n          console.log(RSSFolderIds);\n          if (RSSFolderIds !== \"\" && RSSFolderIds) {\n            for (let i in RSSFolderIds) {\n              console.log(RSSFolderIds[i]);\n              await db\n                .collection(\"RSSFolders\")\n                .doc(RSSFolderIds[i])\n                .get()\n                .then((doc) => {\n                  RSSFolders.push({\n                    id: doc.data().id,\n                    name: doc.data().name,\n                    RSSIds: doc.data().RSS,\n                    RSS: [],\n                  });\n                });\n            }\n          }\n          resolve(RSSFolders);\n        } else resolve(\"dont have this user\");\n      });\n  });\n};\napp.getRSSInfo = function (RSSId) {\n  return new Promise((resolve, reject) => {\n    db.collection(\"RSSFetchList\")\n      .doc(RSSId)\n      .get()\n      .then(async (doc) => {\n        if (doc.data()) {\n          resolve({\n            id: doc.data().id,\n            title: doc.data().title,\n            url: doc.data().url,\n          });\n        }\n      });\n  });\n};\napp.getChannelFeeds = function (RSSId) {\n  return new Promise((resolve, reject) => {\n    let items = [];\n    db.collection(\"RSSItem\")\n      .where(\"RSSId\", \"==\", RSSId)\n      // .orderBy(\"isoDate\", \"desc\")\n      .get()\n      .then((snapShot) => {\n        snapShot.forEach((doc) => {\n          items.push({\n            RSSId: doc.data().RSSId,\n            content: doc.data().content,\n            contentSnippet: doc.data().contentSnippet,\n            RSS: doc.data().RSS,\n            title: doc.data().title,\n            creator: doc.data().creator,\n            guid: doc.data().guid,\n            isoDate: doc.data().isoDate,\n            link: doc.data().link,\n            pubDate: doc.data().pubDate,\n            author: doc.data().author,\n          });\n        });\n        resolve(items);\n      });\n  });\n};\napp.getFeedContent = function (feedId) {\n  return new Promise((resolve, reject) => {\n    db.collection(\"RSSItem\")\n      .doc(feedId)\n      .get()\n      .then((doc) => {\n        resolve({\n          RSSId: doc.data().RSSId,\n          content: doc.data().content,\n          contentSnippet: doc.data().contentSnippet,\n          RSS: doc.data().RSS,\n          title: doc.data().tilte,\n          creator: doc.data().creator,\n          guid: doc.data().guid,\n          isoDate: doc.data().isoDate,\n          link: doc.data().link,\n          pubDate: doc.data().pubDate,\n          author: doc.data().author,\n        });\n      });\n  });\n};\n\napp.getGroupArticleFolders = function (uid) {\n  return new Promise((resolve, reject) => {\n    db.collection(\"GroupBoard\")\n      .doc(uid)\n      .get()\n      .then(async (doc) => {\n        if (doc.data()) {\n          let articleFolderIds = doc.data().articleFolders;\n          let articleFolders = [];\n          console.log(articleFolderIds);\n          if (articleFolderIds !== \"\" && articleFolderIds) {\n            for (let i in articleFolderIds) {\n              console.log(articleFolderIds[i]);\n              await db\n                .collection(\"articleFolders\")\n                .doc(articleFolderIds[i])\n                .get()\n                .then((doc) => {\n                  articleFolders.push({\n                    id: doc.data().id,\n                    name: doc.data().name,\n                    tags: doc.data().tags,\n                  });\n                });\n            }\n          }\n          resolve(articleFolders);\n        } else resolve(\"dont have this user\");\n      });\n  });\n};\n","import { useLocation, useHistory } from \"react-router-dom\";\n\nimport { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { db, CheckFirebaseUserStatus } from \"../../firebase.js\";\nimport ArrowBack from \"@material-ui/icons/ArrowBack\";\nimport styles from \"../../css/Article.module.css\";\nimport { app } from \"../../lib/lib.js\";\nimport ReactQuill from \"react-quill\";\nimport CreatableSelect from \"react-select/creatable\";\nimport { useSelector } from \"react-redux\";\nimport \"react-quill/dist/quill.snow.css\";\nexport default function Article() {\n  let [tags, setTags] = useState({});\n  let [article, setArticle] = useState({});\n  let [note, setNote] = useState(\"\");\n  const location = useLocation();\n  let search = location.search;\n  let params = new URLSearchParams(search);\n  let id = params.get(\"id\");\n  let user = useSelector((state) => {\n    return state.memberReducer.user;\n  });\n  const customStyles = {\n    menu: (provided, state) => ({\n      ...provided,\n      background: \"black\",\n      borderBottom: \"1px solid gray\",\n      color: \"white\",\n      padding: 10,\n    }),\n    option: (styles, { data, isDisabled, isFocused, isSelected }) => {\n      return {\n        ...styles,\n        backgroundColor: isDisabled\n          ? null\n          : isSelected\n          ? data.color\n          : isFocused\n          ? \"#dcdcdc\"\n          : null,\n        color: isFocused ? \"#39382e\" : \"#dcdcdc\",\n\n        cursor: isDisabled ? \"not-allowed\" : \"default\",\n\n        \":active\": {\n          ...styles[\":active\"],\n          backgroundColor: !isDisabled && (isSelected ? data.color : \"green\"),\n        },\n      };\n    },\n    control: (styles) => ({\n      ...styles,\n      backgroundColor: \"#121212\",\n      minWidth: \"300px\",\n    }),\n  };\n  useEffect(() => {\n    if (user) {\n      console.log(\"useeffect run\");\n\n      app.initArticleTags(id, user.uid).then((articleTagSelection) => {\n        console.log(articleTagSelection);\n        setTags(articleTagSelection);\n      });\n    }\n  }, [user]);\n  function handleChange(newValue, actionMeta) {\n    switch (actionMeta.action) {\n      case \"select-option\":\n        console.log(\"select option!\");\n        app.inputTag(id, user.uid, actionMeta.option.label);\n        setTags({ ...tags, values: newValue });\n        break;\n      case \"remove-value\":\n        app.deleteTagFromArticle(id, user.uid, actionMeta.removedValue.tagId);\n        setTags({ ...tags, values: newValue });\n        break;\n      default:\n        console.group(\"Value Changed\");\n        console.log(\"newvalueis \", newValue);\n\n        console.dir(`action: ${actionMeta.action}`);\n        console.dir(actionMeta.removedValue);\n        console.groupEnd();\n    }\n  }\n\n  function handleCreate(inputValue) {\n    console.group(\"Option created\");\n\n    console.log(tags);\n    app.inputTag(id, user.uid, inputValue);\n    setTags({\n      options: [...tags.options, { label: inputValue, value: inputValue }],\n      values: [...tags.values, { label: inputValue, value: inputValue }],\n    });\n    console.log(tags);\n    console.groupEnd();\n  }\n  useEffect(() => {\n    let getArticles = function () {\n      db.collection(\"Articles\")\n        .doc(id)\n        .onSnapshot(function (doc) {\n          if (doc.data() !== undefined) {\n            setArticle({\n              title: doc.data().title,\n              readerHtml: doc.data().readerHtml,\n            });\n          }\n        });\n    };\n    getArticles();\n    return () => {\n      getArticles();\n    };\n  }, []);\n\n  return (\n    <div className={styles.articleWrapper}>\n      <img\n        data-src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d072fabce4c74b95a416ced1d5743949~tplv-k3u1fbpfcp-zoom-1.image\"\n        alt=\"\"\n      />\n      <div className={styles.head}>\n        <Link to={\"/board\"}>\n          <ArrowBack style={{ color: \"#FFFCEC\" }} />\n        </Link>\n      </div>\n      <div className={styles.title}>{article.title}</div>\n      <div className={styles.tagWrapper}>\n        <CreatableSelect\n          isMulti\n          width=\"200px\"\n          menuColor=\"red\"\n          styles={customStyles}\n          onChange={handleChange}\n          onCreateOption={handleCreate}\n          options={tags.options}\n          defaultValue={tags.values}\n          value={tags.values}\n        />\n      </div>\n      <div className={styles.articleMain}>\n        <div\n          className={styles.articleBody}\n          dangerouslySetInnerHTML={{ __html: article.readerHtml }}\n        ></div>\n        <div className={styles.note}>\n          <div>Your Summary</div>\n          <ReactQuill\n            theme=\"snow\"\n            value={note}\n            onChange={(e) => {\n              setNote(e);\n            }}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n","export const localUrl = \"http://localhost:3000/route/article/import\";\nexport const ec2Url = \"https://www.shopcard.site/route/article/import\";\n\nexport const local = \"http://localhost:3000/route/\";\n","import React, { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { localUrl, ec2Url } from \"../config.js\";\nimport \"../css/AddArticle.css\";\n\nexport default function AddArticle(props) {\n  const [reqUrl, setReqUrl] = useState(\"\");\n  const user = useSelector((state) => {\n    return state.memberReducer.user;\n  });\n  function postDataToServer(\n    url,\n    data = {\n      url: \"www.sylish.com\",\n      uid: \"12344\",\n    }\n  ) {\n    fetch(url, {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        // 'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: JSON.stringify(data),\n    })\n      .then(function (response) {\n        if (response.status !== 200) {\n          console.log(\n            \"Looks like there was a problem. Status Code: \" + response.status\n          );\n          return;\n        }\n        response.json().then(function (data) {\n          console.log(data);\n        });\n      })\n      .catch(function (err) {\n        console.log(\"Fetch Error :-S\", err);\n      });\n  }\n  return (\n    <div className=\"addArticle\">\n      <input\n        type=\"text\"\n        name=\"input\"\n        className=\"input\"\n        value={reqUrl}\n        onChange={(e) => setReqUrl(e.currentTarget.value)}\n      />\n      <button\n        type=\"submit\"\n        className=\"add\"\n        onClick={(e) => {\n          if (user) {\n            e.preventDefault();\n            postDataToServer(localUrl, {\n              url: reqUrl,\n              uid: user.uid,\n            });\n          }\n        }}\n      >\n        儲存文章\n      </button>\n\n      <br />\n      {/* <a href=\"http://localhost:2000/route/article/before\">Before</a>\n      <br />\n      <a href=\"http://localhost:2000/route/article/after\">after</a>\n      <br />\n      <a href=\"http://localhost:2000/route/article/MD\">Mark Down</a> */}\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport \"../../css/App.css\";\nimport styles from \"../../css/SignUp.module.css\";\nimport { Link } from \"react-router-dom\";\nimport StyledFirebaseAuth from \"react-firebaseui/StyledFirebaseAuth\";\nimport { auth } from \"../../firebase.js\";\nimport firebase from \"firebase/app\";\nimport { useHistory } from \"react-router-dom\";\nimport { db } from \"../../firebase\";\nexport default function Signup() {\n  const uiConfig = {\n    callbacks: {\n      signInSuccess: async function (authResult, redirectUrl) {\n        console.log(authResult.uid);\n        console.log(redirectUrl);\n        await db\n          .collection(\"Member\")\n          .doc(authResult.uid)\n          .set({\n            uid: authResult.uid,\n            email: authResult.email,\n            displaynamename: authResult.displayName,\n          })\n\n          .then(() => console.log(\"Add user to db successfully\"))\n          .then(history.push(\"board\"))\n          .catch((error) => {\n            var errorCode = error.code;\n            var errorMessage = error.message;\n            console.log(errorMessage);\n          });\n      },\n    },\n    // Popup signin flow rather than redirect flow.\n    signInFlow: \"popup\",\n    // Redirect to /signedIn after sign in is successful. Alternatively you can provide a callbacks.signInSuccess function.\n\n    // We will display Google and Facebook as auth providers.\n    signInOptions: [firebase.auth.GoogleAuthProvider.PROVIDER_ID],\n  };\n  const history = useHistory();\n  let [name, setName] = useState(\"\");\n  let [email, setEmail] = useState(\"\");\n  let [password, setPassword] = useState(\"\");\n  function firebaseSignUp(name, email, password) {\n    auth\n      .createUserWithEmailAndPassword(email, password)\n      .then((user) => {\n        console.log(user.user);\n        db.collection(\"Member\").doc(user.user.uid).set({\n          displaynamename: name,\n          email: email,\n          password: password,\n          uid: user.user.uid,\n        });\n      })\n      .then(() => {\n        var user = auth.currentUser;\n        user\n          .updateProfile({\n            displayName: name,\n          })\n          .then(() => console.log(\"update user name successfully\"));\n      })\n      .then(history.push(\"/board\"))\n      .catch((error) => {\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        console.log(errorMessage);\n      });\n  }\n  return (\n    <div className={styles.wrapper}>\n      <div className={styles.block}>\n        <h2 className={styles.title}>Sign Up</h2>\n        <form\n          className={styles.form}\n          onSubmit={(e) => {\n            e.preventDefault();\n            firebaseSignUp(name, email, password);\n          }}\n        >\n          <div className={styles.inputbox}>\n            <label htmlFor=\"username\">User Name</label>\n            <input\n              type=\"text\"\n              name=\"username\"\n              value={name}\n              onChange={(e) => {\n                setName(e.currentTarget.value);\n              }}\n            />\n          </div>\n          <div className={styles.inputbox}>\n            <label htmlFor=\"email\">Email</label>\n            <input\n              type=\"email\"\n              name=\"email\"\n              value={email}\n              onChange={(e) => {\n                setEmail(e.currentTarget.value);\n              }}\n            />\n          </div>\n          <div className={styles.inputbox}>\n            <label htmlFor=\"email\">Password</label>\n            <input\n              type=\"password\"\n              name=\"passowrd\"\n              value={password}\n              onChange={(e) => {\n                setPassword(e.currentTarget.value);\n              }}\n            />\n          </div>\n          <button>Sign Up</button>\n        </form>\n        <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={auth} />\n        <div className={styles.login}>\n          <span>Already have an account? </span>\n          <Link to={\"/Signin\"}>Sign in</Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"../../css/App.css\";\nimport styles from \"../../css/SignUp.module.css\";\nimport { Link } from \"react-router-dom\";\nimport StyledFirebaseAuth from \"react-firebaseui/StyledFirebaseAuth\";\nimport { uiConfig, auth } from \"../../firebase.js\";\nexport default function Signup() {\n  let [email, setEmail] = useState(\"\");\n  let [password, setPassword] = useState(\"\");\n  let history = useHistory();\n  function firebaseSignIn(email, password) {\n    auth\n      .signInWithEmailAndPassword(email, password)\n      .then((user) => {\n        console.log(\"you click sign in and successfully\");\n        history.push(\"/board\");\n        // Signed in\n      })\n      .catch((error) => {\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        console.log(errorCode);\n        console.log(errorMessage);\n      });\n  }\n  return (\n    <div className={styles.wrapper}>\n      <div className=\"block\" className={styles.block}>\n        <h2 className={styles.title}>Sign In</h2>\n        <form\n          className={styles.form}\n          onSubmit={(e) => {\n            e.preventDefault();\n            firebaseSignIn(email, password);\n          }}\n        >\n          {/* <div className={styles.inputbox}>\n            <label htmlFor=\"username\">User Name</label>\n            <input type=\"text\" name=\"username\" />\n          </div> */}\n          <div className={styles.inputbox}>\n            <label htmlFor=\"email\">Email</label>\n            <input\n              type=\"text\"\n              name=\"email\"\n              value={email}\n              onChange={(e) => {\n                setEmail(e.currentTarget.value);\n              }}\n            />\n          </div>\n          <div className={styles.inputbox}>\n            <label htmlFor=\"email\">Password</label>\n            <input\n              type=\"password\"\n              name=\"passowrd\"\n              value={password}\n              onChange={(e) => {\n                setPassword(e.currentTarget.value);\n              }}\n            />\n          </div>\n          <button>Sign In</button>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"../css/Card.module.css\";\nimport ShareIcon from \"@material-ui/icons/Share\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport { deleteArticle } from \"../firebase.js\";\nexport default function Card(props) {\n  var elem = document.createElement(\"div\");\n\n  elem.innerHTML = props.htmlContent;\n\n  let src = elem.querySelector(\"img\") ? elem.querySelector(\"img\").src : null;\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.card}>\n        <Link to={`/article?id=${props.id}`} className={styles.color}>\n          <div>\n            <img src={src} alt=\"\" className={styles.img} />\n          </div>\n        </Link>\n        <div className={styles.wordWrapper}>\n          <div className={styles.title}>\n            <Link to={`/article?id=${props.id}`}>{props.title}</Link>\n            <div className={styles.actionContainer}>\n              <ShareIcon style={{ fontSize: 20, color: \"#5B5B5B\" }} />\n              <DeleteIcon\n                style={{ fontSize: 20, color: \"#5B5B5B\" }}\n                className={styles.delete}\n                onClick={() => {\n                  deleteArticle(props.id);\n                }}\n              />\n            </div>\n          </div>\n          <Link to={`/article?id=${props.id}`}>\n            <div className={styles.content}>{props.content}</div>\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import Card from \"./Card\";\nimport \"../css/CardWrapper.css\";\nimport { useSelector } from \"react-redux\";\nexport default function CardWrapper() {\n  console.log(\"render once\");\n  const list = useSelector((state) => {\n    let list = [];\n    let articleList = state.articleReducer.articleList;\n    if (state.articleReducer.tagSelected === \"all\") {\n      for (let i in articleList) {\n        list.push(\n          <Card\n            title={articleList[i].title}\n            content={articleList[i].content}\n            id={articleList[i].id}\n            key={articleList[i].id}\n            htmlContent={articleList[i].readerHtml}\n          />\n        );\n      }\n    } else if (state.articleReducer.tagSelected) {\n      for (let i in articleList) {\n        console.log(articleList);\n        if (\n          articleList[i].tags &&\n          articleList[i].tags.includes(state.articleReducer.tagSelected)\n        ) {\n          list.push(\n            <Card\n              title={articleList[i].title}\n              content={articleList[i].content}\n              id={articleList[i].id}\n              key={articleList[i].id}\n              htmlContent={articleList[i].readerHtml}\n            />\n          );\n        }\n      }\n    }\n    return list;\n  });\n\n  return <div className=\"cardWrapper\">{list}</div>;\n}\n","const SETMEMBER = (uid, displayName, email) => {\n  return {\n    type: \"SETMEMBER\",\n    uid: uid,\n    displayName: displayName,\n    email: email,\n  };\n};\n\nconst INITARTICLE = (articleList) => {\n  return {\n    type: \"INITARTICLE\",\n    articleList: articleList,\n  };\n};\n\nconst SWITCHARTICLE = (tag) => {\n  return {\n    type: \"SWITCHARTICLE\",\n    tagSelected: tag,\n  };\n};\n\nconst GETRSSRESPONSE = (feed, url) => {\n  return {\n    type: \"GETRSSRESPONSE\",\n    url: url,\n    feed: feed,\n  };\n};\n\n// const INITRSS = (articleList) => {\n//   return {\n//     type: \"INITRSS\",\n//     articleList: articleList,\n//   };\n// };\nconst SWITCHRSS = (ChannelRSSId) => {\n  console.log(\"hihi\");\n  return {\n    type: \"SWITCHRSS\",\n    ChannelRSSId: ChannelRSSId,\n  };\n};\n\nconst INITUSERRSSLIST = (RSSList) => {\n  return {\n    type: \"INITUSERRSSLIST\",\n    RSSList: RSSList,\n  };\n};\nconst GROUPINIT = (groups) => {\n  return {\n    type: \"GROUPINIT\",\n    groups: groups,\n  };\n};\nexport {\n  INITARTICLE,\n  SWITCHRSS,\n  SWITCHARTICLE,\n  SETMEMBER,\n  GETRSSRESPONSE,\n  INITUSERRSSLIST,\n  GROUPINIT,\n};\n","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { db } from \"../firebase.js\";\nimport CardWrapper from \"./CardWrapper.jsx\";\nimport dispatch from \"react-redux\";\nimport styles from \"./Board.module.css\";\nimport { INITARTICLE } from \"../redux/actions\";\nimport AddArticle from \"./AddArticle\";\nexport default function Board(props) {\n  const dispatch = useDispatch();\n\n  const user = useSelector((state) => {\n    return state.memberReducer.user;\n  });\n  useEffect(() => {\n    function checkArticleUpdate(uid) {\n      db.collection(\"Articles\")\n        .orderBy(\"date\", \"desc\")\n        .where(\"uid\", \"==\", uid)\n        .onSnapshot(function (querySnapshot) {\n          let list = [];\n          querySnapshot.forEach(function (doc) {\n            list.push({\n              title: doc.data().title,\n              content: doc.data().markDown.slice(0, 100),\n              id: doc.data().id,\n              tags: doc.data().tags,\n              readerHtml: doc.data().readerHtml,\n            });\n          });\n          dispatch(INITARTICLE(list));\n        });\n    }\n    if (user) {\n      checkArticleUpdate(user.uid);\n    }\n  }, [user]);\n  return (\n    <div className={styles.boardWrapper}>\n      <AddArticle className=\"headMemberIcon\" user={user} />\n      <CardWrapper />\n    </div>\n  );\n}\n","import { Divider } from \"material-ui\";\nimport React from \"react\";\nimport { useEffect } from \"react\";\nimport { auth } from \"../firebase.js\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { SETMEMBER } from \"../redux/actions\";\nimport { BrowserRouter as Router, useHistory } from \"react-router-dom\";\nexport default function MyRouter() {\n  let dispatch = useDispatch();\n\n  const history = useHistory();\n  useEffect(() => {\n    auth.onAuthStateChanged((user) => {\n      if (user) {\n        console.log(user);\n        // setUser(user);\n        dispatch(SETMEMBER(user.uid, user.displayName, user.email));\n      } else {\n        history.push(\"/signup\");\n      }\n    });\n  }, [dispatch, history]);\n\n  return <div></div>;\n}\n","import { useEffect, useState } from \"react\";\n\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport BookmarkIcon from \"@material-ui/icons/Bookmark\";\nimport { app } from \"../../lib/lib.js\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useDispatch } from \"react-redux\";\nimport styles from \"./FolderTab.module.css\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport { SWITCHARTICLE } from \"../../redux/actions\";\nimport { blue } from \"@material-ui/core/colors\";\nimport { Draggable } from \"react-beautiful-dnd\";\n\nconst useStyles = makeStyles({\n  root: {\n    background: \"#4F4F4F\",\n  },\n});\nexport default function Folder(props) {\n  console.log(\"rerender la \");\n  const classes = useStyles();\n  const [tags, setTags] = useState([]);\n  const dispatch = useDispatch();\n  let folderTags = props.folderTags;\n  // let user = props.user;\n  // useEffect(() => {\n  //   function getMemberFolderTags() {\n  //     if (user) {\n  //       app.getMemberFolderTags(props.folderId).then((folderTags) => {\n  //         setTags(folderTags);\n  //       });\n  //     }\n  //   }\n  //   getMemberFolderTags();\n  // }, [user]);\n  console.log(\"======================================\");\n  console.log(folderTags);\n  function showTabTreeList(tags) {\n    let tabList = [];\n    if (tags) {\n      let count = 0;\n      for (let i in tags) {\n        tabList.push(\n          <Draggable draggableId={tags[i].id} index={count} key={tags[i].id}>\n            {(provided) => (\n              <TreeItem\n                key={tags[i].id}\n                {...provided.draggableProps}\n                {...provided.dragHandleProps}\n                ref={provided.innerRef}\n                nodeId={tags[i].id}\n                label={\n                  <div className={styles.labelWrapper}>\n                    <BookmarkIcon style={{ fontSize: 20, color: \"#5B5B5B\" }} />\n                    {tags[i].label ? (\n                      <div className={styles.labelTitle}>{tags[i].label}</div>\n                    ) : (\n                      <Skeleton\n                        className={classes.root}\n                        variant=\"rect\"\n                        width={100}\n                        height={12}\n                        animation=\"pulse\"\n                      />\n                    )}\n                  </div>\n                }\n                onClick={() => {\n                  console.log(tags[i].id);\n                  dispatch(SWITCHARTICLE(tags[i].id));\n                }}\n              />\n            )}\n          </Draggable>\n        );\n        count++;\n      }\n    }\n    return tabList;\n  }\n  const tabList = showTabTreeList(folderTags);\n  return <div>{tabList}</div>;\n}\n","import { useEffect, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styles from \"./FolderTab.module.css\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { TreeView } from \"@material-ui/lab\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport { useSelector } from \"react-redux\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport { Link } from \"react-router-dom\";\nimport MarkunreadIcon from \"@material-ui/icons/Markunread\";\nimport BookmarkIcon from \"@material-ui/icons/Bookmark\";\nimport FolderOpenIcon from \"@material-ui/icons/FolderOpen\";\nimport { app } from \"../../lib/lib.js\";\nimport { useDispatch } from \"react-redux\";\nimport { SWITCHARTICLE } from \"../../redux/actions\";\nimport { db } from \"../../firebase.js\";\nimport firebase from \"firebase/app\";\nimport { DragDropContext, Droppable } from \"react-beautiful-dnd\";\nimport Folder from \"./Folder\";\n\nconst useStyles = makeStyles({\n  root: {\n    color: \"#B5B5B5\",\n\n    flexGrow: 1,\n    maxWidth: 400,\n    marginBottom: \"10px\",\n  },\n});\n\nexport default function FolderTab() {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [editFolder, setEditFolder] = useState(false);\n  const [addFolderInput, setAddFolderInput] = useState(\"\");\n  const [articleFolders, setArticleFolders] = useState([]);\n  console.log(articleFolders);\n\n  const user = useSelector((state) => {\n    return state.memberReducer.user;\n  });\n  function onDragEnd(result) {\n    const { destination, source, draggableId } = result;\n    console.log(result);\n\n    if (!destination) {\n      return;\n    }\n\n    if (\n      destination.droppableId === source.droppableId &&\n      destination.index === source.index\n    ) {\n      console.log(\"nothing should happended\");\n      return;\n    }\n    if (destination.droppableId === source.droppableId) {\n      console.log(\"move inside same folder\");\n      let newArticleFolders = [...articleFolders];\n      newArticleFolders.forEach((folder) => {\n        if (folder.id === destination.droppableId) {\n          console.log(\"hihi\");\n          let newTags = [...folder.tags];\n          let moveItem = { ...newTags[source.index] };\n          console.log(moveItem);\n          newTags.splice(source.index, 1);\n          newTags.splice(destination.index, 0, moveItem);\n          console.log(newTags);\n          folder.tags = newTags;\n          let firestoreTagArr = [];\n          newTags.forEach((tag) => {\n            firestoreTagArr.push(tag.id);\n          });\n          console.log(firestoreTagArr);\n          db.collection(\"articleFolders\").doc(destination.droppableId).update({\n            tags: firestoreTagArr,\n          });\n        }\n      });\n      setArticleFolders(newArticleFolders);\n      console.log(destination.index, source.index);\n      console.log(source.droppableId);\n      console.log(destination.droppableId);\n    }\n    if (destination.droppableId !== source.droppableId) {\n      console.log(\"move to another folder\");\n      let newArticleFolders = [...articleFolders];\n      let moveItem;\n      newArticleFolders.forEach((folder) => {\n        if (folder.id === source.droppableId) {\n          let newTags = [...folder.tags];\n          moveItem = { ...newTags[source.index] };\n          newTags.splice(source.index, 1);\n          folder.tags = newTags;\n          let firestoreTagArr = [];\n          newTags.forEach((tag) => {\n            firestoreTagArr.push(tag.id);\n          });\n          console.log(firestoreTagArr);\n          db.collection(\"articleFolders\").doc(source.droppableId).update({\n            tags: firestoreTagArr,\n          });\n        }\n      });\n      newArticleFolders.forEach((folder) => {\n        if (folder.id === destination.droppableId) {\n          let newTags = [...folder.tags];\n\n          newTags.splice(destination.index, 0, moveItem);\n          folder.tags = newTags;\n          let firestoreTagArr = [];\n          newTags.forEach((tag) => {\n            firestoreTagArr.push(tag.id);\n          });\n          console.log(firestoreTagArr);\n          db.collection(\"articleFolders\").doc(destination.droppableId).update({\n            tags: firestoreTagArr,\n          });\n        }\n      });\n      setArticleFolders(newArticleFolders);\n    }\n  }\n\n  useEffect(() => {\n    function getArticleFolders() {\n      if (user) {\n        app\n          .getMemberArticleFolders(user.uid)\n          .then((articleFolders) => {\n            console.log(articleFolders);\n            setArticleFolders(articleFolders);\n            return articleFolders;\n          })\n          .then(async (articleFolders) => {\n            let tempFolderList = [];\n            for (let i = 0; i < articleFolders.length; i++) {\n              let tags = await app.getMemberFolderTags(articleFolders[i].id);\n              console.log(tags);\n              tempFolderList.push({ ...articleFolders[i], tags: tags });\n            }\n            console.log(tempFolderList);\n            return tempFolderList;\n          })\n          .then((newFolder) => {\n            console.log(newFolder);\n            setArticleFolders(newFolder);\n          });\n      }\n    }\n    getArticleFolders();\n  }, [user]);\n\n  function showArticleFolders(folders) {\n    console.log(folders);\n    let articleFolderList = [];\n    if (folders.length > 0) {\n      for (let i in folders) {\n        console.log(folders[i].tags);\n        articleFolderList.push(\n          <Droppable droppableId={folders[i].id}>\n            {(provided) => (\n              <TreeItem\n                ref={provided.innerRef}\n                {...provided.droppableProps}\n                key={folders[i].id}\n                nodeId={folders[i].id}\n                label={\n                  <div className={styles.labelWrapper}>\n                    <FolderOpenIcon\n                      style={{ fontSize: 20, color: \"#5B5B5B\" }}\n                    />\n                    <div className={styles.labelTitle}>{folders[i].name}</div>\n                  </div>\n                }\n                onClick={() => {\n                  console.log(folders[i].id);\n                  // dispatch(SWITCHARTICLE(folders[i].id));\n                }}\n              >\n                <Folder\n                  user={user}\n                  folderTags={folders[i].tags}\n                  key={folders[i].id}\n                />\n                {provided.placeholder}\n              </TreeItem>\n            )}\n          </Droppable>\n        );\n      }\n    }\n    return articleFolderList;\n  }\n  function addArticleFolder(name, uid) {\n    db.collection(\"articleFolders\")\n      .add({\n        name: name,\n        uid: uid,\n      })\n      .then((docRef) => {\n        docRef.update({ id: docRef.id });\n        return docRef.id;\n      })\n      .then((id) => {\n        db.collection(\"Member\")\n          .doc(uid)\n          .update({\n            articleFolders: firebase.firestore.FieldValue.arrayUnion(id),\n          });\n      });\n  }\n  const articleFolderList = showArticleFolders(articleFolders);\n  // const allTabList = showTabTreeList(tabs);\n\n  return (\n    <div className={styles.folderTabWrapper}>\n      <div className={styles.folderTab}>\n        <Link to={\"/board\"}>\n          <div className={styles.sectionTitle}>My Board</div>\n          <TreeView\n            className={classes.root}\n            defaultExpanded={[\"\"]}\n            defaultCollapseIcon={<ExpandMoreIcon />}\n            defaultExpandIcon={<ChevronRightIcon />}\n          >\n            <TreeItem\n              nodeId=\"tagAll\"\n              label={\n                <div className={styles.labelWrapper}>\n                  <div className={styles.labelTitle}>All</div>\n                </div>\n              }\n              onClick={() => {\n                console.log(\"all\");\n                dispatch(SWITCHARTICLE(\"all\"));\n              }}\n            ></TreeItem>\n            <TreeItem\n              nodeId=\"unTag\"\n              label={\n                <div className={styles.labelWrapper}>\n                  <MarkunreadIcon style={{ fontSize: 20, color: \"#5B5B5B\" }} />\n                  <div className={styles.labelTitle}>Untaged</div>\n                </div>\n              }\n            />\n            <DragDropContext onDragEnd={onDragEnd}>\n              {articleFolderList}\n            </DragDropContext>\n          </TreeView>\n          {editFolder\n            ? createPortal(\n                <div className={styles.popup}>\n                  <div\n                    className={styles.blur}\n                    onClick={() => {\n                      setEditFolder(false);\n                    }}\n                  ></div>\n                  <div className={styles.addFolder}>\n                    <div className={styles.addTitle}>Add New Folder</div>\n                    <form id=\"addForm\" action=\"\">\n                      <input\n                        className={styles.input}\n                        type=\"text\"\n                        placeholder=\"Folder Name\"\n                        value={addFolderInput}\n                        onChange={(e) => {\n                          setAddFolderInput(e.target.value);\n                        }}\n                      />\n                      <button\n                        type=\"submit\"\n                        className={styles.saveBtn}\n                        form=\"addForm\"\n                        onClick={() => {\n                          if (user) {\n                            addArticleFolder(addFolderInput, user.uid);\n                            setEditFolder(false);\n                          } else {\n                            alert(\"Please login to add folder!\");\n                          }\n                        }}\n                      >\n                        Save\n                      </button>\n                      <button\n                        onClick={() => {\n                          setEditFolder(false);\n                        }}\n                        className={styles.cancelBtn}\n                      >\n                        Cancel\n                      </button>\n                    </form>\n                  </div>\n                </div>,\n                document.body\n              )\n            : \"\"}\n          <div\n            className={styles.subTitle}\n            onClick={() => {\n              setEditFolder(true);\n            }}\n          >\n            Add Folder\n          </div>\n        </Link>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styles from \"../SideTab/FolderTab.module.css\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { TreeView } from \"@material-ui/lab\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport { useSelector } from \"react-redux\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport PeopleAltIcon from \"@material-ui/icons/PeopleAlt\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport { Link } from \"react-router-dom\";\nimport MarkunreadIcon from \"@material-ui/icons/Markunread\";\nimport BookmarkIcon from \"@material-ui/icons/Bookmark\";\nimport FolderOpenIcon from \"@material-ui/icons/FolderOpen\";\nimport { app } from \"../../lib/lib.js\";\nimport { useDispatch } from \"react-redux\";\nimport { SWITCHARTICLE } from \"../../redux/actions\";\nimport { db } from \"../../firebase.js\";\nimport firebase from \"firebase/app\";\nimport { DragDropContext, Droppable } from \"react-beautiful-dnd\";\nimport Folder from \"../SideTab/Folder\";\n\nexport default function GroupFolderSub(props) {\n  const dispatch = useDispatch();\n  const user = useSelector((state) => {\n    return state.memberReducer.user;\n  });\n\n  function showArticleFolders(folders) {\n    console.log(folders);\n    let articleFolderList = [];\n    if (folders.length > 0) {\n      for (let i in folders) {\n        console.log(folders[i].tags);\n        articleFolderList.push(\n          <Droppable droppableId={folders[i].id}>\n            {(provided) => (\n              <TreeItem\n                ref={provided.innerRef}\n                {...provided.droppableProps}\n                key={folders[i].id}\n                nodeId={folders[i].id}\n                label={\n                  <div className={styles.labelWrapper}>\n                    <FolderOpenIcon\n                      style={{ fontSize: 20, color: \"#5B5B5B\" }}\n                    />\n                    <div className={styles.labelTitle}>{folders[i].name}</div>\n                  </div>\n                }\n                onClick={() => {\n                  console.log(folders[i].id);\n                  // dispatch(SWITCHARTICLE(folders[i].id));\n                }}\n              >\n                <Folder\n                  user={user}\n                  folderTags={folders[i].tags}\n                  key={folders[i].id}\n                />\n                {provided.placeholder}\n              </TreeItem>\n            )}\n          </Droppable>\n        );\n      }\n    }\n    return articleFolderList;\n  }\n  let folderList = showArticleFolders(props.folders);\n  return folderList;\n}\n","import { useEffect, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styles from \"../SideTab/FolderTab.module.css\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { TreeView } from \"@material-ui/lab\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport { useSelector } from \"react-redux\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport PeopleAltIcon from \"@material-ui/icons/PeopleAlt\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport { Link } from \"react-router-dom\";\nimport MarkunreadIcon from \"@material-ui/icons/Markunread\";\nimport BookmarkIcon from \"@material-ui/icons/Bookmark\";\nimport FolderOpenIcon from \"@material-ui/icons/FolderOpen\";\nimport { app } from \"../../lib/lib.js\";\nimport { useDispatch } from \"react-redux\";\nimport { SWITCHARTICLE, GROUPINIT } from \"../../redux/actions\";\nimport { db } from \"../../firebase.js\";\nimport firebase from \"firebase/app\";\nimport { DragDropContext, Droppable } from \"react-beautiful-dnd\";\nimport Folder from \"../SideTab/Folder\";\nimport GroupFolerSub from \"./GroupFolderSub\";\nconst useStyles = makeStyles({\n  root: {\n    color: \"#B5B5B5\",\n\n    flexGrow: 1,\n    maxWidth: 400,\n    marginBottom: \"10px\",\n  },\n});\n\nexport default function GroupFolderTab() {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [editFolder, setEditFolder] = useState(false);\n  const [addGroup, setAddGroup] = useState(false);\n  const [addGroupInput, setAddGroupInput] = useState(\"\");\n  const [addFolderInput, setAddFolderInput] = useState(\"\");\n  const [articleFolders, setArticleFolders] = useState([]);\n  console.log(articleFolders);\n\n  const groups = useSelector((state) => {\n    console.log(state.memberReducer.groups);\n    return state.memberReducer.groups;\n  });\n  const user = useSelector((state) => {\n    return state.memberReducer.user;\n  });\n  function onDragEnd(result) {\n    const { destination, source, draggableId } = result;\n    console.log(result);\n\n    if (!destination) {\n      return;\n    }\n\n    if (\n      destination.droppableId === source.droppableId &&\n      destination.index === source.index\n    ) {\n      console.log(\"nothing should happended\");\n      return;\n    }\n    if (destination.droppableId === source.droppableId) {\n      console.log(\"move inside same folder\");\n      let newArticleFolders = [...articleFolders];\n      newArticleFolders.forEach((folder) => {\n        if (folder.id === destination.droppableId) {\n          console.log(\"hihi\");\n          let newTags = [...folder.tags];\n          let moveItem = { ...newTags[source.index] };\n          console.log(moveItem);\n          newTags.splice(source.index, 1);\n          newTags.splice(destination.index, 0, moveItem);\n          console.log(newTags);\n          folder.tags = newTags;\n          let firestoreTagArr = [];\n          newTags.forEach((tag) => {\n            firestoreTagArr.push(tag.id);\n          });\n          console.log(firestoreTagArr);\n          db.collection(\"articleFolders\").doc(destination.droppableId).update({\n            tags: firestoreTagArr,\n          });\n        }\n      });\n      setArticleFolders(newArticleFolders);\n      console.log(destination.index, source.index);\n      console.log(source.droppableId);\n      console.log(destination.droppableId);\n    }\n    if (destination.droppableId !== source.droppableId) {\n      console.log(\"move to another folder\");\n      let newArticleFolders = [...articleFolders];\n      let moveItem;\n      newArticleFolders.forEach((folder) => {\n        if (folder.id === source.droppableId) {\n          let newTags = [...folder.tags];\n          moveItem = { ...newTags[source.index] };\n          newTags.splice(source.index, 1);\n          folder.tags = newTags;\n          let firestoreTagArr = [];\n          newTags.forEach((tag) => {\n            firestoreTagArr.push(tag.id);\n          });\n          console.log(firestoreTagArr);\n          db.collection(\"articleFolders\").doc(source.droppableId).update({\n            tags: firestoreTagArr,\n          });\n        }\n      });\n      newArticleFolders.forEach((folder) => {\n        if (folder.id === destination.droppableId) {\n          let newTags = [...folder.tags];\n\n          newTags.splice(destination.index, 0, moveItem);\n          folder.tags = newTags;\n          let firestoreTagArr = [];\n          newTags.forEach((tag) => {\n            firestoreTagArr.push(tag.id);\n          });\n          console.log(firestoreTagArr);\n          db.collection(\"articleFolders\").doc(destination.droppableId).update({\n            tags: firestoreTagArr,\n          });\n        }\n      });\n      setArticleFolders(newArticleFolders);\n    }\n  }\n\n  useEffect(() => {\n    function getMemberGroups(user) {\n      return db\n        .collection(\"Member\")\n        .doc(user.uid)\n        .get()\n        .then((doc) => {\n          console.log(doc.data());\n          return doc.data().board;\n        });\n    }\n    function getGroupDbInfo(boardId) {\n      console.log(boardId);\n      return db\n        .collection(\"GroupBoard\")\n        .doc(boardId)\n        .get()\n        .then((doc) => {\n          return {\n            id: doc.data().id,\n            name: doc.data().name,\n            articleFolders: doc.data().articleFolders,\n          };\n        });\n    }\n    async function memberGroupInit(user) {\n      let groupIds = await getMemberGroups(user);\n      let groups = {};\n      console.log(groupIds);\n      for (let i in groupIds) {\n        let info = await getGroupDbInfo(groupIds[i]);\n        groups[groupIds[i]] = info;\n      }\n      console.log(groups);\n      //=========!!!!!!!!!!!!!!!!!!!===========\n      // dispatch(GROUPINIT(groups));\n\n      for (let i in groupIds) {\n        let info = await getGroupDbInfo(groupIds[i]);\n        //info ={  id: \"group1\",\n        //name: front end,\n        //articleFolders: [id1, id2, id3],}\n        let folders = await app.getGroupArticleFolders(groupIds[i]);\n        //folders=[{id, name, tags}, {id, name, tags}]\n        console.log(folders);\n        let folderWithTagInfo = folders.map(async (folder) => {\n          let tags = await app.getMemberFolderTags(folder.id);\n          folder.tags = tags;\n          return folder;\n        });\n\n        let group = await Promise.all(folderWithTagInfo).then((folder) => {\n          info.articleFolders = folder;\n          return info;\n        });\n        console.log(group);\n        let groupId = groupIds[i];\n        groups[groupId] = group;\n        console.log(groups);\n      }\n      console.log(groups);\n      dispatch(GROUPINIT(groups));\n    }\n    // function getGroupFolders() {\n    //   if (user) {\n    //     app\n    //       .getMemberArticleFolders(user.uid)\n    //       .then((articleFolders) => {\n    //         console.log(articleFolders);\n    //         setArticleFolders(articleFolders);\n    //         return articleFolders;\n    //       })\n    //       .then(async (articleFolders) => {\n    //         let tempFolderList = [];\n    //         for (let i = 0; i < articleFolders.length; i++) {\n    //           let tags = await app.getMemberFolderTags(articleFolders[i].id);\n    //           console.log(tags);\n    //           tempFolderList.push({ ...articleFolders[i], tags: tags });\n    //         }\n    //         console.log(tempFolderList);\n    //         return tempFolderList;\n    //       })\n    //       .then((newFolder) => {\n    //         console.log(newFolder);\n    //         setArticleFolders(newFolder);\n    //       });\n    //   }\n    // }\n    if (user) {\n      memberGroupInit(user).then((groups) => {});\n    }\n  }, [user]);\n\n  function addArticleFolder(name, uid) {\n    db.collection(\"articleFolders\")\n      .add({\n        name: name,\n        uid: uid,\n      })\n      .then((docRef) => {\n        docRef.update({ id: docRef.id });\n        return docRef.id;\n      })\n      .then((id) => {\n        db.collection(\"Member\")\n          .doc(uid)\n          .update({\n            articleFolders: firebase.firestore.FieldValue.arrayUnion(id),\n          });\n      });\n  }\n  function addGroupBoard(name, uid) {\n    db.collection(\"GroupBoard\")\n      .add({\n        name: name,\n        member: [uid],\n      })\n      .then((docRef) => {\n        docRef.update({ id: docRef.id, articleFolders: [\"un\" + docRef.id] });\n        return docRef.id;\n      })\n      .then((id) => {\n        db.collection(\"Member\")\n          .doc(uid)\n          .update({\n            board: firebase.firestore.FieldValue.arrayUnion(id),\n          });\n        return id;\n      })\n      .then((id) => {\n        db.collection(\"articleFolders\")\n          .doc(\"un\" + id)\n          .set({\n            id: \"un\" + id,\n            name: \"Uncategorized\",\n          });\n      });\n  }\n  function renderGroupTabs(groups) {\n    let groupTabs = [];\n    console.log(groups);\n    for (const key in groups) {\n      console.log(groups[key]);\n      groupTabs.push(\n        <TreeView\n          className={classes.root}\n          defaultExpanded={[\"\"]}\n          defaultCollapseIcon={<ExpandMoreIcon />}\n          defaultExpandIcon={<ChevronRightIcon />}\n        >\n          <TreeItem\n            nodeId={groups[key].name}\n            label={\n              <div className={styles.labelWrapper}>\n                <PeopleAltIcon />\n                <div className={styles.labelTitle}>{groups[key].name}</div>\n              </div>\n            }\n            onClick={() => {\n              console.log(\"all\");\n              dispatch(SWITCHARTICLE(\"all\"));\n            }}\n          >\n            <TreeItem\n              nodeId={\"tagAll_\" + groups[key].name}\n              label={\n                <div className={styles.labelWrapper}>\n                  <div className={styles.labelTitle}>All</div>\n                </div>\n              }\n              onClick={() => {\n                console.log(\"all\");\n                dispatch(SWITCHARTICLE(\"all\"));\n              }}\n            ></TreeItem>\n            <TreeItem\n              nodeId=\"unTag2\"\n              label={\n                <div className={styles.labelWrapper}>\n                  <MarkunreadIcon style={{ fontSize: 20, color: \"#5B5B5B\" }} />\n                  <div className={styles.labelTitle}>Untaged</div>\n                </div>\n              }\n            />\n            <DragDropContext onDragEnd={onDragEnd}>\n              <GroupFolerSub folders={groups[key].articleFolders} />\n            </DragDropContext>\n            <div\n              className={styles.subTitle}\n              onClick={() => {\n                setEditFolder(true);\n              }}\n            >\n              Add Folder\n            </div>\n          </TreeItem>\n        </TreeView>\n      );\n    }\n    return groupTabs;\n  }\n  const groupTabs = renderGroupTabs(groups);\n  // const articleFolderList = showArticleFolders(articleFolders);\n  // const allTabList = showTabTreeList(tabs);\n\n  return (\n    <div className={styles.folderTabWrapper}>\n      <div className={styles.folderTab}>\n        <div className={styles.sectionTitle}>Group Boards</div>\n        <div\n          className={styles.subTitle}\n          onClick={() => {\n            setAddGroup(true);\n          }}\n        >\n          Create New Group\n        </div>\n        {groupTabs}\n\n        {editFolder\n          ? createPortal(\n              <div className={styles.popup}>\n                <div\n                  className={styles.blur}\n                  onClick={() => {\n                    setEditFolder(false);\n                  }}\n                ></div>\n                <div className={styles.addFolder}>\n                  <div className={styles.addTitle}>Add New Folder</div>\n                  <form id=\"addForm\" action=\"\">\n                    <input\n                      className={styles.input}\n                      type=\"text\"\n                      placeholder=\"Folder Name\"\n                      value={addFolderInput}\n                      onChange={(e) => {\n                        setAddFolderInput(e.target.value);\n                      }}\n                    />\n                    <button\n                      type=\"submit\"\n                      className={styles.saveBtn}\n                      form=\"addForm\"\n                      onClick={() => {\n                        if (user) {\n                          addArticleFolder(addFolderInput, user.uid);\n                          setEditFolder(false);\n                        } else {\n                          alert(\"Please login to add folder!\");\n                        }\n                      }}\n                    >\n                      Save\n                    </button>\n                    <button\n                      onClick={() => {\n                        setEditFolder(false);\n                      }}\n                      className={styles.cancelBtn}\n                    >\n                      Cancel\n                    </button>\n                  </form>\n                </div>\n              </div>,\n              document.body\n            )\n          : \"\"}\n        {addGroup\n          ? createPortal(\n              <div className={styles.popup}>\n                <div\n                  className={styles.blur}\n                  onClick={() => {\n                    setAddGroup(false);\n                  }}\n                ></div>\n                <div className={styles.addFolder}>\n                  <div className={styles.addTitle}>Create New Group Board</div>\n                  <form id=\"addForm\" action=\"\">\n                    <input\n                      className={styles.input}\n                      type=\"text\"\n                      placeholder=\"Folder Name\"\n                      value={addGroupInput}\n                      onChange={(e) => {\n                        setAddGroupInput(e.target.value);\n                      }}\n                    />\n                    <button\n                      type=\"submit\"\n                      className={styles.saveBtn}\n                      form=\"addForm\"\n                      onClick={() => {\n                        if (user) {\n                          addGroupBoard(addGroupInput, user.uid);\n                          setAddGroup(false);\n                        } else {\n                          alert(\"Please login to add group!\");\n                        }\n                      }}\n                    >\n                      Save\n                    </button>\n                    <button\n                      onClick={() => {\n                        setAddGroup(false);\n                      }}\n                      className={styles.cancelBtn}\n                    >\n                      Cancel\n                    </button>\n                  </form>\n                </div>\n              </div>,\n              document.body\n            )\n          : \"\"}\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { db } from \"../../firebase.js\";\nimport CardWrapper from \"../CardWrapper.jsx\";\nimport dispatch from \"react-redux\";\nimport styles from \"./GroupBoard.module.css\";\nimport { INITARTICLE } from \"../../redux/actions\";\nimport GroupAddIcon from \"@material-ui/icons/GroupAdd\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport AddArticle from \"../AddArticle\";\nimport firebase from \"firebase/app\";\n\nexport default function Board(props) {\n  const dispatch = useDispatch();\n  const [addMember, setAddMember] = useState(false);\n  const user = useSelector((state) => {\n    return state.memberReducer.user;\n  });\n  useEffect(() => {\n    function checkArticleUpdate(uid) {\n      db.collection(\"Articles\")\n        .orderBy(\"date\", \"desc\")\n        .where(\"uid\", \"==\", uid)\n        .onSnapshot(function (querySnapshot) {\n          let list = [];\n          querySnapshot.forEach(function (doc) {\n            list.push({\n              title: doc.data().title,\n              content: doc.data().markDown.slice(0, 100),\n              id: doc.data().id,\n              tags: doc.data().tags,\n              readerHtml: doc.data().readerHtml,\n            });\n          });\n          dispatch(INITARTICLE(list));\n        });\n    }\n    if (user) {\n      checkArticleUpdate(user.uid);\n    }\n  }, [user]);\n\n  return (\n    <div\n      className={styles.boardWrapper}\n      onClick={() => {\n        setAddMember(false);\n      }}\n    >\n      <AddArticle className=\"headMemberIcon\" user={user} />\n      <div className={styles.titleWrapper}>\n        <div className={styles.title}>前端群組</div>\n\n        <div className={styles.actionList}>\n          <EditIcon />\n          <GroupAddIcon\n            onClick={(e) => {\n              e.stopPropagation();\n              setAddMember(true);\n              console.log(addMember);\n            }}\n          />\n          {addMember ? (\n            <div\n              className={styles.addMemberWrapper}\n              onClick={(e) => {\n                e.stopPropagation();\n              }}\n            >\n              <div>Add New Member</div>\n              <form action=\"\">\n                <input type=\"text\" />\n              </form>\n              <hr />\n              <div className={styles.memberWrapper}>\n                <div>kevin@gmail.com</div>\n                <button>Add</button>\n              </div>\n            </div>\n          ) : (\n            \"\"\n          )}\n        </div>\n      </div>\n      <CardWrapper />\n    </div>\n  );\n}\n","import { resolve } from \"path\";\nimport { app } from \"./lib.js\";\napp.getGraphData = function (uid) {\n  return new Promise(async (resolve) => {\n    let memberTags = await app.getMemberTags(uid);\n    console.log(\"2\");\n    resolve(memberTags);\n  });\n};\n\napp.initGraphData = function (uid) {\n  return new Promise((resolve) => {\n    app\n      .getGraphData(uid)\n      .then((memberTags) => {\n        console.log(memberTags);\n        let nodes = [];\n        memberTags.forEach((tag) => {\n          nodes.push({\n            id: tag.value,\n            tagId: tag.id,\n          });\n        });\n        return nodes;\n      })\n      .then((nodes) => {\n        resolve({\n          nodes: nodes,\n          links: [],\n        });\n      });\n  });\n};\n\nexport { app };\n","import * as d3 from \"d3\";\nimport { dataSet } from \"../../data.js\";\nimport { dataSet2 } from \"../../data2.js\";\nimport { useD3 } from \"../../hooks/useD3.js\";\nimport { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { app } from \"../../lib/gragh_lib.js\";\nimport { useDispatch } from \"react-redux\";\nimport { SWITCHARTICLE } from \"../../redux/actions\";\nimport styles from \"./Graph.module.css\";\nexport default function Graph() {\n  const dispatch = useDispatch();\n\n  const user = useSelector((state) => {\n    return state.memberReducer.user;\n  });\n\n  const [data, setData] = useState({});\n  function color() {\n    const scale = d3.scaleOrdinal(d3.schemeCategory10);\n    return (d) => scale(d.group);\n  }\n  function drag(simulation) {\n    function dragstarted(event) {\n      if (!event.active) simulation.alphaTarget(0.3).restart();\n      event.subject.fx = event.subject.x;\n      event.subject.fy = event.subject.y;\n    }\n\n    function dragged(event) {\n      event.subject.fx = event.x;\n      event.subject.fy = event.y;\n    }\n\n    function dragended(event) {\n      if (!event.active) simulation.alphaTarget(0);\n      event.subject.fx = null;\n      event.subject.fy = null;\n    }\n\n    return d3\n      .drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended);\n  }\n\n  const ref = useD3(\n    (svg) => {\n      let id;\n      const height = 1000;\n      const width = 1000;\n      if (data.nodes) {\n        const links = data.links.map((d) => Object.create(d));\n        const nodes = data.nodes.map((d) => Object.create(d));\n\n        const simulation = d3\n          .forceSimulation(nodes)\n          .force(\n            \"link\",\n            d3.forceLink(links).id((d) => d.id)\n          )\n          .force(\"charge\", d3.forceManyBody().strength(-500).distanceMax([500]))\n          .force(\"center\", d3.forceCenter(width / 2 - 300, height / 2));\n\n        const link = svg\n          .append(\"g\")\n          .attr(\"stroke\", \"#999\")\n          .attr(\"stroke-opacity\", 0.6)\n          .selectAll(\"line\")\n          .data(links)\n          .join(\"line\")\n          .attr(\"stroke-width\", (d) => Math.sqrt(d.value));\n\n        const node = svg\n          .append(\"g\")\n          .attr(\"stroke-linecap\", \"round\")\n          .attr(\"stroke-linejoin\", \"round\")\n          .selectAll(\"g\")\n          .data(nodes)\n          .join(\"g\")\n          .call(drag(simulation));\n        const circle = node\n          .append(\"circle\")\n          .attr(\"stroke-width\", 1.5)\n          .attr(\"r\", 5)\n          .attr(\"fill\", \"#4F4F4F\");\n        const text = node\n          .append(\"text\")\n          .text((d) => d.id)\n          .clone(true)\n          .lower()\n          .attr(\"stroke-width\", 0.5)\n          .attr(\"stroke\", \"white\")\n          .attr(\"fill\", \"white\")\n          .attr(\"id\", (d) => d.tagId)\n          .on(\"click\", (a) => {\n            console.log(a);\n            console.log(a.target.id);\n            dispatch(SWITCHARTICLE(a.target.id));\n          });\n\n        node.append(\"title\").text((d) => d.id);\n\n        simulation.on(\"tick\", () => {\n          link\n            .attr(\"x1\", (d) => d.source.x)\n            .attr(\"y1\", (d) => d.source.y)\n            .attr(\"x2\", (d) => d.target.x)\n            .attr(\"y2\", (d) => d.target.y);\n\n          circle.attr(\"cx\", (d) => d.x).attr(\"cy\", (d) => d.y);\n          text.attr(\"x\", (d) => d.x + 10).attr(\"y\", (d) => d.y);\n        });\n      }\n\n      return svg.node();\n    },\n    [data]\n  );\n  const articleList = useSelector((state) => {\n    console.log(state);\n    return state.articleReducer.articleList;\n  });\n  function getGraphData(uid) {\n    return new Promise(async (resolve) => {\n      let memberTags = await app.getMemberTags(uid);\n\n      resolve(memberTags);\n    });\n  }\n  // {\n  //   id: \"1qeqw\",\n  //   value: \"ee\"\n  //   label: \"ee\"\n  // }\n  function createCombinationList(tags) {\n    let combList = [];\n    for (let i = 0; i < tags.length - 1; i++) {\n      for (let j = i + 1; j < tags.length; j++) {\n        combList.push([tags[i], tags[j]]);\n      }\n    }\n    return combList;\n  }\n  function countCombinationNumber(articleList, combList) {\n    console.error(articleList);\n    let links = [];\n    console.log(combList);\n    for (let i = 0; i < combList.length; i++) {\n      let combNumber = 0;\n      articleList.forEach((article) => {\n        if (article.tags) {\n          if (\n            article.tags.includes(combList[i][0].id) &&\n            article.tags.includes(combList[i][1].id)\n          ) {\n            combNumber += 1;\n          }\n        }\n      });\n      links.push({\n        source: combList[i][0].label,\n        target: combList[i][1].label,\n        value: combNumber,\n      });\n    }\n    return links;\n  }\n  function combInit(tags) {\n    let combList = createCombinationList(tags);\n    console.warn(articleList);\n    return countCombinationNumber(articleList, combList);\n  }\n\n  function initGraphData(uid) {\n    return new Promise((resolve) => {\n      getGraphData(uid)\n        .then((memberTags) => {\n          let links = combInit(memberTags);\n          let nodes = [];\n          memberTags.forEach((tag) => {\n            nodes.push({\n              id: tag.value,\n              tagId: tag.id,\n            });\n          });\n          console.log(links);\n          return [nodes, links];\n        })\n        .then(([nodes, links]) => {\n          resolve({\n            nodes: nodes,\n            links: links,\n          });\n        });\n    });\n  }\n  useEffect(() => {\n    if (user && articleList[0]) {\n      console.log(articleList);\n      // setDataRun(true);\n      console.log(user);\n      initGraphData(user.uid).then((data) => {\n        console.log(\"lets set dat=============================a\");\n        console.log(data);\n        setData(data);\n      });\n    }\n  }, [user, articleList]);\n  return (\n    <div className={styles.graphWrapper}>\n      <svg\n        ref={ref}\n        style={{\n          height: 1000,\n          width: \"100%\",\n          marginRight: \"20px\",\n          marginLeft: \"0px\",\n        }}\n      >\n        <g className=\"plot-area\" />\n        <g className=\"x-axis\" />\n        <g className=\"y-axis\" />\n      </svg>\n    </div>\n  );\n}\n","import React from \"react\";\nimport * as d3 from \"d3\";\n\nexport const useD3 = (renderChartFn, dependencies) => {\n  const ref = React.useRef();\n\n  React.useEffect(() => {\n    console.log(ref.current);\n    renderChartFn(d3.select(ref.current));\n    return () => {};\n  }, dependencies);\n  return ref;\n};\n","import { useEffect, useState } from \"react\";\n\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport BookmarkIcon from \"@material-ui/icons/Bookmark\";\nimport { app } from \"../../lib/lib.js\";\nimport { useDispatch } from \"react-redux\";\nimport styles from \"../SideTab/FolderTab.module.css\";\nimport { Draggable } from \"react-beautiful-dnd\";\nimport { SWITCHRSS } from \"../../redux/actions\";\nexport default function RSSFolder(props) {\n  const [RSS, setRSS] = useState([]);\n  const dispatch = useDispatch();\n  let user = props.user;\n  //   useEffect(() => {\n  //     function getMemberFolderTags() {\n  //       if (user) {\n  //         app.getMemberFolderTags(props.folderId).then((folderTags) => {\n  //           setRSS(folderTags);\n  //         });\n  //       }\n  //     }\n  //     getMemberFolderTags();\n  //   }, [user]);\n\n  function showRSSItem(RSS) {\n    let RSSList = [];\n    if (RSS.length > 0) {\n      let count = 0;\n      for (let i in RSS) {\n        console.log(RSS[i]);\n        RSSList.push(\n          <Draggable draggableId={RSS[i].id} index={count} key={RSS[i].id}>\n            {(provided) => (\n              <div\n                {...provided.draggableProps}\n                {...provided.dragHandleProps}\n                ref={provided.innerRef}\n              >\n                <TreeItem\n                  key={RSS[i].id}\n                  nodeId={RSS[i].id}\n                  label={\n                    <div className={styles.labelWrapper}>\n                      <BookmarkIcon style={{ fontSize: 20 }} />\n                      <div className={styles.labelTitle}>{RSS[i].title}</div>\n                    </div>\n                  }\n                  onClick={() => {\n                    console.log(RSS[i].id);\n                    dispatch(SWITCHRSS(RSS[i].id));\n                    //   dispatch(SWITCHARTICLE(tabs[i].id));\n                  }}\n                />\n              </div>\n            )}\n          </Draggable>\n        );\n        count++;\n      }\n    }\n    return RSSList;\n  }\n  const RSSList = showRSSItem(props.folderRSS);\n  return <div>{RSSList}</div>;\n}\n","import { useEffect, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styles from \"../SideTab/FolderTab.module.css\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { TreeView } from \"@material-ui/lab\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport { useSelector } from \"react-redux\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport { Link } from \"react-router-dom\";\nimport MarkunreadIcon from \"@material-ui/icons/Markunread\";\nimport BookmarkIcon from \"@material-ui/icons/Bookmark\";\nimport FolderOpenIcon from \"@material-ui/icons/FolderOpen\";\nimport { SWITCHRSS } from \"../../redux/actions\";\nimport { app } from \"../../lib/lib.js\";\nimport { useDispatch } from \"react-redux\";\nimport { db } from \"../../firebase.js\";\nimport firebase from \"firebase/app\";\nimport { INITUSERRSSLIST } from \"../../redux/actions\";\nimport { DragDropContext, Droppable } from \"react-beautiful-dnd\";\nimport RSSFolder from \"./RSSFolder\";\nconst useStyles = makeStyles({\n  root: {\n    color: \"#B5B5B5\",\n    flexGrow: 10,\n    maxWidth: 220,\n    marginBottom: \"10px\",\n  },\n});\n\nexport default function RSSTab() {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [addFolderInput, setAddFolderInput] = useState(\"\");\n  const [showPage, setShowPage] = useState(false);\n  const [RSSFolders, setRSSFolders] = useState([]);\n\n  function getUserRSSList(uid) {\n    db.collection(\"Member\")\n      .doc(uid)\n      .get()\n      .then((doc) => {\n        dispatch(INITUSERRSSLIST(doc.data().subscribedRSS));\n      });\n  }\n  function addNewGroup(uid, name) {\n    db.collection(\"GroupBoard\")\n      .add({\n        name: name,\n        member: [uid],\n      })\n      .then((docRef) => {\n        docRef.update({ id: docRef.id });\n        return docRef.id;\n      })\n      .then((id) => {\n        db.collection(\"Member\")\n          .doc(uid)\n          .update({\n            board: firebase.firestore.FieldValue.arrayUnion(id),\n          });\n      });\n  }\n  const user = useSelector((state) => {\n    return state.memberReducer.user;\n  });\n  const userRSSList = useSelector((state) => {\n    return state.RSSReducer.UserRSSList;\n  });\n  useEffect(() => {}, [userRSSList]);\n  useEffect(() => {\n    function getRSSFolders() {\n      if (user) {\n        app\n          .getMemberRSSFolders(user.uid)\n          .then((RSSFolders) => {\n            setRSSFolders(RSSFolders);\n            return RSSFolders;\n          })\n          .then((RSSFolders) => {\n            RSSFolders.forEach(async (folder) => {\n              if (folder.RSSIds) {\n                await folder.RSSIds.forEach(async (RSSId) => {\n                  let RSS = await app.getRSSInfo(RSSId);\n                  folder.RSS.push(RSS);\n                });\n              }\n\n              return folder;\n            });\n\n            setRSSFolders(RSSFolders);\n          });\n      }\n    }\n    if (user) {\n      getUserRSSList(user.uid);\n    }\n    getRSSFolders();\n  }, [user]);\n  function addRSSFolder(name, uid) {\n    db.collection(\"RSSFolders\")\n      .add({\n        name: name,\n        uid: uid,\n      })\n      .then((docRef) => {\n        docRef.update({ id: docRef.id });\n        return docRef.id;\n      })\n      .then((id) => {\n        db.collection(\"Member\")\n          .doc(uid)\n          .update({\n            RSSFolders: firebase.firestore.FieldValue.arrayUnion(id),\n          });\n      });\n  }\n  function showRSSFolders(folders) {\n    let RSSFolderList = [];\n    if (folders.length > 0) {\n      for (let i in folders) {\n        RSSFolderList.push(\n          <Droppable droppableId={folders[i].id}>\n            {(provided) => (\n              <TreeItem\n                ref={provided.innerRef}\n                {...provided.droppableProps}\n                key={folders[i].id}\n                nodeId={folders[i].id}\n                label={\n                  <div className={styles.labelWrapper}>\n                    <FolderOpenIcon style={{ fontSize: 20 }} />\n                    <div className={styles.labelTitle}>{folders[i].name}</div>\n                  </div>\n                }\n                onClick={() => {}}\n              >\n                <RSSFolder\n                  user={user}\n                  folderId={folders[i].id}\n                  folderRSS={folders[i].RSS}\n                />\n                {provided.placeholder}\n              </TreeItem>\n            )}\n          </Droppable>\n        );\n      }\n    }\n    return RSSFolderList;\n  }\n  console.log(RSSFolders);\n  const articleFolderList = showRSSFolders(RSSFolders);\n  function onDragEnd(result) {\n    const { destination, source, draggableId } = result;\n    console.log(result);\n\n    if (!destination) {\n      return;\n    }\n\n    if (\n      destination.droppableId === source.droppableId &&\n      destination.index === source.index\n    ) {\n      console.log(\"nothing should happended\");\n      return;\n    }\n    if (destination.droppableId === source.droppableId) {\n      console.log(\"move inside same folder\");\n      let newRSSFolders = [...RSSFolders];\n      let newRSSIds;\n      newRSSFolders.forEach((folder) => {\n        if (folder.id === destination.droppableId) {\n          let moveId = folder.RSSIds[source.index];\n          newRSSIds = [...folder.RSSIds];\n\n          newRSSIds.splice(source.index, 1);\n          newRSSIds.splice(destination.index, 0, moveId);\n          console.log(newRSSIds);\n          let moveItem = folder.RSS[source.index];\n          folder.RSS.splice(source.index, 1);\n          folder.RSS.splice(destination.index, 0, moveItem);\n          folder.RSSIds = newRSSIds;\n        }\n      });\n      console.log(newRSSFolders);\n\n      db.collection(\"RSSFolders\").doc(destination.droppableId).update({\n        RSS: newRSSIds,\n      });\n      setRSSFolders(newRSSFolders);\n\n      console.log(destination.index, source.index);\n      console.log(source.droppableId);\n      console.log(destination.droppableId);\n    }\n    if (destination.droppableId !== source.droppableId) {\n      console.log(\"move to another folder\");\n      let newRSSFolders = [...RSSFolders];\n      let moveId;\n      let moveItem;\n      let newSourceRSSIds;\n      let newDestinationRSSIds;\n      newRSSFolders.forEach((folder) => {\n        if (folder.id === source.droppableId) {\n          moveId = folder.RSSIds[source.index];\n          moveItem = folder.RSS[source.index];\n          newSourceRSSIds = [...folder.RSSIds];\n          newSourceRSSIds.splice(source.index, 1);\n          folder.RSS.splice(source.index, 1);\n          folder.RSSIds = newSourceRSSIds;\n          db.collection(\"RSSFolders\").doc(source.droppableId).update({\n            RSS: newSourceRSSIds,\n          });\n        }\n      });\n      newRSSFolders.forEach((folder) => {\n        if (folder.id === destination.droppableId) {\n          newDestinationRSSIds = [...folder.RSSIds];\n          newDestinationRSSIds.splice(destination.index, 0, moveId);\n          folder.RSS.splice(destination.index, 0, moveItem);\n          folder.RSSIds = newDestinationRSSIds;\n          db.collection(\"RSSFolders\").doc(destination.droppableId).update({\n            RSS: newDestinationRSSIds,\n          });\n        }\n      });\n      setRSSFolders(newRSSFolders);\n    }\n  }\n  return (\n    <div className={styles.folderTabWrapper}>\n      <div className={styles.folderTab}>\n        <Link to={\"/rss\"}>\n          <div className={styles.sectionTitle}>RSS</div>\n          <TreeView\n            className={classes.root}\n            defaultExpanded={[\"\"]}\n            defaultCollapseIcon={<ExpandMoreIcon />}\n            defaultExpandIcon={<ChevronRightIcon />}\n          >\n            <TreeItem\n              nodeId=\"tagAll\"\n              label={\n                <div className={styles.labelWrapper}>\n                  <div className={styles.labelTitle}>All Feeds</div>\n                </div>\n              }\n              onClick={() => {\n                dispatch(SWITCHRSS(\"all\"));\n              }}\n            ></TreeItem>\n            <DragDropContext onDragEnd={onDragEnd}>\n              {articleFolderList}\n            </DragDropContext>\n          </TreeView>\n        </Link>\n        <Link to={\"/rssexplore\"}>\n          <div className={styles.subTitle}>Follow New Source</div>\n        </Link>\n        <div\n          className={styles.subTitle}\n          onClick={() => {\n            setShowPage(true);\n          }}\n        >\n          Add New Folder\n        </div>\n        {showPage\n          ? createPortal(\n              <div className={styles.popup}>\n                <div\n                  className={styles.blur}\n                  onClick={() => {\n                    setShowPage(false);\n                  }}\n                ></div>\n                <div className={styles.addFolder}>\n                  <div className={styles.addTitle}>Add New Folder</div>\n                  <form id=\"addForm\" action=\"\">\n                    <input\n                      className={styles.input}\n                      type=\"text\"\n                      placeholder=\"Folder Name\"\n                      value={addFolderInput}\n                      onChange={(e) => {\n                        setAddFolderInput(e.target.value);\n                      }}\n                    />\n                    <button\n                      type=\"submit\"\n                      className={styles.saveBtn}\n                      form=\"addForm\"\n                      onClick={() => {\n                        if (user) {\n                          addRSSFolder(addFolderInput, user.uid);\n                          setShowPage(false);\n                        } else {\n                          alert(\"Please login to add folder!\");\n                        }\n                      }}\n                    >\n                      Save\n                    </button>\n                    <button\n                      onClick={() => {\n                        setShowPage(false);\n                      }}\n                      className={styles.cancelBtn}\n                    >\n                      Cancel\n                    </button>\n                  </form>\n                </div>\n              </div>,\n              document.body\n            )\n          : \"\"}\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"./RSSCard.module.css\";\n\nexport default function RSSCard(props) {\n  var elem = document.createElement(\"div\");\n  elem.innerHTML = props.item.content;\n  let src;\n  if (elem.querySelector(\"img\")) {\n    src = elem.querySelector(\"img\").src;\n  }\n\n  return (\n    <div className={styles.container} onClick={props.onClick}>\n      <div className={styles.card}>\n        <div className={styles.color}>\n          <img src={src} alt=\"\" className={styles.img} />\n        </div>\n\n        <div className={styles.wordWrapper}>\n          <div className={styles.title}>{props.item.title}</div>\n          <div className={styles.creator}>{props.item.creator}</div>\n          <div className={styles.content}>{props.item.contentSnippet}</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useLocation, useHistory } from \"react-router-dom\";\nimport { localUrl, ec2Url } from \"../../config.js\";\nimport { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { db } from \"../../firebase.js\";\nimport ArrowBack from \"@material-ui/icons/ArrowBack\";\nimport BookmarkBorderIcon from \"@material-ui/icons/BookmarkBorder\";\nimport styles from \"./RSSPage.module.css\";\nimport { app } from \"../../lib/lib.js\";\n\nimport { useSelector } from \"react-redux\";\n\nexport default function RSSPage(props) {\n  console.log(\"page rerender, props is \", props.item);\n  const [feedItem, setFeedItem] = useState({});\n\n  const location = useLocation();\n  let search = location.search;\n  let params = new URLSearchParams(search);\n\n  let user = useSelector((state) => {\n    return state.memberReducer.user;\n  });\n  function postDataToServer(\n    url,\n    data = {\n      url: \"www.sylish.com\",\n      uid: \"12344\",\n    }\n  ) {\n    fetch(url, {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        // 'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: JSON.stringify(data),\n    })\n      .then(function (response) {\n        if (response.status !== 200) {\n          console.log(\n            \"Looks like there was a problem. Status Code: \" + response.status\n          );\n          return;\n        }\n        response.json().then(function (data) {\n          console.log(data);\n          alert(data.msg);\n        });\n      })\n      .catch(function (err) {\n        console.log(\"Fetch Error :-S\", err);\n      });\n  }\n  useEffect(() => {\n    if (props.item) {\n      console.log(props.item);\n      setFeedItem(props.item);\n    } else {\n      console.log(\"this is in else ...run\");\n      //   console.log(\"useeffect run\");\n      //   app.getFeedContent(feedId).then((feedItem) => {\n      //     console.log(feedItem);\n      //     setFeedItem(feedItem);\n      //   });\n    }\n  }, [props.item]);\n\n  //   useEffect(() => {\n  //     function getArticles() {\n  //       db.collection(\"Articles\")\n  //         .doc(id)\n  //         .onSnapshot(function (doc) {\n  //           setArticle({\n  //             title: doc.data().title,\n  //             markDown: doc.data().markDown,\n  //           });\n  //         });\n  //     }\n  //     getArticles();\n  //   }, []);\n  console.log(feedItem);\n  return (\n    <div className={styles.page}>\n      <div className={styles.head}>\n        <ArrowBack\n          style={{ color: \"#FFFCEC\", cursor: \"pointer\" }}\n          onClick={props.onClick}\n        />\n        <BookmarkBorderIcon\n          onClick={() => {\n            postDataToServer(localUrl, {\n              url: feedItem.link,\n              uid: user.uid,\n            });\n          }}\n        />\n      </div>\n      <div className={styles.title}>{feedItem.title}</div>\n      <div dangerouslySetInnerHTML={{ __html: feedItem.content }}></div>\n    </div>\n  );\n}\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { db } from \"../../firebase.js\";\nimport RSSCard from \"./RSSCard\";\nimport { INITARTICLE } from \"../../redux/actions\";\nimport styles from \"./RSSBoard.module.css\";\nimport { app } from \"../../lib/lib.js\";\nimport RSSPage from \"./RSSPage\";\nimport \"./RSSPage.css\";\nexport default function Board(props) {\n  const [allFeeds, setAllFeeds] = useState([]);\n  const [channelFeeds, setChannelFeeds] = useState({});\n  const [lastVisible, setLastVisible] = useState(0);\n  const [showPage, setShowPage] = useState(false);\n  const [feedItem, setFeedItem] = useState(\"\");\n  const [lastQueryDoc, setLastQueryDoc] = useState(\"\");\n  const lastVisibleNumber = useRef(lastVisible);\n  const dispatch = useDispatch();\n  const userRSSList = useSelector((state) => {\n    return state.RSSReducer.UserRSSList;\n  });\n\n  function batchFetchAllFeeds(userRSSList, lastVisible) {\n    console.log(userRSSList);\n    if (lastVisible === 0) {\n      console.log(\"last visible equal zero!\");\n      db.collection(\"RSSItem\")\n        .orderBy(\"pubDate\", \"desc\")\n        .limit(15)\n        .get()\n        .then((snapshot) => {\n          console.log(\"batchfetch start\");\n          let items = [...allFeeds];\n          snapshot.forEach((doc) => {\n            if (userRSSList.includes(doc.data().RSSId)) {\n              items.push(doc.data());\n            }\n          });\n          setLastQueryDoc(snapshot.docs[14]);\n\n          console.log(\"finsih loop\");\n          setAllFeeds(items);\n          console.log(\"se set items as \", items);\n        });\n    } else {\n      if (lastQueryDoc) {\n        console.log(\"else start, the last visible is\", lastVisible);\n\n        db.collection(\"RSSItem\")\n          .orderBy(\"pubDate\", \"desc\")\n          .startAfter(lastQueryDoc)\n          .limit(7)\n          .get()\n          .then((snapshot) => {\n            let items = [...allFeeds];\n            snapshot.forEach((doc) => {\n              if (userRSSList.includes(doc.data().RSSId)) {\n                items.push(doc.data());\n              }\n            });\n\n            setLastQueryDoc(snapshot.docs[snapshot.docs.length - 1]);\n            setAllFeeds(items);\n          });\n      }\n    }\n  }\n\n  function renderAllFeeds(feedItems) {\n    if (feedItems) {\n      let feedList = [];\n      for (let i in feedItems) {\n        feedList.push(\n          <RSSCard\n            item={feedItems[i]}\n            onClick={(e) => {\n              setShowPage(true);\n              setFeedItem(feedItems[i]);\n            }}\n          />\n        );\n      }\n      return (\n        <div className={styles.board}>\n          <h1 className={styles.title}>Your Daily Feeds</h1>\n          <div className={styles.content}>Dont scroll fb! Lets read feeds~</div>\n          {feedList}\n        </div>\n      );\n    } else {\n      return (\n        <div className={styles.board}>\n          <h1 className={styles.title}>Your Daily Feeds</h1>\n          <div className={styles.content}>You dont have any feed</div>\n          <div>You dont have any feed</div>\n        </div>\n      );\n    }\n  }\n\n  const user = useSelector((state) => {\n    return state.memberReducer.user;\n  });\n\n  function renderFeedPage(feedItem) {\n    return (\n      <RSSPage\n        item={feedItem}\n        onClick={() => {\n          setShowPage(false);\n        }}\n      />\n    );\n  }\n\n  const ChannelRSSId = useSelector((state) => {\n    return state.RSSReducer.ChannelRSSId;\n  });\n\n  useEffect(() => {\n    const handleScroll = () => {\n      const winScroll =\n        document.body.scrollTop || document.documentElement.scrollTop;\n\n      const height =\n        document.documentElement.scrollHeight -\n        document.documentElement.clientHeight;\n      if (winScroll > height - 20) {\n        console.log(\"reach the bottom!\", lastVisible);\n\n        let newLast = lastVisible + 7;\n        setLastVisible(newLast);\n      }\n    };\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [lastVisible]);\n\n  useEffect(() => {\n    console.log(lastVisible);\n    if (userRSSList) {\n      batchFetchAllFeeds(userRSSList, lastVisible);\n    }\n  }, [userRSSList, lastVisible]);\n  useEffect(() => {\n    fetchChannelFeed();\n  }, [ChannelRSSId]);\n\n  let allFeedsOutome;\n  if (ChannelRSSId === \"all\") {\n    console.log(\"channel id is all\");\n    console.log(allFeeds);\n    allFeedsOutome = renderAllFeeds(allFeeds);\n  } else if (ChannelRSSId) {\n    allFeedsOutome = renderChannelFeeds();\n  }\n\n  async function fetchChannelFeed() {\n    let items;\n    let RSS;\n    if (ChannelRSSId) {\n      console.log(ChannelRSSId);\n      RSS = await app.getRSSInfo(ChannelRSSId);\n      items = await app.getChannelFeeds(ChannelRSSId);\n      console.log(RSS, items);\n      setChannelFeeds({\n        RSS: RSS,\n        items: items,\n      });\n    }\n  }\n  function renderChannelFeeds() {\n    if (channelFeeds.items) {\n      console.log(channelFeeds);\n      let items = channelFeeds.items;\n      let RSS = channelFeeds.RSS;\n      let feedList = [];\n      for (let i in items) {\n        console.log(items[i]);\n        feedList.push(\n          <RSSCard\n            item={items[i]}\n            onClick={(e) => {\n              console.log(\"hihi\");\n              setShowPage(true);\n              setFeedItem(items[i]);\n            }}\n          />\n        );\n      }\n      return (\n        <div className={styles.board}>\n          <h1 className={styles.title}>{RSS.title}</h1>\n          <div\n            className={styles.content}\n            dangerouslySetInnerHTML={{ __html: RSS.description }}\n          ></div>\n          {feedList}\n        </div>\n      );\n    }\n  }\n  const feedPage = renderFeedPage(feedItem);\n  return (\n    <div className={styles.boardWrapper}>\n      {allFeedsOutome}\n      {showPage ? (\n        <div className={styles.popup}>\n          <div\n            className={styles.blur}\n            onClick={() => {\n              setShowPage(false);\n            }}\n          ></div>\n          {feedPage}\n        </div>\n      ) : (\n        \"\"\n      )}\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { local, ec2Url } from \"../../config.js\";\nimport styles from \"./FindRSS.module.css\";\nimport * as RSSParser from \"rss-parser\";\nimport { GETRSSRESPONSE } from \"../../redux/actions\";\nimport Axios from \"axios\";\nexport default function FindRSS(props) {\n  const [reqUrl, setReqUrl] = useState(\"\");\n  const dispatch = useDispatch();\n\n  const user = useSelector((state) => {\n    return state.memberReducer.user;\n  });\n  function requestRSS(url) {\n    const CORS_PROXY = \"https://cors-anywhere.herokuapp.com/\";\n    let parser = new RSSParser();\n    parser.parseURL(CORS_PROXY + url, function (err, feed) {\n      if (err) {\n        fetch(local + \"rss/fetch\", {\n          method: \"post\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            // 'Content-Type': 'application/x-www-form-urlencoded',\n          },\n          body: JSON.stringify({ url: url }),\n        }).then(function (response) {\n          if (response.status !== 200) {\n            console.log(\"sth goes wrong in backend \");\n          } else {\n            response.json().then((data) => {\n              dispatch(GETRSSRESPONSE(data.rss, url));\n            });\n          }\n        });\n      } else {\n        console.log(feed);\n        console.log(feed.title);\n        dispatch(GETRSSRESPONSE(feed, url));\n        feed.items.forEach(function (entry) {\n          console.log(entry.title + \":\" + entry.link);\n        });\n      }\n    });\n  }\n\n  return (\n    <div className={styles.addArticle}>\n      <div class={styles.addTitle}>Add new source to reach this world</div>\n      <form\n        className={styles.addForm}\n        action=\"\"\n        onSubmit={(e) => {\n          e.preventDefault();\n          if (user) {\n            requestRSS(reqUrl);\n          }\n        }}\n      >\n        <input\n          type=\"text\"\n          name=\"input\"\n          className={styles.input}\n          value={reqUrl}\n          onChange={(e) => setReqUrl(e.currentTarget.value)}\n        />\n        <button type=\"submit\" className={styles.add}>\n          搜尋\n        </button>\n      </form>\n    </div>\n  );\n}\n","export default \"data:image/png;base64,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\"","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport FindRSS from \"./FindRSS\";\nimport { db } from \"../../firebase.js\";\nimport RSSCard from \"./RSSCard\";\nimport { INITARTICLE } from \"../../redux/actions\";\nimport styles from \"./RSSBoard.module.css\";\nimport { app } from \"../../lib/lib.js\";\nimport RSSPage from \"./RSSPage\";\nimport sfLogo from \"../../img/sf_logo.png\";\nimport { style } from \"d3\";\nexport default function Board(props) {\n  const [showPage, setShowPage] = useState(false);\n  const [feedItem, setFeedItem] = useState(\"\");\n  const dispatch = useDispatch();\n  console.log(\"rerender\");\n  const user = useSelector((state) => {\n    return state.memberReducer.user;\n  });\n\n  function renderFeedPage(feedItem) {\n    console.log(\"redner run again\");\n    console.log(feedItem);\n    return <RSSPage item={feedItem} />;\n  }\n\n  const ChannelRSSId = useSelector((state) => {\n    console.log(\"hihi\");\n    return state.RSSReducer.ChannelRSSId;\n  });\n  console.log(\"rerender channelid is \", ChannelRSSId);\n\n  const searchFeed = useSelector((state) => {\n    return state.RSSReducer.feed;\n  });\n  const searchFeedUrl = useSelector((state) => {\n    return state.RSSReducer.url;\n  });\n\n  function renderSearchFeed(feed) {\n    let feedList = [];\n    for (let i in feed.items) {\n      feedList.push(\n        <RSSCard\n          item={feed.items[i]}\n          onClick={(e) => {\n            console.log(\"hihi\");\n            setShowPage(true);\n            setFeedItem(feed.items[i]);\n          }}\n        />\n      );\n    }\n\n    return (\n      <div className={styles.board}>\n        <h1 className={styles.title}>{feed.title}</h1>\n        <div\n          className={styles.content}\n          dangerouslySetInnerHTML={{ __html: feed.description }}\n        ></div>\n        {feed.title ? (\n          <button\n            className={styles.subscribe_btn}\n            onClick={() => {\n              app.subscribeRSS(user.uid, feed.title, searchFeedUrl, feed);\n            }}\n          >\n            Follow\n          </button>\n        ) : (\n          \"\"\n        )}\n        {feedList}\n      </div>\n    );\n  }\n  //   useEffect(() => {\n\n  //     if (searchFeed) {\n  //       checkArticleUpdate(user.uid);\n  //     }\n  //   }, [user]);\n  const feedPage = renderFeedPage(feedItem);\n  const searchOutcome = renderSearchFeed(searchFeed);\n\n  useEffect(() => {\n    function checkArticleUpdate(uid) {\n      db.collection(\"Articles\")\n        .where(\"uid\", \"==\", uid)\n        .onSnapshot(function (querySnapshot) {\n          let list = [];\n          querySnapshot.forEach(function (doc) {\n            list.push({\n              title: doc.data().title,\n              content: doc.data().markDown.slice(0, 100),\n              id: doc.data().id,\n              tags: doc.data().tags,\n            });\n          });\n          dispatch(INITARTICLE(list));\n        });\n    }\n    if (user) {\n      checkArticleUpdate(user.uid);\n    }\n  }, [user]);\n  return (\n    <div className={styles.boardWrapper}>\n      <FindRSS className=\"headMemberIcon\" user={props.user} />\n      <div className={styles.title}># Explore</div>\n      <div className={styles.categoryTitle}>Tech</div>\n      <div className={styles.categoryWrapper}>\n        <div className={styles.categoryCard}>\n          <div className={styles.cardUpper}>\n            <div className={styles.cardImg}>\n              <img src={sfLogo} alt=\"\" />\n            </div>\n            <div className={styles.cardWording}>\n              <div className={styles.cardTitle}>Segment Fault - 前端</div>\n              <div className={styles.cardDescription}>前端新知</div>\n            </div>\n          </div>\n          <div className={styles.cardBtn}>Follow</div>\n        </div>\n        <div className={styles.categoryCard}>\n          <div className={styles.cardUpper}>\n            <div className={styles.cardImg}>\n              <img src={sfLogo} alt=\"\" />\n            </div>\n            <div className={styles.cardWording}>\n              <div className={styles.cardTitle}>掘金前端</div>\n              <div className={styles.cardDescription}>前端新知</div>\n            </div>\n          </div>\n          <div className={styles.cardBtn}>Follow</div>\n        </div>\n        <div className={styles.categoryCard}>\n          <div className={styles.cardUpper}>\n            <div className={styles.cardImg}>\n              <img src={sfLogo} alt=\"\" />\n            </div>\n            <div className={styles.cardWording}>\n              <div className={styles.cardTitle}>Segment Fault - 前端</div>\n              <div className={styles.cardDescription}>前端新知</div>\n            </div>\n          </div>\n          <div className={styles.cardBtn}>Follow</div>\n        </div>\n        <div className={styles.categoryCard}>\n          <div className={styles.cardUpper}>\n            <div className={styles.cardImg}>\n              <img src={sfLogo} alt=\"\" />\n            </div>\n            <div className={styles.cardWording}>\n              <div className={styles.cardTitle}>Segment Fault - 前端</div>\n              <div className={styles.cardDescription}>前端新知</div>\n            </div>\n          </div>\n          <div className={styles.cardBtn}>Follow</div>\n        </div>\n        <div className={styles.categoryCard}>\n          <div className={styles.cardUpper}>\n            <div className={styles.cardImg}>\n              <img src={sfLogo} alt=\"\" />\n            </div>\n            <div className={styles.cardWording}>\n              <div className={styles.cardTitle}>Segment Fault - 前端</div>\n              <div className={styles.cardDescription}>前端新知</div>\n            </div>\n          </div>\n          <div className={styles.cardBtn}>Follow</div>\n        </div>\n      </div>\n\n      {searchOutcome}\n      {showPage ? (\n        <div className={styles.popup}>\n          <button\n            onClick={() => {\n              setShowPage(false);\n            }}\n          >\n            Close Page\n          </button>\n          {feedPage}\n        </div>\n      ) : (\n        \"\"\n      )}\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/logo.4f1ab45e.png\";","import styles from \"./FunctionTab.module.css\";\nimport logo from \"../../img/logo.png\";\nimport { Link } from \"react-router-dom\";\nimport AccountBoxIcon from \"@material-ui/icons/AccountBox\";\nimport InsertChartIcon from \"@material-ui/icons/InsertChart\";\nimport HomeWorkIcon from \"@material-ui/icons/HomeWork\";\nimport { auth } from \"../../firebase.js\";\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\nimport RssFeedIcon from \"@material-ui/icons/RssFeed\";\nimport PeopleAltIcon from \"@material-ui/icons/PeopleAlt\";\nexport default function FunctionTab() {\n  return (\n    <div className={styles.functionTabWrapper}>\n      <div className={styles.functionTab}>\n        <div className={styles.logoWrapper}>\n          <img src={logo} alt=\"\" width=\"50px\" />\n        </div>\n        <div className={styles.iconWrapper}>\n          <Link to={\"/board\"}>\n            <HomeWorkIcon fontSize=\"large\" style={{ color: \"#747474\" }} />\n          </Link>\n          <Link to={\"/rss\"}>\n            <RssFeedIcon fontSize=\"large\" style={{ color: \"#747474\" }} />\n          </Link>\n          <Link to={\"/graph\"}>\n            <InsertChartIcon fontSize=\"large\" style={{ color: \"#747474\" }} />\n          </Link>\n          <Link to={\"/group\"}>\n            <PeopleAltIcon fontSize=\"large\" style={{ color: \"#747474\" }} />\n          </Link>\n          <Link to={\"/signup\"}>\n            <AccountBoxIcon fontSize=\"large\" style={{ color: \"#747474\" }} />\n          </Link>\n        </div>\n        <ExitToAppIcon\n          calssName={styles.exit}\n          style={{ color: \"#747474\" }}\n          onClick={() => {\n            auth\n              .signOut()\n              .then(() => console.log(\"user successfully sign out\"))\n              .catch((err) => {\n                console.log(err);\n              });\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n","import { useEffect } from \"react\";\nimport { auth } from \"./../firebase.js\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Article from \"./Article/Aritcle\";\nimport Header from \"./Header/Header\";\nimport Signup from \"./Member/Signup\";\nimport Signin from \"./Member/Signin\";\nimport Board from \"./Board\";\nimport MyRouter from \"./MyRouter\";\nimport FolderTab from \"./SideTab/FolderTab\";\nimport GroupFolderTab from \"./Group/GroupFolderTab\";\nimport GroupBoard from \"./Group/GroupBoard\";\nimport Graph from \"./Graph/Graph1\";\nimport RSSHeader from \"./RSS/RSSHeader\";\nimport RSSTab from \"./RSS/RSSTab\";\nimport RSSBoard from \"./RSS/RSSBoard\";\nimport RSSExplore from \"./RSS/RSSExplore\";\nimport FunctionTab from \"./SideTab/FunctionTab\";\n//React.Memo\n//state prop dispatch history\n\nfunction App() {\n  return (\n    <Router>\n      <div className=\"App\">\n        <MyRouter />\n        <Switch>\n          <Route path=\"/signup\" component={Signup}></Route>\n          <Route path=\"/signin\" component={Signin}></Route>\n          <Route path=\"/board\">\n            <div className=\"content\">\n              <FunctionTab />\n              <FolderTab />\n              <Board />\n            </div>\n          </Route>\n          <Route path=\"/article\" component={Article}></Route>\n          <Route path=\"/group\">\n            <div className=\"content\">\n              <FunctionTab />\n              <GroupFolderTab />\n              <GroupBoard />\n            </div>\n          </Route>\n          <Route path=\"/graph\">\n            <div className=\"content\">\n              <FunctionTab />\n              <Board />\n              <Graph />\n            </div>\n          </Route>\n          <Route path=\"/rss\">\n            <div className=\"content\">\n              <FunctionTab />\n              <RSSTab key=\"123\" />\n              <RSSBoard />\n            </div>\n          </Route>\n          <Route path=\"/rssexplore\">\n            <div className=\"content\">\n              <FunctionTab />\n              <RSSTab key=\"12223\" />\n              <RSSExplore />\n            </div>\n          </Route>\n          <h1 className=\"title\">Welcome to Taggy</h1>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","//reducer\nimport { nanoid } from \"nanoid\";\n\nconst article_Reducer = (\n  state = {\n    tagSelected: \"all\",\n    articleList: [],\n  },\n  action\n) => {\n  switch (action.type) {\n    // case \"DeleteTask\":\n    //   let remaintasks = state.tasks.filter((task) => task.id != action.id);\n\n    //   return { tasks: remaintasks };\n    case \"INITARTICLE\":\n      return {\n        ...state,\n\n        articleList: action.articleList,\n      };\n    case \"SWITCHARTICLE\":\n      return {\n        ...state,\n\n        tagSelected: action.tagSelected,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default article_Reducer;\n","//reducer\nimport { nanoid } from \"nanoid\";\n\nconst member_Reducer = (state = {}, action) => {\n  switch (action.type) {\n    case \"SETMEMBER\":\n      return {\n        ...state,\n        user: {\n          uid: action.uid,\n          displayName: action.displayName,\n          email: action.email,\n        },\n      };\n\n    case \"GROUPINIT\":\n      return { ...state, groups: action.groups };\n    default:\n      return state;\n  }\n};\n\nexport default member_Reducer;\n","//reducer\nimport { nanoid } from \"nanoid\";\n\nconst RSS_Reducer = (state = { feed: {}, ChannelRSSId: \"all\" }, action) => {\n  switch (action.type) {\n    case \"GETRSSRESPONSE\":\n      return {\n        ...state,\n        feed: action.feed,\n        url: action.url,\n      };\n\n    case \"SWITCHRSS\":\n      return {\n        ...state,\n        ChannelRSSId: action.ChannelRSSId,\n      };\n    case \"INITUSERRSSLIST\":\n      return {\n        ...state,\n        UserRSSList: action.RSSList,\n      };\n    case \"SETUSERALLFEEDS\":\n      return {\n        ...state,\n        userAllFeeds: [...state.userAllFeeds, action.userAllFeeds],\n      };\n    default:\n      return state;\n  }\n};\n\nexport default RSS_Reducer;\n","import article_Reducer from \"./article_Reducer.jsx\";\nimport member_Reducer from \"./member_Reducer.jsx\";\nimport RSS_Reducer from \"./RSS_Reducer\";\nimport { combineReducers } from \"redux\";\n\nconst allReducers = combineReducers({\n  articleReducer: article_Reducer,\n  memberReducer: member_Reducer,\n  RSSReducer: RSS_Reducer,\n});\n\nexport default allReducers;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./component/App.jsx\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport allReducers from \"./redux/reducers\";\nimport { Provider } from \"react-redux\";\nconst store = createStore(allReducers, composeWithDevTools());\nReactDOM.render(\n  <Provider store={store}>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"boardWrapper\":\"GroupBoard_boardWrapper__34ma_\",\"titleWrapper\":\"GroupBoard_titleWrapper__2QB5f\",\"title\":\"GroupBoard_title__31aYR\",\"actionList\":\"GroupBoard_actionList__2o8c1\",\"addMemberWrapper\":\"GroupBoard_addMemberWrapper__wQT2n\",\"memberWrapper\":\"GroupBoard_memberWrapper__28t-5\"};"],"sourceRoot":""}