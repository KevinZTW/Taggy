(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{116:function(e,t,n){e.exports={addArticle:"FindRSS_addArticle__3_qks",addTitle:"FindRSS_addTitle__1wsn0",addForm:"FindRSS_addForm__3Z4Ot",input:"FindRSS_input__jhFPD",add:"FindRSS_add__1MrI6"}},117:function(e,t,n){e.exports={functionTabWrapper:"FunctionTab_functionTabWrapper__2E3ar",functionTab:"FunctionTab_functionTab__3iiBL",logoWrapper:"FunctionTab_logoWrapper__FNK68",iconWrapper:"FunctionTab_iconWrapper__2Wipq"}},139:function(e,t,n){e.exports={page:"RSSPage_page__3Q9XS",title:"RSSPage_title__2XScQ",head:"RSSPage_head__1VR8a",content:"RSSPage_content__1VyjE",note:"RSSPage_note__22E07"}},15:function(e,t,n){e.exports={folderTabWrapper:"FolderTab_folderTabWrapper__2niIu",folderTab:"FolderTab_folderTab__16C6M",sectionTitle:"FolderTab_sectionTitle__2NdNu",labelWrapper:"FolderTab_labelWrapper__1781X",labelTitle:"FolderTab_labelTitle__uK57g",subTitle:"FolderTab_subTitle__2XqZN",popup:"FolderTab_popup__1FOmD",popUpSlide:"FolderTab_popUpSlide__2e-fK",blur:"FolderTab_blur__qVu-f",addFolder:"FolderTab_addFolder__23fRR",addTitle:"FolderTab_addTitle__2FLAo",input:"FolderTab_input__ScEVH",saveBtn:"FolderTab_saveBtn__1FO0F",cancelBtn:"FolderTab_cancelBtn__2aYJQ"}},18:function(e,t,n){e.exports={boardWrapper:"RSSBoard_boardWrapper__16EX2",board:"RSSBoard_board__38Rna",title:"RSSBoard_title__15GhO",content:"RSSBoard_content__3Q0dv",subscribe_btn:"RSSBoard_subscribe_btn__1ZnMQ",popup:"RSSBoard_popup__2ssSi",popUpSlide:"RSSBoard_popUpSlide__35Eo7",blur:"RSSBoard_blur__3-EVn",categoryTitle:"RSSBoard_categoryTitle__306sx",categoryWrapper:"RSSBoard_categoryWrapper__1unZr",categoryCard:"RSSBoard_categoryCard__2HO8K",cardUpper:"RSSBoard_cardUpper__19CiD",cardTitle:"RSSBoard_cardTitle__3KPoY",cardDescription:"RSSBoard_cardDescription__1M6kx",cardImg:"RSSBoard_cardImg__1BD1C",cardBtn:"RSSBoard_cardBtn__V1wDN"}},260:function(e,t,n){e.exports={signOut:"RSSHeader_signOut__2rqQG",header:"RSSHeader_header__3_tX0"}},319:function(e,t,n){},40:function(e,t,n){e.exports={wrapper:"SignUp_wrapper__2d3J1",block:"SignUp_block__1ink9",title:"SignUp_title__3MK8E",form:"SignUp_form__3fw2S",inputbox:"SignUp_inputbox__2Lfhs",login:"SignUp_login__2Tq4f"}},427:function(e,t,n){e.exports={signOut:"Header_signOut__3E39S",header:"Header_header__3CDt1"}},431:function(e,t,n){e.exports={boardWrapper:"Board_boardWrapper__26hLO"}},434:function(e,t,n){e.exports={graphWrapper:"Graph_graphWrapper__3X3DP"}},497:function(e,t,n){},616:function(e,t,n){},623:function(e,t,n){},66:function(e,t,n){e.exports={container:"Card_container__2vSb6",card:"Card_card__3C6Cc",color:"Card_color__3S4k1",img:"Card_img__3vgPn",actionContainer:"Card_actionContainer__34GAW",delete:"Card_delete__25V8_",title:"Card_title__HprCG",content:"Card_content__3Nr22",wordWrapper:"Card_wordWrapper__1vPtQ"}},73:function(e,t,n){e.exports={container:"RSSCard_container__1w-D7",card:"RSSCard_card__39rjh",color:"RSSCard_color__29tbN",img:"RSSCard_img__3Fgy6",title:"RSSCard_title__2lXv2",content:"RSSCard_content__1mFFX",wordWrapper:"RSSCard_wordWrapper__3HcZP",creator:"RSSCard_creator__3NYCD",delete:"RSSCard_delete__23NFO"}},808:function(e,t,n){},813:function(e,t){},815:function(e,t){},83:function(e,t,n){e.exports={articleWrapper:"Article_articleWrapper__jFaXp",title:"Article_title__1Mrw9",head:"Article_head__31GUo",tagWrapper:"Article_tagWrapper__VZfHf",tag:"Article_tag__3LVVi",addTag:"Article_addTag__1oXdm",articleMain:"Article_articleMain__230p8",note:"Article_note__T-K1s",articleBody:"Article_articleBody__3kboI"}},840:function(e,t){},842:function(e,t){},872:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n.n(c),o=n(21),i=n.n(o),s=(n(497),n(14)),l=(n(873),n(32)),d=(n(295),n(499),s.a.initializeApp({apiKey:"AIzaSyA4cFmihlY5pIDTssbGwk9YNfGEjRfEBh4",authDomain:"knowledge-base-tw.firebaseapp.com",databaseURL:"https://knowledge-base-tw.firebaseio.com",projectId:"knowledge-base-tw",storageBucket:"knowledge-base-tw.appspot.com",messagingSenderId:"786102856750",appId:"1:786102856750:web:6bf12efd1fefb24aca83bf",measurementId:"G-RBNFGWQ2WE"})),u=d.auth(),b=s.a.firestore();var j=n(25),p=n(27),f=n(17),h=n(19),m=n(170),g=n.n(m),O=n(83),x=n.n(O),v=n(13),S=n.n(v),N=n(26),R=(n(296),n(421)),_=n.n(R),y={getMemberArticleFolders:function(e){return new Promise((function(t,n){b.collection("Member").doc(e).get().then(function(){var e=Object(N.a)(S.a.mark((function e(n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.data()){e.next=4;break}return e.delegateYield(S.a.mark((function e(){var a,c,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.data().articleFolders,c=[],console.log(a),""===a||!a){e.next=12;break}e.t0=S.a.keys(a);case 5:if((e.t1=e.t0()).done){e.next=12;break}return r=e.t1.value,console.log(a[r]),e.next=10,b.collection("articleFolders").doc(a[r]).get().then((function(e){c.push({id:e.data().id,name:e.data().name,tags:e.data().tags})}));case 10:e.next=5;break;case 12:t(c);case 13:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:e.next=5;break;case 4:t("dont have this user");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},getMemberFolderTags:function(e){return new Promise((function(t,n){b.collection("articleFolders").doc(e).get().then(function(){var e=Object(N.a)(S.a.mark((function e(n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.data()){e.next=4;break}return e.delegateYield(S.a.mark((function e(){var a,c,r,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.data().tags,c=[],console.log(a),""===a||!a){e.next=11;break}r=S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a[t]),e.next=3,b.collection("Tags").doc(a[t]).get().then((function(e){c.push({id:a[t],value:e.data().name,label:e.data().name})}));case 3:case"end":return e.stop()}}),e)})),e.t0=S.a.keys(a);case 6:if((e.t1=e.t0()).done){e.next=11;break}return o=e.t1.value,e.delegateYield(r(o),"t2",9);case 9:e.next=6;break;case 11:t(c);case 12:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:e.next=5;break;case 4:t("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},getArticleTags:function(e){return new Promise((function(t,n){b.collection("Articles").doc(e).get().then((function(e){var n=e.data().tags,a=[];if(n){var c=function(e){b.collection("Tags").doc(n[e]).get().then((function(t){console.log(t.data()),a.push({tagId:n[e],label:t.data().name,value:t.data().name})})),t(a)};for(var r in n)c(r)}else t("")}))}))},getMemberTags:function(e){return new Promise((function(t,n){console.log(e),b.collection("Member").doc(e).get().then(function(){var e=Object(N.a)(S.a.mark((function e(n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n.data()),!n.data()){e.next=5;break}return e.delegateYield(S.a.mark((function e(){var a,c,r,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.data().tags,c=[],console.log(a),""===a||!a){e.next=11;break}r=S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.collection("Tags").doc(a[t]).get().then((function(e){c.push({id:a[t],value:e.data().name,label:e.data().name})}));case 2:case"end":return e.stop()}}),e)})),e.t0=S.a.keys(a);case 6:if((e.t1=e.t0()).done){e.next=11;break}return o=e.t1.value,e.delegateYield(r(o),"t2",9);case 9:e.next=6;break;case 11:console.log(c),t(c);case 13:case"end":return e.stop()}}),e)}))(),"t0",3);case 3:e.next=6;break;case 5:t("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}};y.initArticleTags=function(){var e=Object(N.a)(S.a.mark((function e(t,n){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,y.getArticleTags(t).then((function(e){a.values=e}));case 3:return e.next=5,y.getMemberTags(n).then((function(e){a.options=e}));case 5:return console.log(a),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y.checkTagUnderUser=function(e,t){return new Promise((function(n,a){b.collection("Member").doc(t).get().then(function(){var a=Object(N.a)(S.a.mark((function a(c){var r,o;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log(t),!c.data()){a.next=18;break}if(r=c.data().tags,console.log(r),!r){a.next=15;break}a.t0=S.a.keys(r);case 6:if((a.t1=a.t0()).done){a.next=12;break}return o=a.t1.value,a.next=10,b.collection("Tags").doc(r[o]).get().then((function(t){t.data().name===e&&(console.log(t.data().name),console.log("resolve the id"),n(t.data().id))}));case 10:a.next=6;break;case 12:n("notExist"),a.next=16;break;case 15:n("noanytag");case 16:a.next=19;break;case 18:n("nothisuser");case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}))},y.inputTag=function(e,t,n){console.log(t),y.checkTagUnderUser(n,t).then((function(a){console.log(a),"noanytag"===a?b.collection("Tags").add({name:n,articles:[e]}).then((function(e){return console.log("Document written with ID: ",e.id),e.update({id:e.id}),e.id})).then((function(t){return b.collection("Articles").doc(e).update({tags:s.a.firestore.FieldValue.arrayUnion(t)}),t})).then((function(e){return b.collection("Member").doc(t).update({tags:[e]}),e})).then((function(e){b.collection("articleFolders").doc("un"+t).set({id:"un"+t,name:"Uncategorized",tags:s.a.firestore.FieldValue.arrayUnion(e)}).then((function(){b.collection("Member").doc(t).update({articleFolders:s.a.firestore.FieldValue.arrayUnion("un"+t)})}))})).catch((function(e){console.error("Error adding document: ",e)})):"notExist"===a?(console.log("user dont have this tag, CREAT AND ADD to ARTICLE"),b.collection("Tags").add({name:n,articles:[e]}).then((function(e){return console.log("Document written with ID: ",e.id),e.update({id:e.id}),e.id})).then((function(t){return b.collection("Articles").doc(e).update({tags:s.a.firestore.FieldValue.arrayUnion(t)}),t})).then((function(e){return b.collection("Member").doc(t).update({tags:s.a.firestore.FieldValue.arrayUnion(e)}),e})).then((function(e){console.log("tag add to :","un"+t,"value is",e),b.collection("articleFolders").doc("un"+t).update({tags:s.a.firestore.FieldValue.arrayUnion(e)})})).catch((function(e){console.error("Error adding document: ",e)}))):(console.log("user already has this tag, ADD ATICLE"),b.collection("Tags").doc(a).update({articles:s.a.firestore.FieldValue.arrayUnion(e)}),b.collection("Articles").doc(e).update({tags:s.a.firestore.FieldValue.arrayUnion(a)}))}))},y.deleteTagFromArticle=function(e,t,n){b.collection("Articles").doc(e).update({tags:s.a.firestore.FieldValue.arrayRemove(n)})},y.checkRSSInFetchList=function(e){return new Promise((function(t,n){console.log(e),b.collection("RSSFetchList").where("url","==",e).get().then((function(e){e.empty?(console.log("not in fetch list"),t(!1)):e.forEach((function(e){e.data()?(console.log("already id fetch list, the id is:"),t(e.data().id)):console.log("sth pretty weird happened")}))}))}))},y.addRSSToFetchList=function(e,t){return new Promise((function(n,a){b.collection("RSSFetchList").add({title:e.title||"null",url:t||"null",link:e.link||"null",description:e.description||"null",img:(e.image||{}).url||"null",lastUpdate:e.lastBuildDate||"null"}).then((function(e){return e.update({id:e.id}),e.id})).then((function(e){return n(e)}))}))},y.checkUserHasUncaFolder=function(e){return new Promise((function(t,n){console.log(e),b.collection("Member").doc(e).get().then((function(n){n.data().RSSFolders.includes("unCa_"+e)?t(!0):t(!1)}))}))},y.addRSSToMember=function(e,t){return new Promise(function(){var n=Object(N.a)(S.a.mark((function n(a,c){return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.checkUserHasUncaFolder(e);case 2:if(n.sent){n.next=7;break}console.log("user dont have unCat folder, create and as RSS to it "),b.collection("RSSFolders").doc("unCa_"+e).set({uid:e,name:"Uncategorized",RSS:s.a.firestore.FieldValue.arrayUnion(t),id:"unCa_"+e}).then((function(n){b.collection("Member").doc(e).update({subscribedRSS:s.a.firestore.FieldValue.arrayUnion(t),RSSFolders:s.a.firestore.FieldValue.arrayUnion("unCa_"+e)}).then(console.log("successfully add to user"))})),n.next=9;break;case 7:console.log("user already has unCat folder, as RSS to it "),b.collection("RSSFolders").doc("unCa_"+e).update({RSS:s.a.firestore.FieldValue.arrayUnion(t)}).then((function(n){b.collection("Member").doc(e).update({subscribedRSS:s.a.firestore.FieldValue.arrayUnion(t)}).then(console.log("successfully add to user"))}));case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},y.subscribeRSS=function(){var e=Object(N.a)(S.a.mark((function e(t,n,a,c){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("add to ",t,n,a),y.checkRSSInFetchList(a).then((function(e){e?(console.log("RSS already in Fetch List"),y.addRSSToMember(t,e)):(console.log("Add RSS to fetch List"),y.addRSSToFetchList(c,a).then((function(e){console.log("add RSS to member"),y.addRSSToMember(t,e),console.log("Add feed to RSSItem"),y.addRSSItem(c,e)})))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),y.checkRSSItem=function(e,t){return b.collection("RSSItem").where("title","==",e).get().then((function(e){var n=[];return e.forEach((function(e){n.push(e.data().itemTitle)})),console.log(n),console.log(t.title),console.log(n.includes(t.title)),n.includes(t.title)?(console.log("already in db"),!1):(console.log("check and not in db "),!0)}))},y.addRSSItem=function(e,t){var n=function(n){y.checkRSSItem(e.title,e.items[n]).then((function(a){console.log(a),a?(console.log("this feed not in db, let's save it "),b.collection("RSSItem").add({RSSId:t,content:e.items[n].content||"",contentSnippet:e.items[n].contentSnippet||"",RSS:e.title||"",title:e.items[n].title||"",creator:e.items[n].creator||"",guid:e.items[n].guid||"",isoDate:e.items[n].isoDate||"",link:e.items[n].link||"",pubDate:_()(e.items[n].pubDate).valueOf()||"",author:e.items[n].author||""}).then((function(e){return e.update({id:e.id})})).then(console.log("store successfully!"))):console.log("already store this feed, let's skip")}))};for(var a in e.items)n(a)},y.getMemberRSSFolders=function(e){return new Promise((function(t,n){b.collection("Member").doc(e).get().then(function(){var e=Object(N.a)(S.a.mark((function e(n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.data()){e.next=4;break}return e.delegateYield(S.a.mark((function e(){var a,c,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.data().RSSFolders,c=[],console.log(a),""===a||!a){e.next=12;break}e.t0=S.a.keys(a);case 5:if((e.t1=e.t0()).done){e.next=12;break}return r=e.t1.value,console.log(a[r]),e.next=10,b.collection("RSSFolders").doc(a[r]).get().then((function(e){c.push({id:e.data().id,name:e.data().name,RSSIds:e.data().RSS,RSS:[]})}));case 10:e.next=5;break;case 12:t(c);case 13:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:e.next=5;break;case 4:t("dont have this user");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},y.getRSSInfo=function(e){return new Promise((function(t,n){b.collection("RSSFetchList").doc(e).get().then(function(){var e=Object(N.a)(S.a.mark((function e(n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.data()&&t({id:n.data().id,title:n.data().title,url:n.data().url});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},y.getChannelFeeds=function(e){return new Promise((function(t,n){var a=[];b.collection("RSSItem").where("RSSId","==",e).get().then((function(e){e.forEach((function(e){a.push({RSSId:e.data().RSSId,content:e.data().content,contentSnippet:e.data().contentSnippet,RSS:e.data().RSS,title:e.data().title,creator:e.data().creator,guid:e.data().guid,isoDate:e.data().isoDate,link:e.data().link,pubDate:e.data().pubDate,author:e.data().author})})),t(a)}))}))},y.getFeedContent=function(e){return new Promise((function(t,n){b.collection("RSSItem").doc(e).get().then((function(e){t({RSSId:e.data().RSSId,content:e.data().content,contentSnippet:e.data().contentSnippet,RSS:e.data().RSS,title:e.data().tilte,creator:e.data().creator,guid:e.data().guid,isoDate:e.data().isoDate,link:e.data().link,pubDate:e.data().pubDate,author:e.data().author})}))}))},y.getGroupArticleFolders=function(e){return new Promise((function(t,n){b.collection("GroupBoard").doc(e).get().then(function(){var e=Object(N.a)(S.a.mark((function e(n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.data()){e.next=4;break}return e.delegateYield(S.a.mark((function e(){var a,c,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.data().articleFolders,c=[],console.log(a),""===a||!a){e.next=12;break}e.t0=S.a.keys(a);case 5:if((e.t1=e.t0()).done){e.next=12;break}return r=e.t1.value,console.log(a[r]),e.next=10,b.collection("articleFolders").doc(a[r]).get().then((function(e){c.push({id:e.data().id,name:e.data().name,tags:e.data().tags})}));case 10:e.next=5;break;case 12:t(c);case 13:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:e.next=5;break;case 4:t("dont have this user");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))};var k=n(422),F=n.n(k),I=n(440),T=n(16);n(615);function w(){var e=Object(c.useState)({}),t=Object(h.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)({}),i=Object(h.a)(o,2),s=i[0],d=i[1],u=Object(c.useState)(""),m=Object(h.a)(u,2),O=m[0],v=m[1],S=Object(l.g)().search,N=new URLSearchParams(S).get("id"),R=Object(T.d)((function(e){return e.memberReducer.user})),_={menu:function(e,t){return Object(f.a)(Object(f.a)({},e),{},{background:"black",borderBottom:"1px solid gray",color:"white",padding:10})},option:function(e,t){var n=t.data,a=t.isDisabled,c=t.isFocused,r=t.isSelected;return Object(f.a)(Object(f.a)({},e),{},{backgroundColor:a?null:r?n.color:c?"#dcdcdc":null,color:c?"#39382e":"#dcdcdc",cursor:a?"not-allowed":"default",":active":Object(f.a)(Object(f.a)({},e[":active"]),{},{backgroundColor:!a&&(r?n.color:"green")})})},control:function(e){return Object(f.a)(Object(f.a)({},e),{},{backgroundColor:"#121212",minWidth:"300px"})}};return Object(c.useEffect)((function(){R&&(console.log("useeffect run"),y.initArticleTags(N,R.uid).then((function(e){console.log(e),r(e)})))}),[R]),Object(c.useEffect)((function(){var e=function(){b.collection("Articles").doc(N).onSnapshot((function(e){void 0!==e.data()&&d({title:e.data().title,readerHtml:e.data().readerHtml})}))};return e(),function(){e()}}),[]),Object(a.jsxs)("div",{className:x.a.articleWrapper,children:[Object(a.jsx)("img",{"data-src":"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d072fabce4c74b95a416ced1d5743949~tplv-k3u1fbpfcp-zoom-1.image",alt:""}),Object(a.jsx)("div",{className:x.a.head,children:Object(a.jsx)(j.b,{to:"/board",children:Object(a.jsx)(g.a,{style:{color:"#FFFCEC"}})})}),Object(a.jsx)("div",{className:x.a.title,children:s.title}),Object(a.jsx)("div",{className:x.a.tagWrapper,children:Object(a.jsx)(I.a,{isMulti:!0,width:"200px",menuColor:"red",styles:_,onChange:function(e,t){switch(t.action){case"select-option":console.log("select option!"),y.inputTag(N,R.uid,t.option.label),r(Object(f.a)(Object(f.a)({},n),{},{values:e}));break;case"remove-value":y.deleteTagFromArticle(N,R.uid,t.removedValue.tagId),r(Object(f.a)(Object(f.a)({},n),{},{values:e}));break;default:console.group("Value Changed"),console.log("newvalueis ",e),console.dir("action: ".concat(t.action)),console.dir(t.removedValue),console.groupEnd()}},onCreateOption:function(e){console.group("Option created"),console.log(n),y.inputTag(N,R.uid,e),r({options:[].concat(Object(p.a)(n.options),[{label:e,value:e}]),values:[].concat(Object(p.a)(n.values),[{label:e,value:e}])}),console.log(n),console.groupEnd()},options:n.options,defaultValue:n.values,value:n.values})}),Object(a.jsxs)("div",{className:x.a.articleMain,children:[Object(a.jsx)("div",{className:x.a.articleBody,dangerouslySetInnerHTML:{__html:s.readerHtml}}),Object(a.jsxs)("div",{className:x.a.note,children:[Object(a.jsx)("div",{children:"Your Summary"}),Object(a.jsx)(F.a,{theme:"snow",value:O,onChange:function(e){v(e)}})]})]})]})}var C="http://localhost:3000/route/article/import";n(616);function E(e){var t=Object(c.useState)(""),n=Object(h.a)(t,2),r=n[0],o=n[1],i=Object(T.d)((function(e){return e.memberReducer.user}));return Object(a.jsxs)("div",{className:"addArticle",children:[Object(a.jsx)("input",{type:"text",name:"input",className:"input",value:r,onChange:function(e){return o(e.currentTarget.value)}}),Object(a.jsx)("button",{type:"submit",className:"add",onClick:function(e){i&&(e.preventDefault(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{url:"www.sylish.com",uid:"12344"};fetch(e,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){200===e.status?e.json().then((function(e){console.log(e)})):console.log("Looks like there was a problem. Status Code: "+e.status)})).catch((function(e){console.log("Fetch Error :-S",e)}))}(C,{url:r,uid:i.uid}))},children:"\u5132\u5b58\u6587\u7ae0"}),Object(a.jsx)("br",{})]})}n(427);n(319);var A=n(40),B=n.n(A),W=n(256),U=n.n(W);function M(){var e={callbacks:{signInSuccess:function(){var e=Object(N.a)(S.a.mark((function e(n,a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n.uid),console.log(a),e.next=4,b.collection("Member").doc(n.uid).set({uid:n.uid,email:n.email,displaynamename:n.displayName}).then((function(){return console.log("Add user to db successfully")})).then(t.push("board")).catch((function(e){e.code;var t=e.message;console.log(t)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},signInFlow:"popup",signInOptions:[s.a.auth.GoogleAuthProvider.PROVIDER_ID]},t=Object(l.f)(),n=Object(c.useState)(""),r=Object(h.a)(n,2),o=r[0],i=r[1],d=Object(c.useState)(""),p=Object(h.a)(d,2),f=p[0],m=p[1],g=Object(c.useState)(""),O=Object(h.a)(g,2),x=O[0],v=O[1];return Object(a.jsx)("div",{className:B.a.wrapper,children:Object(a.jsxs)("div",{className:B.a.block,children:[Object(a.jsx)("h2",{className:B.a.title,children:"Sign Up"}),Object(a.jsxs)("form",{className:B.a.form,onSubmit:function(e){e.preventDefault(),function(e,n,a){u.createUserWithEmailAndPassword(n,a).then((function(t){console.log(t.user),b.collection("Member").doc(t.user.uid).set({displaynamename:e,email:n,password:a,uid:t.user.uid})})).then((function(){u.currentUser.updateProfile({displayName:e}).then((function(){return console.log("update user name successfully")}))})).then(t.push("/board")).catch((function(e){e.code;var t=e.message;console.log(t)}))}(o,f,x)},children:[Object(a.jsxs)("div",{className:B.a.inputbox,children:[Object(a.jsx)("label",{htmlFor:"username",children:"User Name"}),Object(a.jsx)("input",{type:"text",name:"username",value:o,onChange:function(e){i(e.currentTarget.value)}})]}),Object(a.jsxs)("div",{className:B.a.inputbox,children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)("input",{type:"email",name:"email",value:f,onChange:function(e){m(e.currentTarget.value)}})]}),Object(a.jsxs)("div",{className:B.a.inputbox,children:[Object(a.jsx)("label",{htmlFor:"email",children:"Password"}),Object(a.jsx)("input",{type:"password",name:"passowrd",value:x,onChange:function(e){v(e.currentTarget.value)}})]}),Object(a.jsx)("button",{children:"Sign Up"})]}),Object(a.jsx)(U.a,{uiConfig:e,firebaseAuth:u}),Object(a.jsxs)("div",{className:B.a.login,children:[Object(a.jsx)("span",{children:"Already have an account? "}),Object(a.jsx)(j.b,{to:"/Signin",children:"Sign in"})]})]})})}var P=n(72);function L(){var e,t=Object(c.useState)(""),n=Object(h.a)(t,2),r=n[0],o=n[1],i=Object(c.useState)(""),s=Object(h.a)(i,2),d=s[0],b=s[1],j=Object(l.f)();return Object(a.jsx)("div",{className:B.a.wrapper,children:Object(a.jsxs)("div",(e={className:"block"},Object(P.a)(e,"className",B.a.block),Object(P.a)(e,"children",[Object(a.jsx)("h2",{className:B.a.title,children:"Sign In"}),Object(a.jsxs)("form",{className:B.a.form,onSubmit:function(e){e.preventDefault(),function(e,t){u.signInWithEmailAndPassword(e,t).then((function(e){console.log("you click sign in and successfully"),j.push("/board")})).catch((function(e){var t=e.code,n=e.message;console.log(t),console.log(n)}))}(r,d)},children:[Object(a.jsxs)("div",{className:B.a.inputbox,children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)("input",{type:"text",name:"email",value:r,onChange:function(e){o(e.currentTarget.value)}})]}),Object(a.jsxs)("div",{className:B.a.inputbox,children:[Object(a.jsx)("label",{htmlFor:"email",children:"Password"}),Object(a.jsx)("input",{type:"password",name:"passowrd",value:d,onChange:function(e){b(e.currentTarget.value)}})]}),Object(a.jsx)("button",{children:"Sign In"})]})]),e))})}var D=n(66),G=n.n(D),H=n(429),Y=n.n(H),V=n(430),z=n.n(V);function J(e){var t=document.createElement("div");t.innerHTML=e.htmlContent;var n=t.querySelector("img")?t.querySelector("img").src:null;return Object(a.jsx)("div",{className:G.a.container,children:Object(a.jsxs)("div",{className:G.a.card,children:[Object(a.jsx)(j.b,{to:"/article?id=".concat(e.id),className:G.a.color,children:Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:n,alt:"",className:G.a.img})})}),Object(a.jsxs)("div",{className:G.a.wordWrapper,children:[Object(a.jsxs)("div",{className:G.a.title,children:[Object(a.jsx)(j.b,{to:"/article?id=".concat(e.id),children:e.title}),Object(a.jsxs)("div",{className:G.a.actionContainer,children:[Object(a.jsx)(Y.a,{style:{fontSize:20,color:"#5B5B5B"}}),Object(a.jsx)(z.a,{style:{fontSize:20,color:"#5B5B5B"},className:G.a.delete,onClick:function(){var t;t=e.id,console.log(t),b.collection("Articles").doc(t).delete().then(console.log("Document successfully deleted!")).catch((function(e){console.error("Error delete document: ",e)}))}})]})]}),Object(a.jsx)(j.b,{to:"/article?id=".concat(e.id),children:Object(a.jsx)("div",{className:G.a.content,children:e.content})})]})]})})}n(623);function Q(){console.log("render once");var e=Object(T.d)((function(e){var t=[],n=e.articleReducer.articleList;if("all"===e.articleReducer.tagSelected)for(var c in n)t.push(Object(a.jsx)(J,{title:n[c].title,content:n[c].content,id:n[c].id,htmlContent:n[c].readerHtml},n[c].id));else if(e.articleReducer.tagSelected)for(var r in n)console.log(n),n[r].tags&&n[r].tags.includes(e.articleReducer.tagSelected)&&t.push(Object(a.jsx)(J,{title:n[r].title,content:n[r].content,id:n[r].id,htmlContent:n[r].readerHtml},n[r].id));return t}));return Object(a.jsx)("div",{className:"cardWrapper",children:e})}var X=n(431),q=n.n(X),K=function(e){return{type:"INITARTICLE",articleList:e}},Z=function(e){return{type:"SWITCHARTICLE",tagSelected:e}},$=function(e,t){return{type:"GETRSSRESPONSE",url:t,feed:e}},ee=function(e){return console.log("hihi"),{type:"SWITCHRSS",ChannelRSSId:e}},te=function(e){return{type:"GROUPINIT",groups:e}},ne=function(e,t){return{type:"INITGROUPSELECT",groupId:e,groupName:t}},ae=function(e,t){return{type:"SWITCHGROUPSELECT",groupId:e,groupName:t}};function ce(e){var t=Object(T.c)(),n=Object(T.d)((function(e){return e.memberReducer.user}));return Object(c.useEffect)((function(){var e;n&&(e=n.uid,b.collection("Articles").orderBy("date","desc").where("uid","==",e).onSnapshot((function(e){var n=[];e.forEach((function(e){n.push({title:e.data().title,content:e.data().markDown.slice(0,100),id:e.data().id,tags:e.data().tags,readerHtml:e.data().readerHtml})})),t(K(n))})))}),[n]),Object(a.jsxs)("div",{className:q.a.boardWrapper,children:[Object(a.jsx)(E,{className:"headMemberIcon",user:n}),Object(a.jsx)(Q,{})]})}n(624);function re(){var e=Object(T.c)(),t=Object(l.f)();return Object(c.useEffect)((function(){u.onAuthStateChanged((function(n){var a,c,r;n?(console.log(n),e((a=n.uid,c=n.displayName,r=n.email,{type:"SETMEMBER",uid:a,displayName:c,email:r}))):t.push("/signup")}))}),[e,t]),Object(a.jsx)("div",{})}var oe=n(15),ie=n.n(oe),se=n(891),le=n(894),de=n(92),ue=n.n(de),be=n(93),je=n.n(be),pe=n(893),fe=n(113),he=n.n(fe),me=n(91),ge=n.n(me),Oe=n(46),xe=n(81),ve=n.n(xe),Se=n(892),Ne=Object(se.a)({root:{background:"#4F4F4F"}});function Re(e){console.log("rerender la ");var t=Ne(),n=Object(c.useState)([]),r=Object(h.a)(n,2),o=(r[0],r[1],Object(T.c)()),i=e.folderTags;console.log("======================================"),console.log(i);var s=function(e){var n=[];if(e){var c=0,r=function(r){n.push(Object(a.jsx)(Oe.b,{draggableId:e[r].id,index:c,children:function(n){return Object(a.jsx)(pe.a,Object(f.a)(Object(f.a)(Object(f.a)({},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,nodeId:e[r].id,label:Object(a.jsxs)("div",{className:ie.a.labelWrapper,children:[Object(a.jsx)(ve.a,{style:{fontSize:20,color:"#5B5B5B"}}),e[r].label?Object(a.jsx)("div",{className:ie.a.labelTitle,children:e[r].label}):Object(a.jsx)(Se.a,{className:t.root,variant:"rect",width:100,height:12,animation:"pulse"})]}),onClick:function(){console.log(e[r].id),o(Z(e[r].id))}}),e[r].id)}},e[r].id)),c++};for(var i in e)r(i)}return n}(i);return Object(a.jsx)("div",{children:s})}var _e=Object(se.a)({root:{color:"#B5B5B5",flexGrow:1,maxWidth:400,marginBottom:"10px"}});function ye(){var e=_e(),t=Object(T.c)(),n=Object(c.useState)(""),r=Object(h.a)(n,2),i=r[0],l=r[1],d=Object(c.useState)(!1),u=Object(h.a)(d,2),m=u[0],g=u[1],O=Object(c.useState)(""),x=Object(h.a)(O,2),v=x[0],R=x[1],_=Object(c.useState)([]),k=Object(h.a)(_,2),F=k[0],I=k[1];console.log(F);var w=Object(T.d)((function(e){return e.memberReducer.user}));Object(c.useEffect)((function(){w&&y.getMemberArticleFolders(w.uid).then((function(e){return console.log(e),I(e),e})).then(function(){var e=Object(N.a)(S.a.mark((function e(t){var n,a,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=0;case 2:if(!(a<t.length)){e.next=11;break}return e.next=5,y.getMemberFolderTags(t[a].id);case 5:c=e.sent,console.log(c),n.push(Object(f.a)(Object(f.a)({},t[a]),{},{tags:c}));case 8:a++,e.next=2;break;case 11:return console.log(n),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){console.log(e),I(e)}))}),[w,i]);var C=function(e){console.log(e);var t=[];if(e.length>0){var n=function(n){console.log(e[n].tags),t.push(Object(a.jsx)(Oe.c,{droppableId:e[n].id,children:function(t){return Object(c.createElement)(pe.a,Object(f.a)(Object(f.a)({ref:t.innerRef},t.droppableProps),{},{key:e[n].id,nodeId:e[n].id,label:Object(a.jsxs)("div",{className:ie.a.labelWrapper,children:[Object(a.jsx)(ge.a,{style:{fontSize:20,color:"#5B5B5B"}}),Object(a.jsx)("div",{className:ie.a.labelTitle,children:e[n].name})]}),onClick:function(){console.log(e[n].id)}}),Object(a.jsx)(Re,{user:w,folderTags:e[n].tags},e[n].id),t.placeholder)}}))};for(var r in e)n(r)}return t}(F);return Object(a.jsx)("div",{className:ie.a.folderTabWrapper,children:Object(a.jsx)("div",{className:ie.a.folderTab,children:Object(a.jsxs)(j.b,{to:"/board",children:[Object(a.jsx)("div",{className:ie.a.sectionTitle,children:"My Board"}),Object(a.jsxs)(le.a,{className:e.root,defaultExpanded:[""],defaultCollapseIcon:Object(a.jsx)(ue.a,{}),defaultExpandIcon:Object(a.jsx)(je.a,{}),children:[Object(a.jsx)(pe.a,{nodeId:"tagAll",label:Object(a.jsx)("div",{className:ie.a.labelWrapper,children:Object(a.jsx)("div",{className:ie.a.labelTitle,children:"All"})}),onClick:function(){console.log("all"),t(Z("all"))}}),Object(a.jsx)(pe.a,{nodeId:"unTag",label:Object(a.jsxs)("div",{className:ie.a.labelWrapper,children:[Object(a.jsx)(he.a,{style:{fontSize:20,color:"#5B5B5B"}}),Object(a.jsx)("div",{className:ie.a.labelTitle,children:"Untaged"})]})}),Object(a.jsx)(Oe.a,{onDragEnd:function(e){var t=e.destination,n=e.source;if(e.draggableId,console.log(e),t)if(t.droppableId!==n.droppableId||t.index!==n.index){if(t.droppableId===n.droppableId){console.log("move inside same folder");var a=Object(p.a)(F);a.forEach((function(e){if(e.id===t.droppableId){console.log("hihi");var a=Object(p.a)(e.tags),c=Object(f.a)({},a[n.index]);console.log(c),a.splice(n.index,1),a.splice(t.index,0,c),console.log(a),e.tags=a;var r=[];a.forEach((function(e){r.push(e.id)})),console.log(r),b.collection("articleFolders").doc(t.droppableId).update({tags:r})}})),I(a),console.log(t.index,n.index),console.log(n.droppableId),console.log(t.droppableId)}if(t.droppableId!==n.droppableId){console.log("move to another folder");var c,r=Object(p.a)(F);r.forEach((function(e){if(e.id===n.droppableId){var t=Object(p.a)(e.tags);c=Object(f.a)({},t[n.index]),t.splice(n.index,1),e.tags=t;var a=[];t.forEach((function(e){a.push(e.id)})),console.log(a),b.collection("articleFolders").doc(n.droppableId).update({tags:a})}})),r.forEach((function(e){if(e.id===t.droppableId){var n=Object(p.a)(e.tags);n.splice(t.index,0,c),e.tags=n;var a=[];n.forEach((function(e){a.push(e.id)})),console.log(a),b.collection("articleFolders").doc(t.droppableId).update({tags:a})}})),I(r)}}else console.log("nothing should happended")},children:C})]}),m?Object(o.createPortal)(Object(a.jsxs)("div",{className:ie.a.popup,children:[Object(a.jsx)("div",{className:ie.a.blur,onClick:function(){g(!1)}}),Object(a.jsxs)("div",{className:ie.a.addFolder,children:[Object(a.jsx)("div",{className:ie.a.addTitle,children:"Add New Folder"}),Object(a.jsxs)("form",{id:"addForm",action:"",children:[Object(a.jsx)("input",{className:ie.a.input,type:"text",placeholder:"Folder Name",value:v,onChange:function(e){R(e.target.value)}}),Object(a.jsx)("button",{type:"submit",className:ie.a.saveBtn,form:"addForm",onClick:function(){var e,t;w?(e=v,t=w.uid,b.collection("articleFolders").add({name:e,uid:t}).then((function(e){return e.update({id:e.id}),e.id})).then((function(e){b.collection("Member").doc(t).update({articleFolders:s.a.firestore.FieldValue.arrayUnion(e)})})).then((function(){l(i+1)})),g(!1)):alert("Please login to add folder!")},children:"Save"}),Object(a.jsx)("button",{onClick:function(){g(!1)},className:ie.a.cancelBtn,children:"Cancel"})]})]})]}),document.body):"",Object(a.jsx)("div",{className:ie.a.subTitle,onClick:function(){g(!0)},children:"Add Folder"})]})})})}var ke=n(135),Fe=n.n(ke);function Ie(e){Object(T.c)();var t=Object(T.d)((function(e){return e.memberReducer.user}));return function(e){console.log(e);var n=[];if(e.length>0){var r=function(r){console.log(e[r].tags),n.push(Object(a.jsx)(Oe.c,{droppableId:e[r].id,children:function(n){return Object(c.createElement)(pe.a,Object(f.a)(Object(f.a)({ref:n.innerRef},n.droppableProps),{},{key:e[r].id,nodeId:e[r].id,label:Object(a.jsxs)("div",{className:ie.a.labelWrapper,children:[Object(a.jsx)(ge.a,{style:{fontSize:20,color:"#5B5B5B"}}),Object(a.jsx)("div",{className:ie.a.labelTitle,children:e[r].name})]}),onClick:function(){console.log(e[r].id)}}),Object(a.jsx)(Re,{user:t,folderTags:e[r].tags},e[r].id),n.placeholder)}}))};for(var o in e)r(o)}return n}(e.folders)}var Te=Object(se.a)({root:{color:"#B5B5B5",flexGrow:1,maxWidth:400,marginBottom:"10px"}});function we(){var e=Te(),t=Object(T.c)(),n=Object(c.useState)(""),r=Object(h.a)(n,2),i=r[0],l=r[1],d=Object(c.useState)(!1),u=Object(h.a)(d,2),j=u[0],m=u[1],g=Object(c.useState)(!1),O=Object(h.a)(g,2),x=O[0],v=O[1],R=Object(c.useState)(""),_=Object(h.a)(R,2),k=_[0],F=_[1],I=Object(c.useState)(""),w=Object(h.a)(I,2),C=w[0],E=w[1],A=Object(c.useState)([]),B=Object(h.a)(A,2),W=B[0],U=B[1];console.log(W);var M=Object(T.d)((function(e){return e.groupReducer.groups})),P=Object(T.d)((function(e){return e.memberReducer.user}));function L(e){var t=e.destination,n=e.source;e.draggableId;if(console.log(e),t)if(t.droppableId!==n.droppableId||t.index!==n.index){if(t.droppableId===n.droppableId){console.log("move inside same folder");var a=Object(p.a)(W);a.forEach((function(e){if(e.id===t.droppableId){console.log("hihi");var a=Object(p.a)(e.tags),c=Object(f.a)({},a[n.index]);console.log(c),a.splice(n.index,1),a.splice(t.index,0,c),console.log(a),e.tags=a;var r=[];a.forEach((function(e){r.push(e.id)})),console.log(r),b.collection("articleFolders").doc(t.droppableId).update({tags:r})}})),U(a),console.log(t.index,n.index),console.log(n.droppableId),console.log(t.droppableId)}if(t.droppableId!==n.droppableId){console.log("move to another folder");var c,r=Object(p.a)(W);r.forEach((function(e){if(e.id===n.droppableId){var t=Object(p.a)(e.tags);c=Object(f.a)({},t[n.index]),t.splice(n.index,1),e.tags=t;var a=[];t.forEach((function(e){a.push(e.id)})),console.log(a),b.collection("articleFolders").doc(n.droppableId).update({tags:a})}})),r.forEach((function(e){if(e.id===t.droppableId){var n=Object(p.a)(e.tags);n.splice(t.index,0,c),e.tags=n;var a=[];n.forEach((function(e){a.push(e.id)})),console.log(a),b.collection("articleFolders").doc(t.droppableId).update({tags:a})}})),U(r)}}else console.log("nothing should happended")}Object(c.useEffect)((function(){function e(e){return b.collection("Member").doc(e.uid).get().then((function(e){return console.log(e.data()),e.data().board}))}function n(e){return console.log(e),b.collection("GroupBoard").doc(e).get().then((function(e){return{id:e.data().id,name:e.data().name,articleFolders:e.data().articleFolders}}))}function a(){return(a=Object(N.a)(S.a.mark((function a(c){var r,o,i,s,l,d;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(c);case 2:r=a.sent,o={},console.log(r),a.t0=S.a.keys(r);case 6:if((a.t1=a.t0()).done){a.next=14;break}return i=a.t1.value,a.next=10,n(r[i]);case 10:s=a.sent,o[r[i]]=s,a.next=6;break;case 14:console.log(o),t(ne(o[Object.keys(o)[0]].id,o[Object.keys(o)[0]].name)),l=S.a.mark((function e(t){var a,c,i,s,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(r[t]);case 2:return a=e.sent,e.next=5,y.getGroupArticleFolders(r[t]);case 5:return c=e.sent,console.log(c),i=c.map(function(){var e=Object(N.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getMemberFolderTags(t.id);case 2:return n=e.sent,t.tags=n,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=10,Promise.all(i).then((function(e){return a.articleFolders=e,a}));case 10:s=e.sent,console.log(s),l=r[t],o[l]=s,console.log(o);case 15:case"end":return e.stop()}}),e)})),a.t2=S.a.keys(r);case 18:if((a.t3=a.t2()).done){a.next=23;break}return d=a.t3.value,a.delegateYield(l(d),"t4",21);case 21:a.next=18;break;case 23:console.log(o),t(te(o));case 25:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function c(){return(c=Object(N.a)(S.a.mark((function a(c,r){var o,i,s,l,d,u;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(c);case 2:o=a.sent,i={},console.log(o),a.t0=S.a.keys(o);case 6:if((a.t1=a.t0()).done){a.next=14;break}return s=a.t1.value,a.next=10,n(o[s]);case 10:l=a.sent,i[o[s]]=l,a.next=6;break;case 14:console.log(i),console.log(r),t(ae(i[r].id,i[r].name)),d=S.a.mark((function e(t){var a,c,r,s,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(o[t]);case 2:return a=e.sent,e.next=5,y.getGroupArticleFolders(o[t]);case 5:return c=e.sent,console.log(c),r=c.map(function(){var e=Object(N.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getMemberFolderTags(t.id);case 2:return n=e.sent,t.tags=n,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=10,Promise.all(r).then((function(e){return a.articleFolders=e,a}));case 10:s=e.sent,console.log(s),l=o[t],i[l]=s,console.log(i);case 15:case"end":return e.stop()}}),e)})),a.t2=S.a.keys(o);case 19:if((a.t3=a.t2()).done){a.next=24;break}return u=a.t3.value,a.delegateYield(d(u),"t4",22);case 22:a.next=19;break;case 24:console.log(i),t(te(i));case 26:case"end":return a.stop()}}),a)})))).apply(this,arguments)}i?function(e,t){return c.apply(this,arguments)}(P,i).then((function(){})):P&&function(e){return a.apply(this,arguments)}(P).then((function(e){}))}),[P,i]);var D=function(n){var c=[];console.log(n);var r=function(r){console.log(n[r]),c.push(Object(a.jsx)(le.a,{className:e.root,defaultExpanded:[""],defaultCollapseIcon:Object(a.jsx)(ue.a,{}),defaultExpandIcon:Object(a.jsx)(je.a,{}),onClick:function(){console.log(n[r].name),t(ae(r,n[r].name))},children:Object(a.jsxs)(pe.a,{nodeId:n[r].name,label:Object(a.jsxs)("div",{className:ie.a.labelWrapper,children:[Object(a.jsx)(Fe.a,{}),Object(a.jsx)("div",{className:ie.a.labelTitle,children:n[r].name})]}),onClick:function(){console.log("all"),t(Z("all"))},children:[Object(a.jsx)(pe.a,{nodeId:"tagAll_"+n[r].name,label:Object(a.jsx)("div",{className:ie.a.labelWrapper,children:Object(a.jsx)("div",{className:ie.a.labelTitle,children:"All"})}),onClick:function(){console.log("all"),t(Z("all"))}}),Object(a.jsx)(pe.a,{nodeId:"unTag2",label:Object(a.jsxs)("div",{className:ie.a.labelWrapper,children:[Object(a.jsx)(he.a,{style:{fontSize:20,color:"#5B5B5B"}}),Object(a.jsx)("div",{className:ie.a.labelTitle,children:"Untaged"})]})}),Object(a.jsx)(Oe.a,{onDragEnd:L,children:Object(a.jsx)(Ie,{folders:n[r].articleFolders})}),Object(a.jsx)("div",{className:ie.a.subTitle,onClick:function(){m(!0)},children:"Add Folder"})]})}))};for(var o in n)r(o);return c}(M);return Object(a.jsx)("div",{className:ie.a.folderTabWrapper,children:Object(a.jsxs)("div",{className:ie.a.folderTab,children:[Object(a.jsx)("div",{className:ie.a.sectionTitle,children:"Group Boards"}),Object(a.jsx)("div",{className:ie.a.subTitle,onClick:function(){v(!0)},children:"Create New Group"}),D,j?Object(o.createPortal)(Object(a.jsxs)("div",{className:ie.a.popup,children:[Object(a.jsx)("div",{className:ie.a.blur,onClick:function(){m(!1)}}),Object(a.jsxs)("div",{className:ie.a.addFolder,children:[Object(a.jsx)("div",{className:ie.a.addTitle,children:"Add New Folder"}),Object(a.jsxs)("form",{id:"addForm",action:"",children:[Object(a.jsx)("input",{className:ie.a.input,type:"text",placeholder:"Folder Name",value:C,onChange:function(e){E(e.target.value)}}),Object(a.jsx)("button",{type:"submit",className:ie.a.saveBtn,form:"addForm",onClick:function(){var e,t;P?(e=C,t=P.uid,b.collection("articleFolders").add({name:e,uid:t}).then((function(e){return e.update({id:e.id}),e.id})).then((function(e){b.collection("Member").doc(t).update({articleFolders:s.a.firestore.FieldValue.arrayUnion(e)})})),m(!1)):alert("Please login to add folder!")},children:"Save"}),Object(a.jsx)("button",{onClick:function(){m(!1)},className:ie.a.cancelBtn,children:"Cancel"})]})]})]}),document.body):"",x?Object(o.createPortal)(Object(a.jsxs)("div",{className:ie.a.popup,children:[Object(a.jsx)("div",{className:ie.a.blur,onClick:function(){v(!1)}}),Object(a.jsxs)("div",{className:ie.a.addFolder,children:[Object(a.jsx)("div",{className:ie.a.addTitle,children:"Create New Group Board"}),Object(a.jsxs)("form",{id:"addForm",action:"",children:[Object(a.jsx)("input",{className:ie.a.input,type:"text",placeholder:"Group Board Name",value:k,onChange:function(e){F(e.target.value)}}),Object(a.jsx)("button",{type:"submit",className:ie.a.saveBtn,form:"addForm",onClick:function(){var e,t;P?(e=k,t=P.uid,b.collection("GroupBoard").add({name:e,member:[t]}).then((function(e){return e.update({id:e.id,articleFolders:["un"+e.id]}),e.id})).then((function(e){return b.collection("Member").doc(t).update({board:s.a.firestore.FieldValue.arrayUnion(e)}),e})).then((function(e){return b.collection("articleFolders").doc("un"+e).set({id:"un"+e,name:"Uncategorized"}),e})).then((function(e){l(e)})),v(!1)):alert("Please login to add group!")},children:"Save"}),Object(a.jsx)("button",{onClick:function(){v(!1)},className:ie.a.cancelBtn,children:"Cancel"})]})]})]}),document.body):""]})})}var Ce=n(97),Ee=n.n(Ce),Ae=n(433),Be=n.n(Ae),We=n(432),Ue=n.n(We);function Me(e){var t=Object(T.c)(),n=Object(c.useState)(!1),r=Object(h.a)(n,2),o=r[0],i=r[1],s=Object(T.d)((function(e){return e.memberReducer.user})),l=Object(T.d)((function(e){return e.groupReducer.groupId})),d=Object(T.d)((function(e){return e.groupReducer.groupName}));return Object(c.useEffect)((function(){var e;l&&(e=l,b.collection("Articles").orderBy("date","desc").where("uid","==",e).onSnapshot((function(e){var n=[];e.forEach((function(e){n.push({title:e.data().title,content:e.data().markDown.slice(0,100),id:e.data().id,tags:e.data().tags,readerHtml:e.data().readerHtml})})),console.log(n),t(K(n))})))}),[l]),Object(a.jsxs)("div",{className:Ee.a.boardWrapper,onClick:function(){i(!1)},children:[Object(a.jsx)(E,{className:"headMemberIcon",user:s}),Object(a.jsxs)("div",{className:Ee.a.titleWrapper,children:[Object(a.jsx)("div",{className:Ee.a.title,children:d}),Object(a.jsxs)("div",{className:Ee.a.actionList,children:[Object(a.jsx)(Ue.a,{}),Object(a.jsx)(Be.a,{onClick:function(e){e.stopPropagation(),i(!0),console.log(o)}}),o?Object(a.jsxs)("div",{className:Ee.a.addMemberWrapper,onClick:function(e){e.stopPropagation()},children:[Object(a.jsx)("div",{children:"Add New Member"}),Object(a.jsx)("form",{action:"",children:Object(a.jsx)("input",{type:"text"})}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:Ee.a.memberWrapper,children:[Object(a.jsx)("div",{children:"kevin@gmail.com"}),Object(a.jsx)("button",{children:"Add"})]})]}):""]})]}),Object(a.jsx)(Q,{})]})}var Pe=n(61);y.getGraphData=function(e){return new Promise(function(){var t=Object(N.a)(S.a.mark((function t(n){var a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.getMemberTags(e);case 2:a=t.sent,console.log("2"),n(a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},y.initGraphData=function(e){return new Promise((function(t){y.getGraphData(e).then((function(e){console.log(e);var t=[];return e.forEach((function(e){t.push({id:e.value,tagId:e.id})})),t})).then((function(e){t({nodes:e,links:[]})}))}))};var Le=n(434),De=n.n(Le);function Ge(){var e=Object(T.c)(),t=Object(T.d)((function(e){return e.memberReducer.user})),n=Object(c.useState)({}),o=Object(h.a)(n,2),i=o[0],s=o[1];var l=function(e,t){var n=r.a.useRef();return r.a.useEffect((function(){return console.log(n.current),e(Pe.h(n.current)),function(){}}),t),n}((function(t){if(i.nodes){var n=i.links.map((function(e){return Object.create(e)})),a=i.nodes.map((function(e){return Object.create(e)})),c=Pe.e(a).force("link",Pe.c(n).id((function(e){return e.id}))).force("charge",Pe.d().strength(-500).distanceMax([500])).force("center",Pe.b(200,500)),r=t.append("g").attr("stroke","#999").attr("stroke-opacity",.6).selectAll("line").data(n).join("line").attr("stroke-width",(function(e){return Math.sqrt(e.value)})),o=t.append("g").attr("stroke-linecap","round").attr("stroke-linejoin","round").selectAll("g").data(a).join("g").call(function(e){return Pe.a().on("start",(function(t){t.active||e.alphaTarget(.3).restart(),t.subject.fx=t.subject.x,t.subject.fy=t.subject.y})).on("drag",(function(e){e.subject.fx=e.x,e.subject.fy=e.y})).on("end",(function(t){t.active||e.alphaTarget(0),t.subject.fx=null,t.subject.fy=null}))}(c)),s=o.append("circle").attr("stroke-width",1.5).attr("r",5).attr("fill","#4F4F4F"),l=o.append("text").text((function(e){return e.id})).clone(!0).lower().attr("stroke-width",.5).attr("stroke","white").attr("fill","white").attr("id",(function(e){return e.tagId})).on("click",(function(t){console.log(t),console.log(t.target.id),e(Z(t.target.id))}));o.append("title").text((function(e){return e.id})),c.on("tick",(function(){r.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),s.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),l.attr("x",(function(e){return e.x+10})).attr("y",(function(e){return e.y}))}))}return t.node()}),[i]),d=Object(T.d)((function(e){return console.log(e),e.articleReducer.articleList}));function u(e){var t=function(e){for(var t=[],n=0;n<e.length-1;n++)for(var a=n+1;a<e.length;a++)t.push([e[n],e[a]]);return t}(e);return console.warn(d),function(e,t){console.error(e);var n=[];console.log(t);for(var a=function(a){var c=0;e.forEach((function(e){e.tags&&e.tags.includes(t[a][0].id)&&e.tags.includes(t[a][1].id)&&(c+=1)})),n.push({source:t[a][0].label,target:t[a][1].label,value:c})},c=0;c<t.length;c++)a(c);return n}(d,t)}function b(e){return new Promise((function(t){(function(e){return new Promise(function(){var t=Object(N.a)(S.a.mark((function t(n){var a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.getMemberTags(e);case 2:a=t.sent,n(a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})(e).then((function(e){var t=u(e),n=[];return e.forEach((function(e){n.push({id:e.value,tagId:e.id})})),console.log(t),[n,t]})).then((function(e){var n=Object(h.a)(e,2),a=n[0],c=n[1];t({nodes:a,links:c})}))}))}return Object(c.useEffect)((function(){t&&d[0]&&(console.log(d),console.log(t),b(t.uid).then((function(e){console.log("lets set dat=============================a"),console.log(e),s(e)})))}),[t,d]),Object(a.jsx)("div",{className:De.a.graphWrapper,children:Object(a.jsxs)("svg",{ref:l,style:{height:1e3,width:"100%",marginRight:"20px",marginLeft:"0px"},children:[Object(a.jsx)("g",{className:"plot-area"}),Object(a.jsx)("g",{className:"x-axis"}),Object(a.jsx)("g",{className:"y-axis"})]})})}var He=n(176),Ye=n.n(He),Ve=n(175),ze=n.n(Ve),Je=n(174),Qe=n.n(Je);n(260);function Xe(e){var t=Object(c.useState)([]),n=Object(h.a)(t,2),r=(n[0],n[1],Object(T.c)());e.user;var o=function(e){var t=[];if(e.length>0){var n=0,c=function(c){console.log(e[c]),t.push(Object(a.jsx)(Oe.b,{draggableId:e[c].id,index:n,children:function(t){return Object(a.jsx)("div",Object(f.a)(Object(f.a)(Object(f.a)({},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:Object(a.jsx)(pe.a,{nodeId:e[c].id,label:Object(a.jsxs)("div",{className:ie.a.labelWrapper,children:[Object(a.jsx)(ve.a,{style:{fontSize:20}}),Object(a.jsx)("div",{className:ie.a.labelTitle,children:e[c].title})]}),onClick:function(){console.log(e[c].id),r(ee(e[c].id))}},e[c].id)}))}},e[c].id)),n++};for(var o in e)c(o)}return t}(e.folderRSS);return Object(a.jsx)("div",{children:o})}var qe=Object(se.a)({root:{color:"#B5B5B5",flexGrow:10,maxWidth:220,marginBottom:"10px"}});function Ke(){var e=qe(),t=Object(T.c)(),n=Object(c.useState)(""),r=Object(h.a)(n,2),i=r[0],l=r[1],d=Object(c.useState)(!1),u=Object(h.a)(d,2),m=u[0],g=u[1],O=Object(c.useState)([]),x=Object(h.a)(O,2),v=x[0],R=x[1];var _=Object(T.d)((function(e){return e.memberReducer.user})),k=Object(T.d)((function(e){return e.RSSReducer.UserRSSList}));Object(c.useEffect)((function(){}),[k]),Object(c.useEffect)((function(){var e;_&&(e=_.uid,b.collection("Member").doc(e).get().then((function(e){t({type:"INITUSERRSSLIST",RSSList:e.data().subscribedRSS})}))),_&&y.getMemberRSSFolders(_.uid).then((function(e){return R(e),e})).then((function(e){e.forEach(function(){var e=Object(N.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.RSSIds){e.next=3;break}return e.next=3,t.RSSIds.forEach(function(){var e=Object(N.a)(S.a.mark((function e(n){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getRSSInfo(n);case 2:a=e.sent,t.RSS.push(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R(e)}))}),[_]),console.log(v);var F=function(e){var t=[];if(e.length>0){var n=function(n){t.push(Object(a.jsx)(Oe.c,{droppableId:e[n].id,children:function(t){return Object(c.createElement)(pe.a,Object(f.a)(Object(f.a)({ref:t.innerRef},t.droppableProps),{},{key:e[n].id,nodeId:e[n].id,label:Object(a.jsxs)("div",{className:ie.a.labelWrapper,children:[Object(a.jsx)(ge.a,{style:{fontSize:20}}),Object(a.jsx)("div",{className:ie.a.labelTitle,children:e[n].name})]}),onClick:function(){}}),Object(a.jsx)(Xe,{user:_,folderId:e[n].id,folderRSS:e[n].RSS}),t.placeholder)}}))};for(var r in e)n(r)}return t}(v);return Object(a.jsx)("div",{className:ie.a.folderTabWrapper,children:Object(a.jsxs)("div",{className:ie.a.folderTab,children:[Object(a.jsxs)(j.b,{to:"/rss",children:[Object(a.jsx)("div",{className:ie.a.sectionTitle,children:"RSS"}),Object(a.jsxs)(le.a,{className:e.root,defaultExpanded:[""],defaultCollapseIcon:Object(a.jsx)(ue.a,{}),defaultExpandIcon:Object(a.jsx)(je.a,{}),children:[Object(a.jsx)(pe.a,{nodeId:"tagAll",label:Object(a.jsx)("div",{className:ie.a.labelWrapper,children:Object(a.jsx)("div",{className:ie.a.labelTitle,children:"All Feeds"})}),onClick:function(){t(ee("all"))}}),Object(a.jsx)(Oe.a,{onDragEnd:function(e){var t=e.destination,n=e.source;if(e.draggableId,console.log(e),t)if(t.droppableId!==n.droppableId||t.index!==n.index){if(t.droppableId===n.droppableId){console.log("move inside same folder");var a,c=Object(p.a)(v);c.forEach((function(e){if(e.id===t.droppableId){var c=e.RSSIds[n.index];(a=Object(p.a)(e.RSSIds)).splice(n.index,1),a.splice(t.index,0,c),console.log(a);var r=e.RSS[n.index];e.RSS.splice(n.index,1),e.RSS.splice(t.index,0,r),e.RSSIds=a}})),console.log(c),b.collection("RSSFolders").doc(t.droppableId).update({RSS:a}),R(c),console.log(t.index,n.index),console.log(n.droppableId),console.log(t.droppableId)}if(t.droppableId!==n.droppableId){console.log("move to another folder");var r,o,i,s,l=Object(p.a)(v);l.forEach((function(e){e.id===n.droppableId&&(r=e.RSSIds[n.index],o=e.RSS[n.index],(i=Object(p.a)(e.RSSIds)).splice(n.index,1),e.RSS.splice(n.index,1),e.RSSIds=i,b.collection("RSSFolders").doc(n.droppableId).update({RSS:i}))})),l.forEach((function(e){e.id===t.droppableId&&((s=Object(p.a)(e.RSSIds)).splice(t.index,0,r),e.RSS.splice(t.index,0,o),e.RSSIds=s,b.collection("RSSFolders").doc(t.droppableId).update({RSS:s}))})),R(l)}}else console.log("nothing should happended")},children:F})]})]}),Object(a.jsx)(j.b,{to:"/rssexplore",children:Object(a.jsx)("div",{className:ie.a.subTitle,children:"Follow New Source"})}),Object(a.jsx)("div",{className:ie.a.subTitle,onClick:function(){g(!0)},children:"Add New Folder"}),m?Object(o.createPortal)(Object(a.jsxs)("div",{className:ie.a.popup,children:[Object(a.jsx)("div",{className:ie.a.blur,onClick:function(){g(!1)}}),Object(a.jsxs)("div",{className:ie.a.addFolder,children:[Object(a.jsx)("div",{className:ie.a.addTitle,children:"Add New Folder"}),Object(a.jsxs)("form",{id:"addForm",action:"",children:[Object(a.jsx)("input",{className:ie.a.input,type:"text",placeholder:"Folder Name",value:i,onChange:function(e){l(e.target.value)}}),Object(a.jsx)("button",{type:"submit",className:ie.a.saveBtn,form:"addForm",onClick:function(){var e,t;_?(e=i,t=_.uid,b.collection("RSSFolders").add({name:e,uid:t}).then((function(e){return e.update({id:e.id}),e.id})).then((function(e){b.collection("Member").doc(t).update({RSSFolders:s.a.firestore.FieldValue.arrayUnion(e)})})),g(!1)):alert("Please login to add folder!")},children:"Save"}),Object(a.jsx)("button",{onClick:function(){g(!1)},className:ie.a.cancelBtn,children:"Cancel"})]})]})]}),document.body):""]})})}var Ze=n(73),$e=n.n(Ze);function et(e){var t,n=document.createElement("div");return n.innerHTML=e.item.content,n.querySelector("img")&&(t=n.querySelector("img").src),Object(a.jsx)("div",{className:$e.a.container,onClick:e.onClick,children:Object(a.jsxs)("div",{className:$e.a.card,children:[Object(a.jsx)("div",{className:$e.a.color,children:Object(a.jsx)("img",{src:t,alt:"",className:$e.a.img})}),Object(a.jsxs)("div",{className:$e.a.wordWrapper,children:[Object(a.jsx)("div",{className:$e.a.title,children:e.item.title}),Object(a.jsx)("div",{className:$e.a.creator,children:e.item.creator}),Object(a.jsx)("div",{className:$e.a.content,children:e.item.contentSnippet})]})]})})}var tt=n(18),nt=n.n(tt),at=n(435),ct=n.n(at),rt=n(139),ot=n.n(rt);function it(e){console.log("page rerender, props is ",e.item);var t=Object(c.useState)({}),n=Object(h.a)(t,2),r=n[0],o=n[1],i=Object(l.g)().search,s=(new URLSearchParams(i),Object(T.d)((function(e){return e.memberReducer.user})));return Object(c.useEffect)((function(){e.item?(console.log(e.item),o(e.item)):console.log("this is in else ...run")}),[e.item]),console.log(r),Object(a.jsxs)("div",{className:ot.a.page,children:[Object(a.jsxs)("div",{className:ot.a.head,children:[Object(a.jsx)(g.a,{style:{color:"#FFFCEC",cursor:"pointer"},onClick:e.onClick}),Object(a.jsx)(ct.a,{onClick:function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{url:"www.sylish.com",uid:"12344"};fetch(e,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){200===e.status?e.json().then((function(e){console.log(e),alert(e.msg)})):console.log("Looks like there was a problem. Status Code: "+e.status)})).catch((function(e){console.log("Fetch Error :-S",e)}))}(C,{url:r.link,uid:s.uid})}})]}),Object(a.jsx)("div",{className:ot.a.title,children:r.title}),Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:r.content},className:ot.a.content})]})}n(808);function st(e){var t=Object(c.useState)([]),n=Object(h.a)(t,2),r=n[0],o=n[1],i=Object(c.useState)({}),s=Object(h.a)(i,2),l=s[0],d=s[1],u=Object(c.useState)(0),j=Object(h.a)(u,2),f=j[0],m=j[1],g=Object(c.useState)(!1),O=Object(h.a)(g,2),x=O[0],v=O[1],R=Object(c.useState)(""),_=Object(h.a)(R,2),k=_[0],F=_[1],I=Object(c.useState)(""),w=Object(h.a)(I,2),C=w[0],E=w[1],A=(Object(c.useRef)(f),Object(T.c)(),Object(T.d)((function(e){return e.RSSReducer.UserRSSList})));Object(T.d)((function(e){return e.memberReducer.user}));var B,W=Object(T.d)((function(e){return e.RSSReducer.ChannelRSSId}));function U(){return(U=Object(N.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=10;break}return console.log(W),e.next=4,y.getRSSInfo(W);case 4:return n=e.sent,e.next=7,y.getChannelFeeds(W);case 7:t=e.sent,console.log(n,t),d({RSS:n,items:t});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){var e=function(){(document.body.scrollTop||document.documentElement.scrollTop)>document.documentElement.scrollHeight-document.documentElement.clientHeight-20&&(console.log("reach the bottom!",f),m(f+7))};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[f]),Object(c.useEffect)((function(){console.log(f),A&&function(e,t){console.log(e),0===t?(console.log("last visible equal zero!"),b.collection("RSSItem").orderBy("pubDate","desc").limit(15).get().then((function(t){console.log("batchfetch start");var n=Object(p.a)(r);t.forEach((function(t){e.includes(t.data().RSSId)&&n.push(t.data())})),E(t.docs[14]),console.log("finsih loop"),o(n),console.log("se set items as ",n)}))):C&&(console.log("else start, the last visible is",t),b.collection("RSSItem").orderBy("pubDate","desc").startAfter(C).limit(7).get().then((function(t){var n=Object(p.a)(r);t.forEach((function(t){e.includes(t.data().RSSId)&&n.push(t.data())})),E(t.docs[t.docs.length-1]),o(n)})))}(A,f)}),[A,f]),Object(c.useEffect)((function(){!function(){U.apply(this,arguments)}()}),[W]),"all"===W?(console.log("channel id is all"),console.log(r),B=function(e){if(e){var t=[],n=function(n){t.push(Object(a.jsx)(et,{item:e[n],onClick:function(t){v(!0),F(e[n])}}))};for(var c in e)n(c);return Object(a.jsxs)("div",{className:nt.a.board,children:[Object(a.jsx)("h1",{className:nt.a.title,children:"Your Daily Feeds"}),Object(a.jsx)("div",{className:nt.a.content,children:"Dont scroll fb! Lets read feeds~"}),t]})}return Object(a.jsxs)("div",{className:nt.a.board,children:[Object(a.jsx)("h1",{className:nt.a.title,children:"Your Daily Feeds"}),Object(a.jsx)("div",{className:nt.a.content,children:"You dont have any feed"}),Object(a.jsx)("div",{children:"You dont have any feed"})]})}(r)):W&&(B=function(){if(l.items){var e=function(){console.log(l);var e=l.items,t=l.RSS,n=[],c=function(t){console.log(e[t]),n.push(Object(a.jsx)(et,{item:e[t],onClick:function(n){console.log("hihi"),v(!0),F(e[t])}}))};for(var r in e)c(r);return{v:Object(a.jsxs)("div",{className:nt.a.board,children:[Object(a.jsx)("h1",{className:nt.a.title,children:t.title}),Object(a.jsx)("div",{className:nt.a.content,dangerouslySetInnerHTML:{__html:t.description}}),n]})}}();if("object"===typeof e)return e.v}}());var M=function(e){return Object(a.jsx)(it,{item:e,onClick:function(){v(!1)}})}(k);return Object(a.jsxs)("div",{className:nt.a.boardWrapper,children:[B,x?Object(a.jsxs)("div",{className:nt.a.popup,children:[Object(a.jsx)("div",{className:nt.a.blur,onClick:function(){v(!1)}}),M]}):""]})}var lt=n(116),dt=n.n(lt),ut=n(436);n(855);function bt(e){var t=Object(c.useState)(""),n=Object(h.a)(t,2),r=n[0],o=n[1],i=Object(T.c)(),s=Object(T.d)((function(e){return e.memberReducer.user}));return Object(a.jsxs)("div",{className:dt.a.addArticle,children:[Object(a.jsx)("div",{class:dt.a.addTitle,children:"Add new source to reach this world"}),Object(a.jsxs)("form",{className:dt.a.addForm,action:"",onSubmit:function(e){var t;e.preventDefault(),s&&(t=r,(new ut).parseURL("https://cors-anywhere.herokuapp.com/"+t,(function(e,n){e?fetch("http://localhost:3000/route/rss/fetch",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})}).then((function(e){200!==e.status?console.log("sth goes wrong in backend "):e.json().then((function(e){i($(e.rss,t))}))})):(console.log(n),console.log(n.title),i($(n,t)),n.items.forEach((function(e){console.log(e.title+":"+e.link)})))})))},children:[Object(a.jsx)("input",{type:"text",name:"input",className:dt.a.input,value:r,onChange:function(e){return o(e.currentTarget.value)}}),Object(a.jsx)("button",{type:"submit",className:dt.a.add,children:"\u641c\u5c0b"})]})]})}var jt="data:image/png;base64,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";function pt(e){var t=Object(c.useState)(!1),n=Object(h.a)(t,2),r=n[0],o=n[1],i=Object(c.useState)(""),s=Object(h.a)(i,2),l=s[0],d=s[1],u=Object(T.c)();console.log("rerender");var j=Object(T.d)((function(e){return e.memberReducer.user}));var p=Object(T.d)((function(e){return console.log("hihi"),e.RSSReducer.ChannelRSSId}));console.log("rerender channelid is ",p);var f=Object(T.d)((function(e){return e.RSSReducer.feed})),m=Object(T.d)((function(e){return e.RSSReducer.url}));var g=function(e){return console.log("redner run again"),console.log(e),Object(a.jsx)(it,{item:e,onClick:function(){o(!1)}})}(l),O=function(e){var t=[],n=function(n){t.push(Object(a.jsx)(et,{item:e.items[n],onClick:function(t){console.log("hihi"),o(!0),d(e.items[n])}}))};for(var c in e.items)n(c);return Object(a.jsxs)("div",{className:nt.a.board,children:[Object(a.jsx)("h1",{className:nt.a.title,children:e.title}),Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:e.description}}),e.title?Object(a.jsx)("button",{className:nt.a.subscribe_btn,onClick:function(){y.subscribeRSS(j.uid,e.title,m,e)},children:"Follow"}):"",t]})}(f);return Object(c.useEffect)((function(){var e;j&&(e=j.uid,b.collection("Articles").where("uid","==",e).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push({title:e.data().title,content:e.data().markDown.slice(0,100),id:e.data().id,tags:e.data().tags})})),u(K(t))})))}),[j]),Object(a.jsxs)("div",{className:nt.a.boardWrapper,children:[Object(a.jsx)(bt,{className:"headMemberIcon",user:e.user}),Object(a.jsx)("div",{className:nt.a.title,children:"# Explore"}),Object(a.jsx)("div",{className:nt.a.categoryTitle,children:"Tech"}),Object(a.jsxs)("div",{className:nt.a.categoryWrapper,children:[Object(a.jsxs)("div",{className:nt.a.categoryCard,children:[Object(a.jsxs)("div",{className:nt.a.cardUpper,children:[Object(a.jsx)("div",{className:nt.a.cardImg,children:Object(a.jsx)("img",{src:jt,alt:""})}),Object(a.jsxs)("div",{className:nt.a.cardWording,children:[Object(a.jsx)("div",{className:nt.a.cardTitle,children:"Segment Fault - \u524d\u7aef"}),Object(a.jsx)("div",{className:nt.a.cardDescription,children:"\u524d\u7aef\u65b0\u77e5"})]})]}),Object(a.jsx)("div",{className:nt.a.cardBtn,children:"Follow"})]}),Object(a.jsxs)("div",{className:nt.a.categoryCard,children:[Object(a.jsxs)("div",{className:nt.a.cardUpper,children:[Object(a.jsx)("div",{className:nt.a.cardImg,children:Object(a.jsx)("img",{src:jt,alt:""})}),Object(a.jsxs)("div",{className:nt.a.cardWording,children:[Object(a.jsx)("div",{className:nt.a.cardTitle,children:"\u6398\u91d1\u524d\u7aef"}),Object(a.jsx)("div",{className:nt.a.cardDescription,children:"\u524d\u7aef\u65b0\u77e5"})]})]}),Object(a.jsx)("div",{className:nt.a.cardBtn,children:"Follow"})]}),Object(a.jsxs)("div",{className:nt.a.categoryCard,children:[Object(a.jsxs)("div",{className:nt.a.cardUpper,children:[Object(a.jsx)("div",{className:nt.a.cardImg,children:Object(a.jsx)("img",{src:jt,alt:""})}),Object(a.jsxs)("div",{className:nt.a.cardWording,children:[Object(a.jsx)("div",{className:nt.a.cardTitle,children:"Segment Fault - \u524d\u7aef"}),Object(a.jsx)("div",{className:nt.a.cardDescription,children:"\u524d\u7aef\u65b0\u77e5"})]})]}),Object(a.jsx)("div",{className:nt.a.cardBtn,children:"Follow"})]}),Object(a.jsxs)("div",{className:nt.a.categoryCard,children:[Object(a.jsxs)("div",{className:nt.a.cardUpper,children:[Object(a.jsx)("div",{className:nt.a.cardImg,children:Object(a.jsx)("img",{src:jt,alt:""})}),Object(a.jsxs)("div",{className:nt.a.cardWording,children:[Object(a.jsx)("div",{className:nt.a.cardTitle,children:"Segment Fault - \u524d\u7aef"}),Object(a.jsx)("div",{className:nt.a.cardDescription,children:"\u524d\u7aef\u65b0\u77e5"})]})]}),Object(a.jsx)("div",{className:nt.a.cardBtn,children:"Follow"})]}),Object(a.jsxs)("div",{className:nt.a.categoryCard,children:[Object(a.jsxs)("div",{className:nt.a.cardUpper,children:[Object(a.jsx)("div",{className:nt.a.cardImg,children:Object(a.jsx)("img",{src:jt,alt:""})}),Object(a.jsxs)("div",{className:nt.a.cardWording,children:[Object(a.jsx)("div",{className:nt.a.cardTitle,children:"Segment Fault - \u524d\u7aef"}),Object(a.jsx)("div",{className:nt.a.cardDescription,children:"\u524d\u7aef\u65b0\u77e5"})]})]}),Object(a.jsx)("div",{className:nt.a.cardBtn,children:"Follow"})]})]}),O,r?Object(a.jsxs)("div",{className:nt.a.popup,children:[Object(a.jsx)("div",{className:nt.a.blur,onClick:function(){o(!1)}}),g]}):""]})}var ft=n(117),ht=n.n(ft),mt=n.p+"static/media/taggy_logo_3x.02226159.png",gt=n(438),Ot=n.n(gt),xt=n(437),vt=n.n(xt);function St(){return Object(a.jsx)("div",{className:ht.a.functionTabWrapper,children:Object(a.jsxs)("div",{className:ht.a.functionTab,children:[Object(a.jsx)("div",{className:ht.a.logoWrapper,children:Object(a.jsx)("img",{src:mt,alt:"",width:"50px"})}),Object(a.jsxs)("div",{className:ht.a.iconWrapper,children:[Object(a.jsx)(j.b,{to:"/board",children:Object(a.jsx)(Qe.a,{fontSize:"large",style:{color:"#747474"}})}),Object(a.jsx)(j.b,{to:"/rss",children:Object(a.jsx)(vt.a,{fontSize:"large",style:{color:"#747474"}})}),Object(a.jsx)(j.b,{to:"/graph",children:Object(a.jsx)(ze.a,{fontSize:"large",style:{color:"#747474"}})}),Object(a.jsx)(j.b,{to:"/group",children:Object(a.jsx)(Fe.a,{fontSize:"large",style:{color:"#747474"}})}),Object(a.jsx)(j.b,{to:"/signup",children:Object(a.jsx)(Ye.a,{fontSize:"large",style:{color:"#747474"}})})]}),Object(a.jsx)(Ot.a,{calssName:ht.a.exit,style:{color:"#747474"},onClick:function(){u.signOut().then((function(){return console.log("user successfully sign out")})).catch((function(e){console.log(e)}))}})]})})}var Nt=function(){return Object(a.jsx)(j.a,{children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(re,{}),Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{path:"/signup",component:M}),Object(a.jsx)(l.a,{path:"/signin",component:L}),Object(a.jsx)(l.a,{path:"/board",children:Object(a.jsxs)("div",{className:"content",children:[Object(a.jsx)(St,{}),Object(a.jsx)(ye,{}),Object(a.jsx)(ce,{})]})}),Object(a.jsx)(l.a,{path:"/article",component:w}),Object(a.jsx)(l.a,{path:"/group",children:Object(a.jsxs)("div",{className:"content",children:[Object(a.jsx)(St,{}),Object(a.jsx)(we,{}),Object(a.jsx)(Me,{})]})}),Object(a.jsx)(l.a,{path:"/graph",children:Object(a.jsxs)("div",{className:"content",children:[Object(a.jsx)(St,{}),Object(a.jsx)(ce,{}),Object(a.jsx)(Ge,{})]})}),Object(a.jsx)(l.a,{path:"/rss",children:Object(a.jsxs)("div",{className:"content",children:[Object(a.jsx)(St,{}),Object(a.jsx)(Ke,{},"123"),Object(a.jsx)(st,{})]})}),Object(a.jsx)(l.a,{path:"/rssexplore",children:Object(a.jsxs)("div",{className:"content",children:[Object(a.jsx)(St,{}),Object(a.jsx)(Ke,{},"12223"),Object(a.jsx)(pt,{})]})}),Object(a.jsx)("h1",{className:"title",children:"Welcome to Taggy"})]})]})})},Rt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,896)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))},_t=n(51),yt=n(439),kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tagSelected:"all",articleList:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITARTICLE":return Object(f.a)(Object(f.a)({},e),{},{articleList:t.articleList});case"SWITCHARTICLE":return Object(f.a)(Object(f.a)({},e),{},{tagSelected:t.tagSelected});default:return e}},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETMEMBER":return Object(f.a)(Object(f.a)({},e),{},{user:{uid:t.uid,displayName:t.displayName,email:t.email}});default:return e}},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{feed:{},ChannelRSSId:"all"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GETRSSRESPONSE":return Object(f.a)(Object(f.a)({},e),{},{feed:t.feed,url:t.url});case"SWITCHRSS":return Object(f.a)(Object(f.a)({},e),{},{ChannelRSSId:t.ChannelRSSId});case"INITUSERRSSLIST":return Object(f.a)(Object(f.a)({},e),{},{UserRSSList:t.RSSList});case"SETUSERALLFEEDS":return Object(f.a)(Object(f.a)({},e),{},{userAllFeeds:[].concat(Object(p.a)(e.userAllFeeds),[t.userAllFeeds])});default:return e}},Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{groupId:null,tagSelected:"all",articleList:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GROUPINIT":return Object(f.a)(Object(f.a)({},e),{},{groups:t.groups});case"INITGROUPSELECT":case"SWITCHGROUPSELECT":return Object(f.a)(Object(f.a)({},e),{},{groupId:t.groupId,groupName:t.groupName});default:return e}},wt=Object(_t.combineReducers)({groupReducer:Tt,articleReducer:kt,memberReducer:Ft,RSSReducer:It}),Ct=Object(_t.createStore)(wt,Object(yt.composeWithDevTools)());i.a.render(Object(a.jsx)(T.a,{store:Ct,children:Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Nt,{})})}),document.getElementById("root")),Rt()},97:function(e,t,n){e.exports={boardWrapper:"GroupBoard_boardWrapper__34ma_",titleWrapper:"GroupBoard_titleWrapper__2QB5f",title:"GroupBoard_title__31aYR",actionList:"GroupBoard_actionList__2o8c1",addMemberWrapper:"GroupBoard_addMemberWrapper__wQT2n",memberWrapper:"GroupBoard_memberWrapper__28t-5"}}},[[872,1,2]]]);
//# sourceMappingURL=main.2d5c7a52.chunk.js.map